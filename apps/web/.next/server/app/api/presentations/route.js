/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/presentations/route";
exports.ids = ["app/api/presentations/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:events");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "?3713":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?8e41":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpresentations%2Froute&page=%2Fapi%2Fpresentations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpresentations%2Froute.ts&appDir=C%3A%5CUsers%5Cazeta%5CDocuments%5CProjects%5Cspeakdeck-build%5Capps%5Cweb%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cazeta%5CDocuments%5CProjects%5Cspeakdeck-build%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpresentations%2Froute&page=%2Fapi%2Fpresentations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpresentations%2Froute.ts&appDir=C%3A%5CUsers%5Cazeta%5CDocuments%5CProjects%5Cspeakdeck-build%5Capps%5Cweb%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cazeta%5CDocuments%5CProjects%5Cspeakdeck-build%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/../../node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_azeta_Documents_Projects_speakdeck_build_apps_web_app_api_presentations_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/presentations/route.ts */ \"(rsc)/./app/api/presentations/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/presentations/route\",\n        pathname: \"/api/presentations\",\n        filename: \"route\",\n        bundlePath: \"app/api/presentations/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\azeta\\\\Documents\\\\Projects\\\\speakdeck-build\\\\apps\\\\web\\\\app\\\\api\\\\presentations\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_azeta_Documents_Projects_speakdeck_build_apps_web_app_api_presentations_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/presentations/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyLmpzP25hbWU9YXBwJTJGYXBpJTJGcHJlc2VudGF0aW9ucyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcHJlc2VudGF0aW9ucyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnByZXNlbnRhdGlvbnMlMkZyb3V0ZS50cyZhcHBEaXI9QyUzQSU1Q1VzZXJzJTVDYXpldGElNUNEb2N1bWVudHMlNUNQcm9qZWN0cyU1Q3NwZWFrZGVjay1idWlsZCU1Q2FwcHMlNUN3ZWIlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q2F6ZXRhJTVDRG9jdW1lbnRzJTVDUHJvamVjdHMlNUNzcGVha2RlY2stYnVpbGQlNUNhcHBzJTVDd2ViJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNvRDtBQUNqSTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL0BzcGVha2RlY2svd2ViLz9mODA4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGF6ZXRhXFxcXERvY3VtZW50c1xcXFxQcm9qZWN0c1xcXFxzcGVha2RlY2stYnVpbGRcXFxcYXBwc1xcXFx3ZWJcXFxcYXBwXFxcXGFwaVxcXFxwcmVzZW50YXRpb25zXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcmVzZW50YXRpb25zL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJlc2VudGF0aW9uc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcHJlc2VudGF0aW9ucy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGF6ZXRhXFxcXERvY3VtZW50c1xcXFxQcm9qZWN0c1xcXFxzcGVha2RlY2stYnVpbGRcXFxcYXBwc1xcXFx3ZWJcXFxcYXBwXFxcXGFwaVxcXFxwcmVzZW50YXRpb25zXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9wcmVzZW50YXRpb25zL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpresentations%2Froute&page=%2Fapi%2Fpresentations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpresentations%2Froute.ts&appDir=C%3A%5CUsers%5Cazeta%5CDocuments%5CProjects%5Cspeakdeck-build%5Capps%5Cweb%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cazeta%5CDocuments%5CProjects%5Cspeakdeck-build%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/presentations/route.ts":
/*!****************************************!*\
  !*** ./app/api/presentations/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/next/dist/api/server.js\");\n/* harmony import */ var _speakdeck_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @speakdeck/shared */ \"(rsc)/../../packages/shared/src/index.ts\");\n/* harmony import */ var _src_services_database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/services/database */ \"(rsc)/./src/services/database.ts\");\n/* harmony import */ var _src_services_fallback_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../src/services/fallback-manager */ \"(rsc)/./src/services/fallback-manager.ts\");\n/* harmony import */ var _src_services_ai_services_gemini__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../src/services/ai-services/gemini */ \"(rsc)/./src/services/ai-services/gemini.ts\");\n/* harmony import */ var _src_services_ai_services_nano_banana__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../src/services/ai-services/nano-banana */ \"(rsc)/./src/services/ai-services/nano-banana.ts\");\n/* harmony import */ var _src_services_ai_services_eleven_labs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../src/services/ai-services/eleven-labs */ \"(rsc)/./src/services/ai-services/eleven-labs.ts\");\n/* harmony import */ var _src_lib_supabase__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../src/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n\n\n\n\n\n\n\n\nasync function POST(request) {\n    const startTime = Date.now();\n    try {\n        console.log(\"POST /api/presentations called\");\n        // Validate request body\n        const body = await request.json();\n        console.log(\"Request body:\", body);\n        const { title, userId } = body;\n        const validation = (0,_speakdeck_shared__WEBPACK_IMPORTED_MODULE_1__.validatePresentationTitle)(title);\n        if (!validation.isValid) {\n            console.log(\"Validation failed:\", validation.error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json((0,_speakdeck_shared__WEBPACK_IMPORTED_MODULE_1__.createErrorResponse)(\"INVALID_INPUT\", validation.error), {\n                status: 400\n            });\n        }\n        console.log(\"Creating database service...\");\n        const db = new _src_services_database__WEBPACK_IMPORTED_MODULE_2__.DatabaseService();\n        console.log(\"Creating fallback manager...\");\n        const fallbackManager = new _src_services_fallback_manager__WEBPACK_IMPORTED_MODULE_3__.FallbackManager();\n        // Check if we should use fallback\n        console.log(\"Checking fallback availability...\");\n        const fallbackCheck = await fallbackManager.shouldUseFallback(title);\n        console.log(\"Fallback check result:\", fallbackCheck);\n        if (fallbackCheck.useFallback) {\n            console.log(`Using fallback for \"${title}\": ${fallbackCheck.reason}`);\n            const fallbackPresentation = await fallbackManager.getFallbackPresentation(title);\n            console.log(\"Got fallback presentation:\", fallbackPresentation?.id || \"null\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json((0,_speakdeck_shared__WEBPACK_IMPORTED_MODULE_1__.createSuccessResponse)({\n                ...fallbackPresentation,\n                isFallback: true,\n                fallbackReason: fallbackCheck.reason\n            }), {\n                status: 201\n            });\n        }\n        // Create presentation record\n        console.log(\"Creating presentation in database...\");\n        const presentationId = await db.createPresentation(title, userId);\n        console.log(\"Created presentation with ID:\", presentationId);\n        // Start the AI generation pipeline in the background\n        console.log(\"Starting async generation pipeline...\");\n        generatePresentationAsync(presentationId, title, db).catch((error)=>{\n            console.error(`Failed to generate presentation ${presentationId}:`, error);\n            db.updatePresentationStatus(presentationId, \"failed\", error.message).catch((dbError)=>console.error(\"Failed to update status:\", dbError));\n        });\n        // Return initial response immediately\n        console.log(\"Fetching initial presentation data...\");\n        const initialPresentation = await db.getPresentation(presentationId);\n        console.log(\"Got initial presentation:\", initialPresentation);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json((0,_speakdeck_shared__WEBPACK_IMPORTED_MODULE_1__.createSuccessResponse)(initialPresentation), {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Presentation creation error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json((0,_speakdeck_shared__WEBPACK_IMPORTED_MODULE_1__.createErrorResponse)(\"INTERNAL_ERROR\", \"Failed to create presentation\", {\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        }), {\n            status: 500\n        });\n    }\n}\n// Background AI generation pipeline\nasync function generatePresentationAsync(presentationId, title, db) {\n    const startTime = Date.now();\n    let geminiService = null;\n    let nanoBananaService = null;\n    let elevenLabsService = null;\n    try {\n        // Initialize services\n        try {\n            geminiService = new _src_services_ai_services_gemini__WEBPACK_IMPORTED_MODULE_4__.GeminiService();\n            nanoBananaService = new _src_services_ai_services_nano_banana__WEBPACK_IMPORTED_MODULE_5__.NanoBananaService();\n            elevenLabsService = new _src_services_ai_services_eleven_labs__WEBPACK_IMPORTED_MODULE_6__.ElevenLabsService();\n        } catch (error) {\n            throw new Error(`Failed to initialize AI services: ${error}`);\n        }\n        // Update status to processing\n        await db.updatePresentationStatus(presentationId, \"processing\");\n        await broadcastProgress(presentationId, \"processing\", 10, \"Initializing AI services...\");\n        // Step 1: Generate text content with Gemini\n        await db.updatePresentationStatus(presentationId, \"generating_text\");\n        await broadcastProgress(presentationId, \"generating_text\", 20, \"Generating slide content...\");\n        const geminiResponse = await geminiService.generatePresentationContent(title, 4);\n        // Create slide records\n        const slideIds = [];\n        for(let i = 0; i < geminiResponse.slides.length; i++){\n            const slide = geminiResponse.slides[i];\n            const slideId = await db.createSlide({\n                presentationId,\n                slideNumber: i + 1,\n                title: slide.title,\n                content: slide.content,\n                imagePrompt: slide.imagePrompt\n            });\n            slideIds.push(slideId);\n        }\n        await broadcastProgress(presentationId, \"generating_text\", 40, `Created ${slideIds.length} slides`);\n        // Step 2: Generate images with Nano Banana\n        await db.updatePresentationStatus(presentationId, \"generating_visuals\");\n        await broadcastProgress(presentationId, \"generating_visuals\", 50, \"Generating slide visuals...\");\n        const imagePromises = geminiResponse.slides.map(async (slide, index)=>{\n            const slideId = slideIds[index];\n            try {\n                await db.updateSlideStatus(slideId, \"image\", \"processing\");\n                const imageResponse = await nanoBananaService.generateImage(slide.imagePrompt, index + 1);\n                await db.updateSlideMedia(slideId, imageResponse.imageUrl);\n                await db.updateSlideStatus(slideId, \"image\", \"completed\");\n                return {\n                    slideId,\n                    imageUrl: imageResponse.imageUrl,\n                    callsUsed: imageResponse.callsUsed\n                };\n            } catch (error) {\n                console.error(`Failed to generate image for slide ${index + 1}:`, error);\n                await db.updateSlideStatus(slideId, \"image\", \"failed\");\n                return {\n                    slideId,\n                    imageUrl: null,\n                    callsUsed: 0\n                };\n            }\n        });\n        const imageResults = await Promise.allSettled(imagePromises);\n        const successfulImages = imageResults.filter((result)=>result.status === \"fulfilled\").map((result)=>result.value);\n        await broadcastProgress(presentationId, \"generating_visuals\", 70, `Generated ${successfulImages.filter((r)=>r.imageUrl).length} visuals`);\n        // Step 3: Generate audio narration with ElevenLabs\n        await db.updatePresentationStatus(presentationId, \"generating_audio\");\n        await broadcastProgress(presentationId, \"generating_audio\", 80, \"Generating narration...\");\n        const audioPromises = geminiResponse.slides.map(async (slide, index)=>{\n            const slideId = slideIds[index];\n            const fullText = `${slide.title}. ${slide.content}`;\n            try {\n                await db.updateSlideStatus(slideId, \"audio\", \"processing\");\n                const audioResponse = await elevenLabsService.generateNarration(fullText, index + 1);\n                await db.updateSlideMedia(slideId, undefined, audioResponse.audioUrl);\n                await db.updateSlideStatus(slideId, \"audio\", \"completed\");\n                return {\n                    slideId,\n                    audioUrl: audioResponse.audioUrl,\n                    charactersUsed: audioResponse.charactersUsed\n                };\n            } catch (error) {\n                console.error(`Failed to generate audio for slide ${index + 1}:`, error);\n                await db.updateSlideStatus(slideId, \"audio\", \"failed\");\n                return {\n                    slideId,\n                    audioUrl: null,\n                    charactersUsed: 0\n                };\n            }\n        });\n        const audioResults = await Promise.allSettled(audioPromises);\n        const successfulAudio = audioResults.filter((result)=>result.status === \"fulfilled\").map((result)=>result.value);\n        await broadcastProgress(presentationId, \"generating_audio\", 95, `Generated ${successfulAudio.filter((r)=>r.audioUrl).length} narrations`);\n        // Final step: Update metadata and mark as completed\n        const generationTime = Date.now() - startTime;\n        const totalCalls = successfulImages.reduce((sum, img)=>sum + img.callsUsed, 0);\n        const totalCharacters = successfulAudio.reduce((sum, audio)=>sum + audio.charactersUsed, 0);\n        await db.updatePresentationMetadata(presentationId, {\n            geminiTokensUsed: geminiResponse.tokensUsed,\n            nanoBananaCallsUsed: totalCalls,\n            elevenLabsCharactersUsed: totalCharacters\n        }, generationTime);\n        await db.updatePresentationStatus(presentationId, \"completed\");\n        await broadcastProgress(presentationId, \"completed\", 100, \"Presentation completed!\");\n        console.log(`Successfully generated presentation ${presentationId} in ${generationTime}ms`);\n    } catch (error) {\n        console.error(`AI generation pipeline failed for ${presentationId}:`, error);\n        const generationTime = Date.now() - startTime;\n        await db.updatePresentationStatus(presentationId, \"failed\", error instanceof Error ? error.message : \"Unknown error occurred\");\n        await broadcastProgress(presentationId, \"failed\", 100, \"Generation failed\");\n    }\n}\n// Real-time progress updates\nasync function broadcastProgress(presentationId, status, progress, currentStep) {\n    try {\n        const channel = _src_lib_supabase__WEBPACK_IMPORTED_MODULE_7__.supabase.channel(`presentation-${presentationId}`);\n        await channel.send({\n            type: \"broadcast\",\n            event: \"progress_update\",\n            payload: {\n                presentationId,\n                status,\n                progress,\n                currentStep,\n                timestamp: new Date().toISOString()\n            }\n        });\n    } catch (error) {\n        console.error(\"Failed to broadcast progress:\", error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3ByZXNlbnRhdGlvbnMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ2tEO0FBQ3pDO0FBQ1E7QUFDQTtBQUNTO0FBQ0E7QUFDN0I7QUFFOUMsZUFBZVUsS0FBS0MsT0FBb0I7SUFDN0MsTUFBTUMsWUFBWUMsS0FBS0MsR0FBRztJQUUxQixJQUFJO1FBQ0ZDLFFBQVFDLEdBQUcsQ0FBQztRQUVaLHdCQUF3QjtRQUN4QixNQUFNQyxPQUFPLE1BQU1OLFFBQVFPLElBQUk7UUFDL0JILFFBQVFDLEdBQUcsQ0FBQyxpQkFBaUJDO1FBRTdCLE1BQU0sRUFBRUUsS0FBSyxFQUFFQyxNQUFNLEVBQUUsR0FBR0g7UUFFMUIsTUFBTUksYUFBYWxCLDRFQUF5QkEsQ0FBQ2dCO1FBQzdDLElBQUksQ0FBQ0UsV0FBV0MsT0FBTyxFQUFFO1lBQ3ZCUCxRQUFRQyxHQUFHLENBQUMsc0JBQXNCSyxXQUFXRSxLQUFLO1lBQ2xELE9BQU92QixxREFBWUEsQ0FBQ2tCLElBQUksQ0FDdEJoQixzRUFBbUJBLENBQUMsaUJBQWlCbUIsV0FBV0UsS0FBSyxHQUNyRDtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUFULFFBQVFDLEdBQUcsQ0FBQztRQUNaLE1BQU1TLEtBQUssSUFBSXJCLG1FQUFlQTtRQUM5QlcsUUFBUUMsR0FBRyxDQUFDO1FBQ1osTUFBTVUsa0JBQWtCLElBQUlyQiwyRUFBZUE7UUFFM0Msa0NBQWtDO1FBQ2xDVSxRQUFRQyxHQUFHLENBQUM7UUFDWixNQUFNVyxnQkFBZ0IsTUFBTUQsZ0JBQWdCRSxpQkFBaUIsQ0FBQ1Q7UUFDOURKLFFBQVFDLEdBQUcsQ0FBQywwQkFBMEJXO1FBRXRDLElBQUlBLGNBQWNFLFdBQVcsRUFBRTtZQUM3QmQsUUFBUUMsR0FBRyxDQUFDLENBQUMsb0JBQW9CLEVBQUVHLE1BQU0sR0FBRyxFQUFFUSxjQUFjRyxNQUFNLENBQUMsQ0FBQztZQUVwRSxNQUFNQyx1QkFBdUIsTUFBTUwsZ0JBQWdCTSx1QkFBdUIsQ0FBQ2I7WUFDM0VKLFFBQVFDLEdBQUcsQ0FBQyw4QkFBOEJlLHNCQUFzQkUsTUFBTTtZQUV0RSxPQUFPakMscURBQVlBLENBQUNrQixJQUFJLENBQ3RCakIsd0VBQXFCQSxDQUFDO2dCQUNwQixHQUFHOEIsb0JBQW9CO2dCQUN2QkcsWUFBWTtnQkFDWkMsZ0JBQWdCUixjQUFjRyxNQUFNO1lBQ3RDLElBQ0E7Z0JBQUVOLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDZCQUE2QjtRQUM3QlQsUUFBUUMsR0FBRyxDQUFDO1FBQ1osTUFBTW9CLGlCQUFpQixNQUFNWCxHQUFHWSxrQkFBa0IsQ0FBQ2xCLE9BQU9DO1FBQzFETCxRQUFRQyxHQUFHLENBQUMsaUNBQWlDb0I7UUFFN0MscURBQXFEO1FBQ3JEckIsUUFBUUMsR0FBRyxDQUFDO1FBQ1pzQiwwQkFBMEJGLGdCQUFnQmpCLE9BQU9NLElBQzlDYyxLQUFLLENBQUNoQixDQUFBQTtZQUNMUixRQUFRUSxLQUFLLENBQUMsQ0FBQyxnQ0FBZ0MsRUFBRWEsZUFBZSxDQUFDLENBQUMsRUFBRWI7WUFDcEVFLEdBQUdlLHdCQUF3QixDQUFDSixnQkFBZ0IsVUFBVWIsTUFBTWtCLE9BQU8sRUFDaEVGLEtBQUssQ0FBQ0csQ0FBQUEsVUFBVzNCLFFBQVFRLEtBQUssQ0FBQyw0QkFBNEJtQjtRQUNoRTtRQUVGLHNDQUFzQztRQUN0QzNCLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE1BQU0yQixzQkFBc0IsTUFBTWxCLEdBQUdtQixlQUFlLENBQUNSO1FBQ3JEckIsUUFBUUMsR0FBRyxDQUFDLDZCQUE2QjJCO1FBRXpDLE9BQU8zQyxxREFBWUEsQ0FBQ2tCLElBQUksQ0FDdEJqQix3RUFBcUJBLENBQUMwQyxzQkFDdEI7WUFBRW5CLFFBQVE7UUFBSTtJQUdsQixFQUFFLE9BQU9ELE9BQU87UUFDZFIsUUFBUVEsS0FBSyxDQUFDLGdDQUFnQ0E7UUFFOUMsT0FBT3ZCLHFEQUFZQSxDQUFDa0IsSUFBSSxDQUN0QmhCLHNFQUFtQkEsQ0FDakIsa0JBQ0EsaUNBQ0E7WUFBRXFCLE9BQU9BLGlCQUFpQnNCLFFBQVF0QixNQUFNa0IsT0FBTyxHQUFHO1FBQWdCLElBRXBFO1lBQUVqQixRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBLG9DQUFvQztBQUNwQyxlQUFlYywwQkFDYkYsY0FBc0IsRUFDdEJqQixLQUFhLEVBQ2JNLEVBQW1CO0lBRW5CLE1BQU1iLFlBQVlDLEtBQUtDLEdBQUc7SUFDMUIsSUFBSWdDLGdCQUFzQztJQUMxQyxJQUFJQyxvQkFBOEM7SUFDbEQsSUFBSUMsb0JBQThDO0lBRWxELElBQUk7UUFDRixzQkFBc0I7UUFDdEIsSUFBSTtZQUNGRixnQkFBZ0IsSUFBSXhDLDJFQUFhQTtZQUNqQ3lDLG9CQUFvQixJQUFJeEMsb0ZBQWlCQTtZQUN6Q3lDLG9CQUFvQixJQUFJeEMsb0ZBQWlCQTtRQUMzQyxFQUFFLE9BQU9lLE9BQU87WUFDZCxNQUFNLElBQUlzQixNQUFNLENBQUMsa0NBQWtDLEVBQUV0QixNQUFNLENBQUM7UUFDOUQ7UUFFQSw4QkFBOEI7UUFDOUIsTUFBTUUsR0FBR2Usd0JBQXdCLENBQUNKLGdCQUFnQjtRQUNsRCxNQUFNYSxrQkFBa0JiLGdCQUFnQixjQUFjLElBQUk7UUFFMUQsNENBQTRDO1FBQzVDLE1BQU1YLEdBQUdlLHdCQUF3QixDQUFDSixnQkFBZ0I7UUFDbEQsTUFBTWEsa0JBQWtCYixnQkFBZ0IsbUJBQW1CLElBQUk7UUFFL0QsTUFBTWMsaUJBQWlCLE1BQU1KLGNBQWNLLDJCQUEyQixDQUFDaEMsT0FBTztRQUU5RSx1QkFBdUI7UUFDdkIsTUFBTWlDLFdBQXFCLEVBQUU7UUFDN0IsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlILGVBQWVJLE1BQU0sQ0FBQ0MsTUFBTSxFQUFFRixJQUFLO1lBQ3JELE1BQU1HLFFBQVFOLGVBQWVJLE1BQU0sQ0FBQ0QsRUFBRTtZQUN0QyxNQUFNSSxVQUFVLE1BQU1oQyxHQUFHaUMsV0FBVyxDQUFDO2dCQUNuQ3RCO2dCQUNBdUIsYUFBYU4sSUFBSTtnQkFDakJsQyxPQUFPcUMsTUFBTXJDLEtBQUs7Z0JBQ2xCeUMsU0FBU0osTUFBTUksT0FBTztnQkFDdEJDLGFBQWFMLE1BQU1LLFdBQVc7WUFDaEM7WUFDQVQsU0FBU1UsSUFBSSxDQUFDTDtRQUNoQjtRQUVBLE1BQU1SLGtCQUFrQmIsZ0JBQWdCLG1CQUFtQixJQUFJLENBQUMsUUFBUSxFQUFFZ0IsU0FBU0csTUFBTSxDQUFDLE9BQU8sQ0FBQztRQUVsRywyQ0FBMkM7UUFDM0MsTUFBTTlCLEdBQUdlLHdCQUF3QixDQUFDSixnQkFBZ0I7UUFDbEQsTUFBTWEsa0JBQWtCYixnQkFBZ0Isc0JBQXNCLElBQUk7UUFFbEUsTUFBTTJCLGdCQUFnQmIsZUFBZUksTUFBTSxDQUFDVSxHQUFHLENBQUMsT0FBT1IsT0FBT1M7WUFDNUQsTUFBTVIsVUFBVUwsUUFBUSxDQUFDYSxNQUFNO1lBRS9CLElBQUk7Z0JBQ0YsTUFBTXhDLEdBQUd5QyxpQkFBaUIsQ0FBQ1QsU0FBUyxTQUFTO2dCQUU3QyxNQUFNVSxnQkFBZ0IsTUFBTXBCLGtCQUFtQnFCLGFBQWEsQ0FBQ1osTUFBTUssV0FBVyxFQUFFSSxRQUFRO2dCQUV4RixNQUFNeEMsR0FBRzRDLGdCQUFnQixDQUFDWixTQUFTVSxjQUFjRyxRQUFRO2dCQUN6RCxNQUFNN0MsR0FBR3lDLGlCQUFpQixDQUFDVCxTQUFTLFNBQVM7Z0JBRTdDLE9BQU87b0JBQUVBO29CQUFTYSxVQUFVSCxjQUFjRyxRQUFRO29CQUFFQyxXQUFXSixjQUFjSSxTQUFTO2dCQUFDO1lBQ3pGLEVBQUUsT0FBT2hELE9BQU87Z0JBQ2RSLFFBQVFRLEtBQUssQ0FBQyxDQUFDLG1DQUFtQyxFQUFFMEMsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFMUM7Z0JBQ2xFLE1BQU1FLEdBQUd5QyxpQkFBaUIsQ0FBQ1QsU0FBUyxTQUFTO2dCQUM3QyxPQUFPO29CQUFFQTtvQkFBU2EsVUFBVTtvQkFBTUMsV0FBVztnQkFBRTtZQUNqRDtRQUNGO1FBRUEsTUFBTUMsZUFBZSxNQUFNQyxRQUFRQyxVQUFVLENBQUNYO1FBQzlDLE1BQU1ZLG1CQUFtQkgsYUFDdEJJLE1BQU0sQ0FBQ0MsQ0FBQUEsU0FBVUEsT0FBT3JELE1BQU0sS0FBSyxhQUNuQ3dDLEdBQUcsQ0FBQ2EsQ0FBQUEsU0FBVUEsT0FBT0MsS0FBSztRQUU3QixNQUFNN0Isa0JBQWtCYixnQkFBZ0Isc0JBQXNCLElBQzVELENBQUMsVUFBVSxFQUFFdUMsaUJBQWlCQyxNQUFNLENBQUNHLENBQUFBLElBQUtBLEVBQUVULFFBQVEsRUFBRWYsTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUV4RSxtREFBbUQ7UUFDbkQsTUFBTTlCLEdBQUdlLHdCQUF3QixDQUFDSixnQkFBZ0I7UUFDbEQsTUFBTWEsa0JBQWtCYixnQkFBZ0Isb0JBQW9CLElBQUk7UUFFaEUsTUFBTTRDLGdCQUFnQjlCLGVBQWVJLE1BQU0sQ0FBQ1UsR0FBRyxDQUFDLE9BQU9SLE9BQU9TO1lBQzVELE1BQU1SLFVBQVVMLFFBQVEsQ0FBQ2EsTUFBTTtZQUMvQixNQUFNZ0IsV0FBVyxDQUFDLEVBQUV6QixNQUFNckMsS0FBSyxDQUFDLEVBQUUsRUFBRXFDLE1BQU1JLE9BQU8sQ0FBQyxDQUFDO1lBRW5ELElBQUk7Z0JBQ0YsTUFBTW5DLEdBQUd5QyxpQkFBaUIsQ0FBQ1QsU0FBUyxTQUFTO2dCQUU3QyxNQUFNeUIsZ0JBQWdCLE1BQU1sQyxrQkFBbUJtQyxpQkFBaUIsQ0FBQ0YsVUFBVWhCLFFBQVE7Z0JBRW5GLE1BQU14QyxHQUFHNEMsZ0JBQWdCLENBQUNaLFNBQVMyQixXQUFXRixjQUFjRyxRQUFRO2dCQUNwRSxNQUFNNUQsR0FBR3lDLGlCQUFpQixDQUFDVCxTQUFTLFNBQVM7Z0JBRTdDLE9BQU87b0JBQUVBO29CQUFTNEIsVUFBVUgsY0FBY0csUUFBUTtvQkFBRUMsZ0JBQWdCSixjQUFjSSxjQUFjO2dCQUFDO1lBQ25HLEVBQUUsT0FBTy9ELE9BQU87Z0JBQ2RSLFFBQVFRLEtBQUssQ0FBQyxDQUFDLG1DQUFtQyxFQUFFMEMsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFMUM7Z0JBQ2xFLE1BQU1FLEdBQUd5QyxpQkFBaUIsQ0FBQ1QsU0FBUyxTQUFTO2dCQUM3QyxPQUFPO29CQUFFQTtvQkFBUzRCLFVBQVU7b0JBQU1DLGdCQUFnQjtnQkFBRTtZQUN0RDtRQUNGO1FBRUEsTUFBTUMsZUFBZSxNQUFNZCxRQUFRQyxVQUFVLENBQUNNO1FBQzlDLE1BQU1RLGtCQUFrQkQsYUFDckJYLE1BQU0sQ0FBQ0MsQ0FBQUEsU0FBVUEsT0FBT3JELE1BQU0sS0FBSyxhQUNuQ3dDLEdBQUcsQ0FBQ2EsQ0FBQUEsU0FBVUEsT0FBT0MsS0FBSztRQUU3QixNQUFNN0Isa0JBQWtCYixnQkFBZ0Isb0JBQW9CLElBQzFELENBQUMsVUFBVSxFQUFFb0QsZ0JBQWdCWixNQUFNLENBQUNHLENBQUFBLElBQUtBLEVBQUVNLFFBQVEsRUFBRTlCLE1BQU0sQ0FBQyxXQUFXLENBQUM7UUFFMUUsb0RBQW9EO1FBQ3BELE1BQU1rQyxpQkFBaUI1RSxLQUFLQyxHQUFHLEtBQUtGO1FBQ3BDLE1BQU04RSxhQUFhZixpQkFBaUJnQixNQUFNLENBQUMsQ0FBQ0MsS0FBS0MsTUFBUUQsTUFBTUMsSUFBSXRCLFNBQVMsRUFBRTtRQUM5RSxNQUFNdUIsa0JBQWtCTixnQkFBZ0JHLE1BQU0sQ0FBQyxDQUFDQyxLQUFLRyxRQUFVSCxNQUFNRyxNQUFNVCxjQUFjLEVBQUU7UUFFM0YsTUFBTTdELEdBQUd1RSwwQkFBMEIsQ0FBQzVELGdCQUFnQjtZQUNsRDZELGtCQUFrQi9DLGVBQWVnRCxVQUFVO1lBQzNDQyxxQkFBcUJUO1lBQ3JCVSwwQkFBMEJOO1FBQzVCLEdBQUdMO1FBRUgsTUFBTWhFLEdBQUdlLHdCQUF3QixDQUFDSixnQkFBZ0I7UUFDbEQsTUFBTWEsa0JBQWtCYixnQkFBZ0IsYUFBYSxLQUFLO1FBRTFEckIsUUFBUUMsR0FBRyxDQUFDLENBQUMsb0NBQW9DLEVBQUVvQixlQUFlLElBQUksRUFBRXFELGVBQWUsRUFBRSxDQUFDO0lBRTVGLEVBQUUsT0FBT2xFLE9BQU87UUFDZFIsUUFBUVEsS0FBSyxDQUFDLENBQUMsa0NBQWtDLEVBQUVhLGVBQWUsQ0FBQyxDQUFDLEVBQUViO1FBRXRFLE1BQU1rRSxpQkFBaUI1RSxLQUFLQyxHQUFHLEtBQUtGO1FBQ3BDLE1BQU1hLEdBQUdlLHdCQUF3QixDQUFDSixnQkFBZ0IsVUFDaERiLGlCQUFpQnNCLFFBQVF0QixNQUFNa0IsT0FBTyxHQUFHO1FBRTNDLE1BQU1RLGtCQUFrQmIsZ0JBQWdCLFVBQVUsS0FBSztJQUN6RDtBQUNGO0FBRUEsNkJBQTZCO0FBQzdCLGVBQWVhLGtCQUNiYixjQUFzQixFQUN0QlosTUFBYyxFQUNkNkUsUUFBZ0IsRUFDaEJDLFdBQW1CO0lBRW5CLElBQUk7UUFDRixNQUFNQyxVQUFVOUYsdURBQVFBLENBQUM4RixPQUFPLENBQUMsQ0FBQyxhQUFhLEVBQUVuRSxlQUFlLENBQUM7UUFFakUsTUFBTW1FLFFBQVFDLElBQUksQ0FBQztZQUNqQkMsTUFBTTtZQUNOQyxPQUFPO1lBQ1BDLFNBQVM7Z0JBQ1B2RTtnQkFDQVo7Z0JBQ0E2RTtnQkFDQUM7Z0JBQ0FNLFdBQVcsSUFBSS9GLE9BQU9nRyxXQUFXO1lBQ25DO1FBQ0Y7SUFDRixFQUFFLE9BQU90RixPQUFPO1FBQ2RSLFFBQVFRLEtBQUssQ0FBQyxpQ0FBaUNBO0lBQ2pEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac3BlYWtkZWNrL3dlYi8uL2FwcC9hcGkvcHJlc2VudGF0aW9ucy9yb3V0ZS50cz8yMzY3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBjcmVhdGVTdWNjZXNzUmVzcG9uc2UsIGNyZWF0ZUVycm9yUmVzcG9uc2UsIHZhbGlkYXRlUHJlc2VudGF0aW9uVGl0bGUgfSBmcm9tICdAc3BlYWtkZWNrL3NoYXJlZCc7XG5pbXBvcnQgeyBEYXRhYmFzZVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMvZGF0YWJhc2UnO1xuaW1wb3J0IHsgRmFsbGJhY2tNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzL2ZhbGxiYWNrLW1hbmFnZXInO1xuaW1wb3J0IHsgR2VtaW5pU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9haS1zZXJ2aWNlcy9nZW1pbmknO1xuaW1wb3J0IHsgTmFub0JhbmFuYVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMvYWktc2VydmljZXMvbmFuby1iYW5hbmEnO1xuaW1wb3J0IHsgRWxldmVuTGFic1NlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMvYWktc2VydmljZXMvZWxldmVuLWxhYnMnO1xuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICcuLi8uLi8uLi9zcmMvbGliL3N1cGFiYXNlJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcblxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdQT1NUIC9hcGkvcHJlc2VudGF0aW9ucyBjYWxsZWQnKTtcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSByZXF1ZXN0IGJvZHlcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc29sZS5sb2coJ1JlcXVlc3QgYm9keTonLCBib2R5KTtcbiAgICBcbiAgICBjb25zdCB7IHRpdGxlLCB1c2VySWQgfSA9IGJvZHk7XG5cbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdGVQcmVzZW50YXRpb25UaXRsZSh0aXRsZSk7XG4gICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYWxpZGF0aW9uIGZhaWxlZDonLCB2YWxpZGF0aW9uLmVycm9yKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgY3JlYXRlRXJyb3JSZXNwb25zZSgnSU5WQUxJRF9JTlBVVCcsIHZhbGlkYXRpb24uZXJyb3IhKSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBkYXRhYmFzZSBzZXJ2aWNlLi4uJyk7XG4gICAgY29uc3QgZGIgPSBuZXcgRGF0YWJhc2VTZXJ2aWNlKCk7XG4gICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIGZhbGxiYWNrIG1hbmFnZXIuLi4nKTtcbiAgICBjb25zdCBmYWxsYmFja01hbmFnZXIgPSBuZXcgRmFsbGJhY2tNYW5hZ2VyKCk7XG5cbiAgICAvLyBDaGVjayBpZiB3ZSBzaG91bGQgdXNlIGZhbGxiYWNrXG4gICAgY29uc29sZS5sb2coJ0NoZWNraW5nIGZhbGxiYWNrIGF2YWlsYWJpbGl0eS4uLicpO1xuICAgIGNvbnN0IGZhbGxiYWNrQ2hlY2sgPSBhd2FpdCBmYWxsYmFja01hbmFnZXIuc2hvdWxkVXNlRmFsbGJhY2sodGl0bGUpO1xuICAgIGNvbnNvbGUubG9nKCdGYWxsYmFjayBjaGVjayByZXN1bHQ6JywgZmFsbGJhY2tDaGVjayk7XG4gICAgXG4gICAgaWYgKGZhbGxiYWNrQ2hlY2sudXNlRmFsbGJhY2spIHtcbiAgICAgIGNvbnNvbGUubG9nKGBVc2luZyBmYWxsYmFjayBmb3IgXCIke3RpdGxlfVwiOiAke2ZhbGxiYWNrQ2hlY2sucmVhc29ufWApO1xuICAgICAgXG4gICAgICBjb25zdCBmYWxsYmFja1ByZXNlbnRhdGlvbiA9IGF3YWl0IGZhbGxiYWNrTWFuYWdlci5nZXRGYWxsYmFja1ByZXNlbnRhdGlvbih0aXRsZSk7XG4gICAgICBjb25zb2xlLmxvZygnR290IGZhbGxiYWNrIHByZXNlbnRhdGlvbjonLCBmYWxsYmFja1ByZXNlbnRhdGlvbj8uaWQgfHwgJ251bGwnKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICBjcmVhdGVTdWNjZXNzUmVzcG9uc2Uoe1xuICAgICAgICAgIC4uLmZhbGxiYWNrUHJlc2VudGF0aW9uLFxuICAgICAgICAgIGlzRmFsbGJhY2s6IHRydWUsXG4gICAgICAgICAgZmFsbGJhY2tSZWFzb246IGZhbGxiYWNrQ2hlY2sucmVhc29uLFxuICAgICAgICB9KSxcbiAgICAgICAgeyBzdGF0dXM6IDIwMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBwcmVzZW50YXRpb24gcmVjb3JkXG4gICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIHByZXNlbnRhdGlvbiBpbiBkYXRhYmFzZS4uLicpO1xuICAgIGNvbnN0IHByZXNlbnRhdGlvbklkID0gYXdhaXQgZGIuY3JlYXRlUHJlc2VudGF0aW9uKHRpdGxlLCB1c2VySWQpO1xuICAgIGNvbnNvbGUubG9nKCdDcmVhdGVkIHByZXNlbnRhdGlvbiB3aXRoIElEOicsIHByZXNlbnRhdGlvbklkKTtcblxuICAgIC8vIFN0YXJ0IHRoZSBBSSBnZW5lcmF0aW9uIHBpcGVsaW5lIGluIHRoZSBiYWNrZ3JvdW5kXG4gICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIGFzeW5jIGdlbmVyYXRpb24gcGlwZWxpbmUuLi4nKTtcbiAgICBnZW5lcmF0ZVByZXNlbnRhdGlvbkFzeW5jKHByZXNlbnRhdGlvbklkLCB0aXRsZSwgZGIpXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZ2VuZXJhdGUgcHJlc2VudGF0aW9uICR7cHJlc2VudGF0aW9uSWR9OmAsIGVycm9yKTtcbiAgICAgICAgZGIudXBkYXRlUHJlc2VudGF0aW9uU3RhdHVzKHByZXNlbnRhdGlvbklkLCAnZmFpbGVkJywgZXJyb3IubWVzc2FnZSlcbiAgICAgICAgICAuY2F0Y2goZGJFcnJvciA9PiBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHN0YXR1czonLCBkYkVycm9yKSk7XG4gICAgICB9KTtcblxuICAgIC8vIFJldHVybiBpbml0aWFsIHJlc3BvbnNlIGltbWVkaWF0ZWx5XG4gICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIGluaXRpYWwgcHJlc2VudGF0aW9uIGRhdGEuLi4nKTtcbiAgICBjb25zdCBpbml0aWFsUHJlc2VudGF0aW9uID0gYXdhaXQgZGIuZ2V0UHJlc2VudGF0aW9uKHByZXNlbnRhdGlvbklkKTtcbiAgICBjb25zb2xlLmxvZygnR290IGluaXRpYWwgcHJlc2VudGF0aW9uOicsIGluaXRpYWxQcmVzZW50YXRpb24pO1xuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIGNyZWF0ZVN1Y2Nlc3NSZXNwb25zZShpbml0aWFsUHJlc2VudGF0aW9uKSxcbiAgICAgIHsgc3RhdHVzOiAyMDEgfVxuICAgICk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdQcmVzZW50YXRpb24gY3JlYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIGNyZWF0ZUVycm9yUmVzcG9uc2UoXG4gICAgICAgICdJTlRFUk5BTF9FUlJPUicsXG4gICAgICAgICdGYWlsZWQgdG8gY3JlYXRlIHByZXNlbnRhdGlvbicsXG4gICAgICAgIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InIH1cbiAgICAgICksXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8vIEJhY2tncm91bmQgQUkgZ2VuZXJhdGlvbiBwaXBlbGluZVxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVQcmVzZW50YXRpb25Bc3luYyhcbiAgcHJlc2VudGF0aW9uSWQ6IHN0cmluZyxcbiAgdGl0bGU6IHN0cmluZyxcbiAgZGI6IERhdGFiYXNlU2VydmljZVxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gIGxldCBnZW1pbmlTZXJ2aWNlOiBHZW1pbmlTZXJ2aWNlIHwgbnVsbCA9IG51bGw7XG4gIGxldCBuYW5vQmFuYW5hU2VydmljZTogTmFub0JhbmFuYVNlcnZpY2UgfCBudWxsID0gbnVsbDtcbiAgbGV0IGVsZXZlbkxhYnNTZXJ2aWNlOiBFbGV2ZW5MYWJzU2VydmljZSB8IG51bGwgPSBudWxsO1xuXG4gIHRyeSB7XG4gICAgLy8gSW5pdGlhbGl6ZSBzZXJ2aWNlc1xuICAgIHRyeSB7XG4gICAgICBnZW1pbmlTZXJ2aWNlID0gbmV3IEdlbWluaVNlcnZpY2UoKTtcbiAgICAgIG5hbm9CYW5hbmFTZXJ2aWNlID0gbmV3IE5hbm9CYW5hbmFTZXJ2aWNlKCk7XG4gICAgICBlbGV2ZW5MYWJzU2VydmljZSA9IG5ldyBFbGV2ZW5MYWJzU2VydmljZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBpbml0aWFsaXplIEFJIHNlcnZpY2VzOiAke2Vycm9yfWApO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBzdGF0dXMgdG8gcHJvY2Vzc2luZ1xuICAgIGF3YWl0IGRiLnVwZGF0ZVByZXNlbnRhdGlvblN0YXR1cyhwcmVzZW50YXRpb25JZCwgJ3Byb2Nlc3NpbmcnKTtcbiAgICBhd2FpdCBicm9hZGNhc3RQcm9ncmVzcyhwcmVzZW50YXRpb25JZCwgJ3Byb2Nlc3NpbmcnLCAxMCwgJ0luaXRpYWxpemluZyBBSSBzZXJ2aWNlcy4uLicpO1xuXG4gICAgLy8gU3RlcCAxOiBHZW5lcmF0ZSB0ZXh0IGNvbnRlbnQgd2l0aCBHZW1pbmlcbiAgICBhd2FpdCBkYi51cGRhdGVQcmVzZW50YXRpb25TdGF0dXMocHJlc2VudGF0aW9uSWQsICdnZW5lcmF0aW5nX3RleHQnKTtcbiAgICBhd2FpdCBicm9hZGNhc3RQcm9ncmVzcyhwcmVzZW50YXRpb25JZCwgJ2dlbmVyYXRpbmdfdGV4dCcsIDIwLCAnR2VuZXJhdGluZyBzbGlkZSBjb250ZW50Li4uJyk7XG5cbiAgICBjb25zdCBnZW1pbmlSZXNwb25zZSA9IGF3YWl0IGdlbWluaVNlcnZpY2UuZ2VuZXJhdGVQcmVzZW50YXRpb25Db250ZW50KHRpdGxlLCA0KTtcbiAgICBcbiAgICAvLyBDcmVhdGUgc2xpZGUgcmVjb3Jkc1xuICAgIGNvbnN0IHNsaWRlSWRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2VtaW5pUmVzcG9uc2Uuc2xpZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzbGlkZSA9IGdlbWluaVJlc3BvbnNlLnNsaWRlc1tpXTtcbiAgICAgIGNvbnN0IHNsaWRlSWQgPSBhd2FpdCBkYi5jcmVhdGVTbGlkZSh7XG4gICAgICAgIHByZXNlbnRhdGlvbklkLFxuICAgICAgICBzbGlkZU51bWJlcjogaSArIDEsXG4gICAgICAgIHRpdGxlOiBzbGlkZS50aXRsZSxcbiAgICAgICAgY29udGVudDogc2xpZGUuY29udGVudCxcbiAgICAgICAgaW1hZ2VQcm9tcHQ6IHNsaWRlLmltYWdlUHJvbXB0LFxuICAgICAgfSk7XG4gICAgICBzbGlkZUlkcy5wdXNoKHNsaWRlSWQpO1xuICAgIH1cblxuICAgIGF3YWl0IGJyb2FkY2FzdFByb2dyZXNzKHByZXNlbnRhdGlvbklkLCAnZ2VuZXJhdGluZ190ZXh0JywgNDAsIGBDcmVhdGVkICR7c2xpZGVJZHMubGVuZ3RofSBzbGlkZXNgKTtcblxuICAgIC8vIFN0ZXAgMjogR2VuZXJhdGUgaW1hZ2VzIHdpdGggTmFubyBCYW5hbmFcbiAgICBhd2FpdCBkYi51cGRhdGVQcmVzZW50YXRpb25TdGF0dXMocHJlc2VudGF0aW9uSWQsICdnZW5lcmF0aW5nX3Zpc3VhbHMnKTtcbiAgICBhd2FpdCBicm9hZGNhc3RQcm9ncmVzcyhwcmVzZW50YXRpb25JZCwgJ2dlbmVyYXRpbmdfdmlzdWFscycsIDUwLCAnR2VuZXJhdGluZyBzbGlkZSB2aXN1YWxzLi4uJyk7XG5cbiAgICBjb25zdCBpbWFnZVByb21pc2VzID0gZ2VtaW5pUmVzcG9uc2Uuc2xpZGVzLm1hcChhc3luYyAoc2xpZGUsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBzbGlkZUlkID0gc2xpZGVJZHNbaW5kZXhdO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBkYi51cGRhdGVTbGlkZVN0YXR1cyhzbGlkZUlkLCAnaW1hZ2UnLCAncHJvY2Vzc2luZycpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaW1hZ2VSZXNwb25zZSA9IGF3YWl0IG5hbm9CYW5hbmFTZXJ2aWNlIS5nZW5lcmF0ZUltYWdlKHNsaWRlLmltYWdlUHJvbXB0LCBpbmRleCArIDEpO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgZGIudXBkYXRlU2xpZGVNZWRpYShzbGlkZUlkLCBpbWFnZVJlc3BvbnNlLmltYWdlVXJsKTtcbiAgICAgICAgYXdhaXQgZGIudXBkYXRlU2xpZGVTdGF0dXMoc2xpZGVJZCwgJ2ltYWdlJywgJ2NvbXBsZXRlZCcpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgc2xpZGVJZCwgaW1hZ2VVcmw6IGltYWdlUmVzcG9uc2UuaW1hZ2VVcmwsIGNhbGxzVXNlZDogaW1hZ2VSZXNwb25zZS5jYWxsc1VzZWQgfTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBnZW5lcmF0ZSBpbWFnZSBmb3Igc2xpZGUgJHtpbmRleCArIDF9OmAsIGVycm9yKTtcbiAgICAgICAgYXdhaXQgZGIudXBkYXRlU2xpZGVTdGF0dXMoc2xpZGVJZCwgJ2ltYWdlJywgJ2ZhaWxlZCcpO1xuICAgICAgICByZXR1cm4geyBzbGlkZUlkLCBpbWFnZVVybDogbnVsbCwgY2FsbHNVc2VkOiAwIH07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBpbWFnZVJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoaW1hZ2VQcm9taXNlcyk7XG4gICAgY29uc3Qgc3VjY2Vzc2Z1bEltYWdlcyA9IGltYWdlUmVzdWx0c1xuICAgICAgLmZpbHRlcihyZXN1bHQgPT4gcmVzdWx0LnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcpXG4gICAgICAubWFwKHJlc3VsdCA9PiByZXN1bHQudmFsdWUpO1xuXG4gICAgYXdhaXQgYnJvYWRjYXN0UHJvZ3Jlc3MocHJlc2VudGF0aW9uSWQsICdnZW5lcmF0aW5nX3Zpc3VhbHMnLCA3MCwgXG4gICAgICBgR2VuZXJhdGVkICR7c3VjY2Vzc2Z1bEltYWdlcy5maWx0ZXIociA9PiByLmltYWdlVXJsKS5sZW5ndGh9IHZpc3VhbHNgKTtcblxuICAgIC8vIFN0ZXAgMzogR2VuZXJhdGUgYXVkaW8gbmFycmF0aW9uIHdpdGggRWxldmVuTGFic1xuICAgIGF3YWl0IGRiLnVwZGF0ZVByZXNlbnRhdGlvblN0YXR1cyhwcmVzZW50YXRpb25JZCwgJ2dlbmVyYXRpbmdfYXVkaW8nKTtcbiAgICBhd2FpdCBicm9hZGNhc3RQcm9ncmVzcyhwcmVzZW50YXRpb25JZCwgJ2dlbmVyYXRpbmdfYXVkaW8nLCA4MCwgJ0dlbmVyYXRpbmcgbmFycmF0aW9uLi4uJyk7XG5cbiAgICBjb25zdCBhdWRpb1Byb21pc2VzID0gZ2VtaW5pUmVzcG9uc2Uuc2xpZGVzLm1hcChhc3luYyAoc2xpZGUsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBzbGlkZUlkID0gc2xpZGVJZHNbaW5kZXhdO1xuICAgICAgY29uc3QgZnVsbFRleHQgPSBgJHtzbGlkZS50aXRsZX0uICR7c2xpZGUuY29udGVudH1gO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBkYi51cGRhdGVTbGlkZVN0YXR1cyhzbGlkZUlkLCAnYXVkaW8nLCAncHJvY2Vzc2luZycpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYXVkaW9SZXNwb25zZSA9IGF3YWl0IGVsZXZlbkxhYnNTZXJ2aWNlIS5nZW5lcmF0ZU5hcnJhdGlvbihmdWxsVGV4dCwgaW5kZXggKyAxKTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IGRiLnVwZGF0ZVNsaWRlTWVkaWEoc2xpZGVJZCwgdW5kZWZpbmVkLCBhdWRpb1Jlc3BvbnNlLmF1ZGlvVXJsKTtcbiAgICAgICAgYXdhaXQgZGIudXBkYXRlU2xpZGVTdGF0dXMoc2xpZGVJZCwgJ2F1ZGlvJywgJ2NvbXBsZXRlZCcpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgc2xpZGVJZCwgYXVkaW9Vcmw6IGF1ZGlvUmVzcG9uc2UuYXVkaW9VcmwsIGNoYXJhY3RlcnNVc2VkOiBhdWRpb1Jlc3BvbnNlLmNoYXJhY3RlcnNVc2VkIH07XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZ2VuZXJhdGUgYXVkaW8gZm9yIHNsaWRlICR7aW5kZXggKyAxfTpgLCBlcnJvcik7XG4gICAgICAgIGF3YWl0IGRiLnVwZGF0ZVNsaWRlU3RhdHVzKHNsaWRlSWQsICdhdWRpbycsICdmYWlsZWQnKTtcbiAgICAgICAgcmV0dXJuIHsgc2xpZGVJZCwgYXVkaW9Vcmw6IG51bGwsIGNoYXJhY3RlcnNVc2VkOiAwIH07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBhdWRpb1Jlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoYXVkaW9Qcm9taXNlcyk7XG4gICAgY29uc3Qgc3VjY2Vzc2Z1bEF1ZGlvID0gYXVkaW9SZXN1bHRzXG4gICAgICAuZmlsdGVyKHJlc3VsdCA9PiByZXN1bHQuc3RhdHVzID09PSAnZnVsZmlsbGVkJylcbiAgICAgIC5tYXAocmVzdWx0ID0+IHJlc3VsdC52YWx1ZSk7XG5cbiAgICBhd2FpdCBicm9hZGNhc3RQcm9ncmVzcyhwcmVzZW50YXRpb25JZCwgJ2dlbmVyYXRpbmdfYXVkaW8nLCA5NSwgXG4gICAgICBgR2VuZXJhdGVkICR7c3VjY2Vzc2Z1bEF1ZGlvLmZpbHRlcihyID0+IHIuYXVkaW9VcmwpLmxlbmd0aH0gbmFycmF0aW9uc2ApO1xuXG4gICAgLy8gRmluYWwgc3RlcDogVXBkYXRlIG1ldGFkYXRhIGFuZCBtYXJrIGFzIGNvbXBsZXRlZFxuICAgIGNvbnN0IGdlbmVyYXRpb25UaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICBjb25zdCB0b3RhbENhbGxzID0gc3VjY2Vzc2Z1bEltYWdlcy5yZWR1Y2UoKHN1bSwgaW1nKSA9PiBzdW0gKyBpbWcuY2FsbHNVc2VkLCAwKTtcbiAgICBjb25zdCB0b3RhbENoYXJhY3RlcnMgPSBzdWNjZXNzZnVsQXVkaW8ucmVkdWNlKChzdW0sIGF1ZGlvKSA9PiBzdW0gKyBhdWRpby5jaGFyYWN0ZXJzVXNlZCwgMCk7XG5cbiAgICBhd2FpdCBkYi51cGRhdGVQcmVzZW50YXRpb25NZXRhZGF0YShwcmVzZW50YXRpb25JZCwge1xuICAgICAgZ2VtaW5pVG9rZW5zVXNlZDogZ2VtaW5pUmVzcG9uc2UudG9rZW5zVXNlZCxcbiAgICAgIG5hbm9CYW5hbmFDYWxsc1VzZWQ6IHRvdGFsQ2FsbHMsXG4gICAgICBlbGV2ZW5MYWJzQ2hhcmFjdGVyc1VzZWQ6IHRvdGFsQ2hhcmFjdGVycyxcbiAgICB9LCBnZW5lcmF0aW9uVGltZSk7XG5cbiAgICBhd2FpdCBkYi51cGRhdGVQcmVzZW50YXRpb25TdGF0dXMocHJlc2VudGF0aW9uSWQsICdjb21wbGV0ZWQnKTtcbiAgICBhd2FpdCBicm9hZGNhc3RQcm9ncmVzcyhwcmVzZW50YXRpb25JZCwgJ2NvbXBsZXRlZCcsIDEwMCwgJ1ByZXNlbnRhdGlvbiBjb21wbGV0ZWQhJyk7XG5cbiAgICBjb25zb2xlLmxvZyhgU3VjY2Vzc2Z1bGx5IGdlbmVyYXRlZCBwcmVzZW50YXRpb24gJHtwcmVzZW50YXRpb25JZH0gaW4gJHtnZW5lcmF0aW9uVGltZX1tc2ApO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgQUkgZ2VuZXJhdGlvbiBwaXBlbGluZSBmYWlsZWQgZm9yICR7cHJlc2VudGF0aW9uSWR9OmAsIGVycm9yKTtcbiAgICBcbiAgICBjb25zdCBnZW5lcmF0aW9uVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgYXdhaXQgZGIudXBkYXRlUHJlc2VudGF0aW9uU3RhdHVzKHByZXNlbnRhdGlvbklkLCAnZmFpbGVkJywgXG4gICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJyk7XG4gICAgXG4gICAgYXdhaXQgYnJvYWRjYXN0UHJvZ3Jlc3MocHJlc2VudGF0aW9uSWQsICdmYWlsZWQnLCAxMDAsICdHZW5lcmF0aW9uIGZhaWxlZCcpO1xuICB9XG59XG5cbi8vIFJlYWwtdGltZSBwcm9ncmVzcyB1cGRhdGVzXG5hc3luYyBmdW5jdGlvbiBicm9hZGNhc3RQcm9ncmVzcyhcbiAgcHJlc2VudGF0aW9uSWQ6IHN0cmluZyxcbiAgc3RhdHVzOiBzdHJpbmcsXG4gIHByb2dyZXNzOiBudW1iZXIsXG4gIGN1cnJlbnRTdGVwOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNoYW5uZWwgPSBzdXBhYmFzZS5jaGFubmVsKGBwcmVzZW50YXRpb24tJHtwcmVzZW50YXRpb25JZH1gKTtcbiAgICBcbiAgICBhd2FpdCBjaGFubmVsLnNlbmQoe1xuICAgICAgdHlwZTogJ2Jyb2FkY2FzdCcsXG4gICAgICBldmVudDogJ3Byb2dyZXNzX3VwZGF0ZScsXG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIHByZXNlbnRhdGlvbklkLFxuICAgICAgICBzdGF0dXMsXG4gICAgICAgIHByb2dyZXNzLFxuICAgICAgICBjdXJyZW50U3RlcCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9LFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBicm9hZGNhc3QgcHJvZ3Jlc3M6JywgZXJyb3IpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlU3VjY2Vzc1Jlc3BvbnNlIiwiY3JlYXRlRXJyb3JSZXNwb25zZSIsInZhbGlkYXRlUHJlc2VudGF0aW9uVGl0bGUiLCJEYXRhYmFzZVNlcnZpY2UiLCJGYWxsYmFja01hbmFnZXIiLCJHZW1pbmlTZXJ2aWNlIiwiTmFub0JhbmFuYVNlcnZpY2UiLCJFbGV2ZW5MYWJzU2VydmljZSIsInN1cGFiYXNlIiwiUE9TVCIsInJlcXVlc3QiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwiY29uc29sZSIsImxvZyIsImJvZHkiLCJqc29uIiwidGl0bGUiLCJ1c2VySWQiLCJ2YWxpZGF0aW9uIiwiaXNWYWxpZCIsImVycm9yIiwic3RhdHVzIiwiZGIiLCJmYWxsYmFja01hbmFnZXIiLCJmYWxsYmFja0NoZWNrIiwic2hvdWxkVXNlRmFsbGJhY2siLCJ1c2VGYWxsYmFjayIsInJlYXNvbiIsImZhbGxiYWNrUHJlc2VudGF0aW9uIiwiZ2V0RmFsbGJhY2tQcmVzZW50YXRpb24iLCJpZCIsImlzRmFsbGJhY2siLCJmYWxsYmFja1JlYXNvbiIsInByZXNlbnRhdGlvbklkIiwiY3JlYXRlUHJlc2VudGF0aW9uIiwiZ2VuZXJhdGVQcmVzZW50YXRpb25Bc3luYyIsImNhdGNoIiwidXBkYXRlUHJlc2VudGF0aW9uU3RhdHVzIiwibWVzc2FnZSIsImRiRXJyb3IiLCJpbml0aWFsUHJlc2VudGF0aW9uIiwiZ2V0UHJlc2VudGF0aW9uIiwiRXJyb3IiLCJnZW1pbmlTZXJ2aWNlIiwibmFub0JhbmFuYVNlcnZpY2UiLCJlbGV2ZW5MYWJzU2VydmljZSIsImJyb2FkY2FzdFByb2dyZXNzIiwiZ2VtaW5pUmVzcG9uc2UiLCJnZW5lcmF0ZVByZXNlbnRhdGlvbkNvbnRlbnQiLCJzbGlkZUlkcyIsImkiLCJzbGlkZXMiLCJsZW5ndGgiLCJzbGlkZSIsInNsaWRlSWQiLCJjcmVhdGVTbGlkZSIsInNsaWRlTnVtYmVyIiwiY29udGVudCIsImltYWdlUHJvbXB0IiwicHVzaCIsImltYWdlUHJvbWlzZXMiLCJtYXAiLCJpbmRleCIsInVwZGF0ZVNsaWRlU3RhdHVzIiwiaW1hZ2VSZXNwb25zZSIsImdlbmVyYXRlSW1hZ2UiLCJ1cGRhdGVTbGlkZU1lZGlhIiwiaW1hZ2VVcmwiLCJjYWxsc1VzZWQiLCJpbWFnZVJlc3VsdHMiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsInN1Y2Nlc3NmdWxJbWFnZXMiLCJmaWx0ZXIiLCJyZXN1bHQiLCJ2YWx1ZSIsInIiLCJhdWRpb1Byb21pc2VzIiwiZnVsbFRleHQiLCJhdWRpb1Jlc3BvbnNlIiwiZ2VuZXJhdGVOYXJyYXRpb24iLCJ1bmRlZmluZWQiLCJhdWRpb1VybCIsImNoYXJhY3RlcnNVc2VkIiwiYXVkaW9SZXN1bHRzIiwic3VjY2Vzc2Z1bEF1ZGlvIiwiZ2VuZXJhdGlvblRpbWUiLCJ0b3RhbENhbGxzIiwicmVkdWNlIiwic3VtIiwiaW1nIiwidG90YWxDaGFyYWN0ZXJzIiwiYXVkaW8iLCJ1cGRhdGVQcmVzZW50YXRpb25NZXRhZGF0YSIsImdlbWluaVRva2Vuc1VzZWQiLCJ0b2tlbnNVc2VkIiwibmFub0JhbmFuYUNhbGxzVXNlZCIsImVsZXZlbkxhYnNDaGFyYWN0ZXJzVXNlZCIsInByb2dyZXNzIiwiY3VycmVudFN0ZXAiLCJjaGFubmVsIiwic2VuZCIsInR5cGUiLCJldmVudCIsInBheWxvYWQiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/presentations/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin),\n/* harmony export */   validateSupabaseConfig: () => (/* binding */ validateSupabaseConfig)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/../../node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://xevgjssynqyqegdccwvy.supabase.co\" || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhldmdqc3N5bnF5cWVnZGNjd3Z5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxMjc2OTgsImV4cCI6MjA3MjcwMzY5OH0.koL-GGUsFuD0CQrz_UAlsz24mmBs4zPzcduznUyIbtM\" || 0;\n// Function to check if we have valid env vars\nconst hasValidSupabaseConfig = ()=>{\n    return  true && !\"https://xevgjssynqyqegdccwvy.supabase.co\".includes(\"placeholder\");\n};\n// Create Supabase client with fallback for build time\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        persistSession: \"undefined\" !== \"undefined\",\n        autoRefreshToken: \"undefined\" !== \"undefined\"\n    },\n    realtime: {\n        params: {\n            eventsPerSecond: 10\n        }\n    }\n});\n// Admin client for server-side operations\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nconst supabaseAdmin = supabaseServiceKey ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n}) : null;\n// Helper to validate config at runtime\nconst validateSupabaseConfig = ()=>{\n    if (!hasValidSupabaseConfig() && \"undefined\" !== \"undefined\") {}\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBcUQ7QUFFckQsTUFBTUMsY0FBY0MsMENBQW9DLElBQUk7QUFDNUQsTUFBTUcsa0JBQWtCSCxrTkFBeUMsSUFBSTtBQUVyRSw4Q0FBOEM7QUFDOUMsTUFBTUsseUJBQXlCO0lBQzdCLE9BQU9MLEtBQ3lDLElBQ3pDLENBQUNBLDBDQUFvQyxDQUFDTSxRQUFRLENBQUM7QUFDeEQ7QUFFQSxzREFBc0Q7QUFDL0MsTUFBTUMsV0FBV1QsbUVBQVlBLENBQUNDLGFBQWFJLGlCQUFpQjtJQUNqRUssTUFBTTtRQUNKQyxnQkFBZ0IsZ0JBQWtCO1FBQ2xDQyxrQkFBa0IsZ0JBQWtCO0lBQ3RDO0lBQ0FDLFVBQVU7UUFDUkMsUUFBUTtZQUNOQyxpQkFBaUI7UUFDbkI7SUFDRjtBQUNGLEdBQUc7QUFFSCwwQ0FBMEM7QUFDMUMsTUFBTUMscUJBQXFCZCxRQUFRQyxHQUFHLENBQUNjLHlCQUF5QjtBQUV6RCxNQUFNQyxnQkFBZ0JGLHFCQUN6QmhCLG1FQUFZQSxDQUFDQyxhQUFhZSxvQkFBb0I7SUFDNUNOLE1BQU07UUFDSkUsa0JBQWtCO1FBQ2xCRCxnQkFBZ0I7SUFDbEI7QUFDRixLQUNBLEtBQUs7QUFFVCx1Q0FBdUM7QUFDaEMsTUFBTVEseUJBQXlCO0lBQ3BDLElBQUksQ0FBQ1osNEJBQTRCLGdCQUFrQixhQUFhLEVBRS9EO0FBQ0gsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL0BzcGVha2RlY2svd2ViLy4vc3JjL2xpYi9zdXBhYmFzZS50cz8wNmUxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICdodHRwczovL3BsYWNlaG9sZGVyLnN1cGFiYXNlLmNvJztcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIHx8ICdwbGFjZWhvbGRlci1rZXknO1xuXG4vLyBGdW5jdGlvbiB0byBjaGVjayBpZiB3ZSBoYXZlIHZhbGlkIGVudiB2YXJzXG5jb25zdCBoYXNWYWxpZFN1cGFiYXNlQ29uZmlnID0gKCkgPT4ge1xuICByZXR1cm4gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMICYmIFxuICAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgJiZcbiAgICAgICAgICFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwuaW5jbHVkZXMoJ3BsYWNlaG9sZGVyJyk7XG59O1xuXG4vLyBDcmVhdGUgU3VwYWJhc2UgY2xpZW50IHdpdGggZmFsbGJhY2sgZm9yIGJ1aWxkIHRpbWVcbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5LCB7XG4gIGF1dGg6IHtcbiAgICBwZXJzaXN0U2Vzc2lvbjogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcsXG4gICAgYXV0b1JlZnJlc2hUb2tlbjogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcsXG4gIH0sXG4gIHJlYWx0aW1lOiB7XG4gICAgcGFyYW1zOiB7XG4gICAgICBldmVudHNQZXJTZWNvbmQ6IDEwLFxuICAgIH0sXG4gIH0sXG59KTtcblxuLy8gQWRtaW4gY2xpZW50IGZvciBzZXJ2ZXItc2lkZSBvcGVyYXRpb25zXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xuXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IHN1cGFiYXNlU2VydmljZUtleVxuICA/IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlS2V5LCB7XG4gICAgICBhdXRoOiB7XG4gICAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxuICAgICAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2UsXG4gICAgICB9LFxuICAgIH0pXG4gIDogbnVsbDtcblxuLy8gSGVscGVyIHRvIHZhbGlkYXRlIGNvbmZpZyBhdCBydW50aW1lXG5leHBvcnQgY29uc3QgdmFsaWRhdGVTdXBhYmFzZUNvbmZpZyA9ICgpID0+IHtcbiAgaWYgKCFoYXNWYWxpZFN1cGFiYXNlQ29uZmlnKCkgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIG5vdCBwcm9wZXJseSBjb25maWd1cmVkJyk7XG4gIH1cbn07XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJoYXNWYWxpZFN1cGFiYXNlQ29uZmlnIiwiaW5jbHVkZXMiLCJzdXBhYmFzZSIsImF1dGgiLCJwZXJzaXN0U2Vzc2lvbiIsImF1dG9SZWZyZXNoVG9rZW4iLCJyZWFsdGltZSIsInBhcmFtcyIsImV2ZW50c1BlclNlY29uZCIsInN1cGFiYXNlU2VydmljZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJzdXBhYmFzZUFkbWluIiwidmFsaWRhdGVTdXBhYmFzZUNvbmZpZyIsImNvbnNvbGUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/ai-services/eleven-labs.ts":
/*!*************************************************!*\
  !*** ./src/services/ai-services/eleven-labs.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ElevenLabsService: () => (/* binding */ ElevenLabsService)\n/* harmony export */ });\n/* harmony import */ var _speakdeck_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @speakdeck/shared */ \"(rsc)/../../packages/shared/src/index.ts\");\n\nclass ElevenLabsService {\n    constructor(apiKey){\n        this.baseUrl = \"https://api.elevenlabs.io/v1\";\n        this.defaultVoiceId = \"pNInz6obpgDQGcFmaJgB\" // Default voice ID (Adam)\n        ;\n        this.apiKey = apiKey || process.env.ELEVENLABS_API_KEY || \"\";\n        if (!this.apiKey) {\n            throw new Error(\"ElevenLabs API key is required\");\n        }\n    }\n    async generateNarration(text, slideNumber, voiceId) {\n        const cleanText = this.prepareTextForSpeech(text, slideNumber);\n        const selectedVoiceId = voiceId || this.defaultVoiceId;\n        return (0,_speakdeck_shared__WEBPACK_IMPORTED_MODULE_0__.retryWithBackoff)(async ()=>{\n            const response = await fetch(`${this.baseUrl}/text-to-speech/${selectedVoiceId}`, {\n                method: \"POST\",\n                headers: {\n                    \"Accept\": \"audio/mpeg\",\n                    \"Content-Type\": \"application/json\",\n                    \"xi-api-key\": this.apiKey\n                },\n                body: JSON.stringify({\n                    text: cleanText,\n                    model_id: \"eleven_monolingual_v1\",\n                    voice_settings: {\n                        stability: 0.5,\n                        similarity_boost: 0.75,\n                        style: 0.0,\n                        use_speaker_boost: true\n                    }\n                })\n            });\n            if (!response.ok) {\n                const error = await response.text();\n                console.warn(`ElevenLabs API error: ${response.status} - ${error}`);\n                // For suspended accounts or rate limits, return silent audio instead of failing\n                if (response.status === 401 || response.status === 429) {\n                    console.log(\"ElevenLabs account suspended or rate limited, returning silent audio\");\n                    return {\n                        audioUrl: this.generateSilentAudio(),\n                        charactersUsed: 0\n                    };\n                }\n                throw new Error(`ElevenLabs API error: ${response.status} - ${error}`);\n            }\n            // Get the audio blob\n            const audioBlob = await response.blob();\n            // For MVP, we'll create a data URL\n            // In production, you'd upload this to Supabase Storage\n            const audioUrl = await this.blobToDataUrl(audioBlob);\n            return {\n                audioUrl,\n                charactersUsed: cleanText.length\n            };\n        });\n    }\n    prepareTextForSpeech(text, slideNumber) {\n        // Clean and prepare text for better speech synthesis\n        let cleanText = text.trim();\n        // Add slide context for better flow\n        if (slideNumber === 1) {\n            cleanText = `Welcome to our presentation. ${cleanText}`;\n        }\n        // Replace problematic characters and formatting\n        cleanText = cleanText.replace(/[\"\"]/g, '\"') // Normalize quotes\n        .replace(/['']/g, \"'\") // Normalize apostrophes\n        .replace(/\\*\\*(.*?)\\*\\*/g, \"$1\") // Remove bold markdown\n        .replace(/\\*(.*?)\\*/g, \"$1\") // Remove italic markdown\n        .replace(/#{1,6}\\s/g, \"\") // Remove headers\n        .replace(/\\n+/g, \". \") // Replace line breaks with periods\n        .replace(/\\s+/g, \" \") // Normalize whitespace\n        .replace(/\\.\\./g, \".\") // Fix double periods\n        .replace(/([.!?])\\s*([.!?])/g, \"$1 \") // Fix multiple punctuation\n        .trim();\n        // Ensure text ends with proper punctuation\n        if (!/[.!?]$/.test(cleanText)) {\n            cleanText += \".\";\n        }\n        // Add natural pauses\n        cleanText = cleanText.replace(/[.!?]/g, \"$& \");\n        return cleanText;\n    }\n    async blobToDataUrl(blob) {\n        try {\n            // Convert blob to buffer in Node.js environment\n            const arrayBuffer = await blob.arrayBuffer();\n            const buffer = Buffer.from(arrayBuffer);\n            const base64 = buffer.toString(\"base64\");\n            return `data:audio/mpeg;base64,${base64}`;\n        } catch (error) {\n            console.error(\"Failed to convert blob to data URL:\", error);\n            // Return a placeholder or empty audio URL\n            return this.generateSilentAudio();\n        }\n    }\n    async generateMultipleNarrations(texts, voiceId) {\n        const results = await Promise.allSettled(texts.map((text, index)=>this.generateNarration(text, index + 1, voiceId)));\n        return results.map((result, index)=>{\n            if (result.status === \"fulfilled\") {\n                return result.value;\n            } else {\n                console.error(`Failed to generate narration for slide ${index + 1}:`, result.reason);\n                return {\n                    audioUrl: this.generateSilentAudio(),\n                    charactersUsed: 0\n                };\n            }\n        });\n    }\n    generateSilentAudio() {\n        // Generate a longer silent audio data URL as fallback\n        // This is a minimal WAV file with silence - longer duration prevents auto-advance\n        const sampleRate = 22050;\n        const duration = 30; // 30 seconds to give users time to read\n        const numSamples = sampleRate * duration;\n        const arrayBuffer = new ArrayBuffer(44 + numSamples * 2);\n        const view = new DataView(arrayBuffer);\n        // WAV header\n        const writeString = (offset, string)=>{\n            for(let i = 0; i < string.length; i++){\n                view.setUint8(offset + i, string.charCodeAt(i));\n            }\n        };\n        writeString(0, \"RIFF\");\n        view.setUint32(4, 36 + numSamples * 2, true);\n        writeString(8, \"WAVE\");\n        writeString(12, \"fmt \");\n        view.setUint32(16, 16, true);\n        view.setUint16(20, 1, true);\n        view.setUint16(22, 1, true);\n        view.setUint32(24, sampleRate, true);\n        view.setUint32(28, sampleRate * 2, true);\n        view.setUint16(32, 2, true);\n        view.setUint16(34, 16, true);\n        writeString(36, \"data\");\n        view.setUint32(40, numSamples * 2, true);\n        // Fill with silence (zeros)\n        for(let i = 0; i < numSamples; i++){\n            view.setInt16(44 + i * 2, 0, true);\n        }\n        // Convert to base64 data URL for Node.js environment\n        const buffer = Buffer.from(arrayBuffer);\n        const base64 = buffer.toString(\"base64\");\n        return `data:audio/wav;base64,${base64}`;\n    }\n    async getAvailableVoices() {\n        try {\n            const response = await fetch(`${this.baseUrl}/voices`, {\n                headers: {\n                    \"xi-api-key\": this.apiKey\n                }\n            });\n            if (!response.ok) {\n                throw new Error(`Failed to fetch voices: ${response.status}`);\n            }\n            const data = await response.json();\n            return data.voices?.map((voice)=>({\n                    id: voice.voice_id,\n                    name: voice.name,\n                    category: voice.category || \"general\"\n                })) || [];\n        } catch (error) {\n            console.error(\"Failed to fetch available voices:\", error);\n            // Return default voices as fallback\n            return [\n                {\n                    id: this.defaultVoiceId,\n                    name: \"Adam\",\n                    category: \"premade\"\n                },\n                {\n                    id: \"21m00Tcm4TlvDq8ikWAM\",\n                    name: \"Rachel\",\n                    category: \"premade\"\n                },\n                {\n                    id: \"AZnzlk1XvdvUeBnXmlld\",\n                    name: \"Domi\",\n                    category: \"premade\"\n                }\n            ];\n        }\n    }\n    async checkQuota() {\n        try {\n            const response = await fetch(`${this.baseUrl}/user`, {\n                headers: {\n                    \"xi-api-key\": this.apiKey\n                }\n            });\n            if (!response.ok) {\n                throw new Error(`Failed to fetch user info: ${response.status}`);\n            }\n            const data = await response.json();\n            return {\n                remaining: data.subscription?.character_limit - data.subscription?.character_count || 0,\n                total: data.subscription?.character_limit || 10000\n            };\n        } catch (error) {\n            console.error(\"Failed to check ElevenLabs quota:\", error);\n            // Return default quota as fallback\n            const monthlyQuota = parseInt(process.env.ELEVENLABS_MONTHLY_QUOTA || \"10000\");\n            return {\n                remaining: monthlyQuota,\n                total: monthlyQuota\n            };\n        }\n    }\n    async uploadAudioToStorage(audioBlob, fileName) {\n        // This would upload the audio to Supabase Storage\n        // For now, we'll return a data URL\n        return this.blobToDataUrl(audioBlob);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvYWktc2VydmljZXMvZWxldmVuLWxhYnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDcUQ7QUFFOUMsTUFBTUM7SUFLWEMsWUFBWUMsTUFBZSxDQUFFO2FBSHJCQyxVQUFVO2FBQ1ZDLGlCQUFpQix1QkFBd0IsMEJBQTBCOztRQUd6RSxJQUFJLENBQUNGLE1BQU0sR0FBR0EsVUFBVUcsUUFBUUMsR0FBRyxDQUFDQyxrQkFBa0IsSUFBSTtRQUUxRCxJQUFJLENBQUMsSUFBSSxDQUFDTCxNQUFNLEVBQUU7WUFDaEIsTUFBTSxJQUFJTSxNQUFNO1FBQ2xCO0lBQ0Y7SUFFQSxNQUFNQyxrQkFDSkMsSUFBWSxFQUNaQyxXQUFtQixFQUNuQkMsT0FBZ0IsRUFDYTtRQUM3QixNQUFNQyxZQUFZLElBQUksQ0FBQ0Msb0JBQW9CLENBQUNKLE1BQU1DO1FBQ2xELE1BQU1JLGtCQUFrQkgsV0FBVyxJQUFJLENBQUNSLGNBQWM7UUFFdEQsT0FBT0wsbUVBQWdCQSxDQUFDO1lBQ3RCLE1BQU1pQixXQUFXLE1BQU1DLE1BQ3JCLENBQUMsRUFBRSxJQUFJLENBQUNkLE9BQU8sQ0FBQyxnQkFBZ0IsRUFBRVksZ0JBQWdCLENBQUMsRUFDbkQ7Z0JBQ0VHLFFBQVE7Z0JBQ1JDLFNBQVM7b0JBQ1AsVUFBVTtvQkFDVixnQkFBZ0I7b0JBQ2hCLGNBQWMsSUFBSSxDQUFDakIsTUFBTTtnQkFDM0I7Z0JBQ0FrQixNQUFNQyxLQUFLQyxTQUFTLENBQUM7b0JBQ25CWixNQUFNRztvQkFDTlUsVUFBVTtvQkFDVkMsZ0JBQWdCO3dCQUNkQyxXQUFXO3dCQUNYQyxrQkFBa0I7d0JBQ2xCQyxPQUFPO3dCQUNQQyxtQkFBbUI7b0JBQ3JCO2dCQUNGO1lBQ0Y7WUFHRixJQUFJLENBQUNaLFNBQVNhLEVBQUUsRUFBRTtnQkFDaEIsTUFBTUMsUUFBUSxNQUFNZCxTQUFTTixJQUFJO2dCQUNqQ3FCLFFBQVFDLElBQUksQ0FBQyxDQUFDLHNCQUFzQixFQUFFaEIsU0FBU2lC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Q0FBQyxFQUFFO2dCQUNuRGdCLFNBQVM7b0JBQ1AsY0FBYyxJQUFJLENBQUNqQixNQUFNO2dCQUMzQjtZQUNGO1lBRUEsSUFBSSxDQUFDYyxTQUFTYSxFQUFFLEVBQUU7Z0JBQ2hCLE1BQU0sSUFBSXJCLE1BQU0sQ0FBQywyQkFBMkIsRUFBRVEsU0FBU2lCLE1BQU0sQ0FBQyxDQUFDO1lBQ2pFO1lBRUEsTUFBTTRDLE9BQU8sTUFBTTdELFNBQVM4RCxJQUFJO1lBRWhDLE9BQU87Z0JBQ0xRLFdBQVdULEtBQUtVLFlBQVksRUFBRUMsa0JBQWtCWCxLQUFLVSxZQUFZLEVBQUVFLG1CQUFtQjtnQkFDdEZDLE9BQU9iLEtBQUtVLFlBQVksRUFBRUMsbUJBQW1CO1lBQy9DO1FBQ0YsRUFBRSxPQUFPMUQsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMscUNBQXFDQTtZQUVuRCxtQ0FBbUM7WUFDbkMsTUFBTTZELGVBQWVDLFNBQVN2RixRQUFRQyxHQUFHLENBQUN1Rix3QkFBd0IsSUFBSTtZQUN0RSxPQUFPO2dCQUFFUCxXQUFXSztnQkFBY0QsT0FBT0M7WUFBYTtRQUN4RDtJQUNGO0lBRUEsTUFBTUcscUJBQXFCeEQsU0FBZSxFQUFFeUQsUUFBZ0IsRUFBbUI7UUFDN0Usa0RBQWtEO1FBQ2xELG1DQUFtQztRQUNuQyxPQUFPLElBQUksQ0FBQ3ZELGFBQWEsQ0FBQ0Y7SUFDNUI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL0BzcGVha2RlY2svd2ViLy4vc3JjL3NlcnZpY2VzL2FpLXNlcnZpY2VzL2VsZXZlbi1sYWJzLnRzPzM2OTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRWxldmVuTGFic1Jlc3BvbnNlIH0gZnJvbSAnQHNwZWFrZGVjay9zaGFyZWQnO1xuaW1wb3J0IHsgcmV0cnlXaXRoQmFja29mZiB9IGZyb20gJ0BzcGVha2RlY2svc2hhcmVkJztcblxuZXhwb3J0IGNsYXNzIEVsZXZlbkxhYnNTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBhcGlLZXk6IHN0cmluZztcbiAgcHJpdmF0ZSBiYXNlVXJsID0gJ2h0dHBzOi8vYXBpLmVsZXZlbmxhYnMuaW8vdjEnO1xuICBwcml2YXRlIGRlZmF1bHRWb2ljZUlkID0gJ3BOSW56Nm9icGdEUUdjRm1hSmdCJzsgLy8gRGVmYXVsdCB2b2ljZSBJRCAoQWRhbSlcblxuICBjb25zdHJ1Y3RvcihhcGlLZXk/OiBzdHJpbmcpIHtcbiAgICB0aGlzLmFwaUtleSA9IGFwaUtleSB8fCBwcm9jZXNzLmVudi5FTEVWRU5MQUJTX0FQSV9LRVkgfHwgJyc7XG4gICAgXG4gICAgaWYgKCF0aGlzLmFwaUtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbGV2ZW5MYWJzIEFQSSBrZXkgaXMgcmVxdWlyZWQnKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZW5lcmF0ZU5hcnJhdGlvbihcbiAgICB0ZXh0OiBzdHJpbmcsIFxuICAgIHNsaWRlTnVtYmVyOiBudW1iZXIsIFxuICAgIHZvaWNlSWQ/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxFbGV2ZW5MYWJzUmVzcG9uc2U+IHtcbiAgICBjb25zdCBjbGVhblRleHQgPSB0aGlzLnByZXBhcmVUZXh0Rm9yU3BlZWNoKHRleHQsIHNsaWRlTnVtYmVyKTtcbiAgICBjb25zdCBzZWxlY3RlZFZvaWNlSWQgPSB2b2ljZUlkIHx8IHRoaXMuZGVmYXVsdFZvaWNlSWQ7XG4gICAgXG4gICAgcmV0dXJuIHJldHJ5V2l0aEJhY2tvZmYoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7dGhpcy5iYXNlVXJsfS90ZXh0LXRvLXNwZWVjaC8ke3NlbGVjdGVkVm9pY2VJZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0FjY2VwdCc6ICdhdWRpby9tcGVnJyxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAneGktYXBpLWtleSc6IHRoaXMuYXBpS2V5LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgdGV4dDogY2xlYW5UZXh0LFxuICAgICAgICAgICAgbW9kZWxfaWQ6ICdlbGV2ZW5fbW9ub2xpbmd1YWxfdjEnLFxuICAgICAgICAgICAgdm9pY2Vfc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgc3RhYmlsaXR5OiAwLjUsXG4gICAgICAgICAgICAgIHNpbWlsYXJpdHlfYm9vc3Q6IDAuNzUsXG4gICAgICAgICAgICAgIHN0eWxlOiAwLjAsXG4gICAgICAgICAgICAgIHVzZV9zcGVha2VyX2Jvb3N0OiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgY29uc29sZS53YXJuKGBFbGV2ZW5MYWJzIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvcn1gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZvciBzdXNwZW5kZWQgYWNjb3VudHMgb3IgcmF0ZSBsaW1pdHMsIHJldHVybiBzaWxlbnQgYXVkaW8gaW5zdGVhZCBvZiBmYWlsaW5nXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSB8fCByZXNwb25zZS5zdGF0dXMgPT09IDQyOSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdFbGV2ZW5MYWJzIGFjY291bnQgc3VzcGVuZGVkIG9yIHJhdGUgbGltaXRlZCwgcmV0dXJuaW5nIHNpbGVudCBhdWRpbycpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdWRpb1VybDogdGhpcy5nZW5lcmF0ZVNpbGVudEF1ZGlvKCksXG4gICAgICAgICAgICBjaGFyYWN0ZXJzVXNlZDogMCxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVsZXZlbkxhYnMgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yfWApO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIGF1ZGlvIGJsb2JcbiAgICAgIGNvbnN0IGF1ZGlvQmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgIFxuICAgICAgLy8gRm9yIE1WUCwgd2UnbGwgY3JlYXRlIGEgZGF0YSBVUkxcbiAgICAgIC8vIEluIHByb2R1Y3Rpb24sIHlvdSdkIHVwbG9hZCB0aGlzIHRvIFN1cGFiYXNlIFN0b3JhZ2VcbiAgICAgIGNvbnN0IGF1ZGlvVXJsID0gYXdhaXQgdGhpcy5ibG9iVG9EYXRhVXJsKGF1ZGlvQmxvYik7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGF1ZGlvVXJsLFxuICAgICAgICBjaGFyYWN0ZXJzVXNlZDogY2xlYW5UZXh0Lmxlbmd0aCxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHByZXBhcmVUZXh0Rm9yU3BlZWNoKHRleHQ6IHN0cmluZywgc2xpZGVOdW1iZXI6IG51bWJlcik6IHN0cmluZyB7XG4gICAgLy8gQ2xlYW4gYW5kIHByZXBhcmUgdGV4dCBmb3IgYmV0dGVyIHNwZWVjaCBzeW50aGVzaXNcbiAgICBsZXQgY2xlYW5UZXh0ID0gdGV4dC50cmltKCk7XG4gICAgXG4gICAgLy8gQWRkIHNsaWRlIGNvbnRleHQgZm9yIGJldHRlciBmbG93XG4gICAgaWYgKHNsaWRlTnVtYmVyID09PSAxKSB7XG4gICAgICBjbGVhblRleHQgPSBgV2VsY29tZSB0byBvdXIgcHJlc2VudGF0aW9uLiAke2NsZWFuVGV4dH1gO1xuICAgIH1cbiAgICBcbiAgICAvLyBSZXBsYWNlIHByb2JsZW1hdGljIGNoYXJhY3RlcnMgYW5kIGZvcm1hdHRpbmdcbiAgICBjbGVhblRleHQgPSBjbGVhblRleHRcbiAgICAgIC5yZXBsYWNlKC9bXCJcIl0vZywgJ1wiJykgICAgLy8gTm9ybWFsaXplIHF1b3Rlc1xuICAgICAgLnJlcGxhY2UoL1snJ10vZywgXCInXCIpICAgIC8vIE5vcm1hbGl6ZSBhcG9zdHJvcGhlc1xuICAgICAgLnJlcGxhY2UoL1xcKlxcKiguKj8pXFwqXFwqL2csICckMScpIC8vIFJlbW92ZSBib2xkIG1hcmtkb3duXG4gICAgICAucmVwbGFjZSgvXFwqKC4qPylcXCovZywgJyQxJykgICAgIC8vIFJlbW92ZSBpdGFsaWMgbWFya2Rvd25cbiAgICAgIC5yZXBsYWNlKC8jezEsNn1cXHMvZywgJycpICAgICAgICAvLyBSZW1vdmUgaGVhZGVyc1xuICAgICAgLnJlcGxhY2UoL1xcbisvZywgJy4gJykgICAgICAgICAgIC8vIFJlcGxhY2UgbGluZSBicmVha3Mgd2l0aCBwZXJpb2RzXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpICAgICAgICAgICAgLy8gTm9ybWFsaXplIHdoaXRlc3BhY2VcbiAgICAgIC5yZXBsYWNlKC9cXC5cXC4vZywgJy4nKSAgICAgICAgICAgLy8gRml4IGRvdWJsZSBwZXJpb2RzXG4gICAgICAucmVwbGFjZSgvKFsuIT9dKVxccyooWy4hP10pL2csICckMSAnKSAvLyBGaXggbXVsdGlwbGUgcHVuY3R1YXRpb25cbiAgICAgIC50cmltKCk7XG5cbiAgICAvLyBFbnN1cmUgdGV4dCBlbmRzIHdpdGggcHJvcGVyIHB1bmN0dWF0aW9uXG4gICAgaWYgKCEvWy4hP10kLy50ZXN0KGNsZWFuVGV4dCkpIHtcbiAgICAgIGNsZWFuVGV4dCArPSAnLic7XG4gICAgfVxuXG4gICAgLy8gQWRkIG5hdHVyYWwgcGF1c2VzXG4gICAgY2xlYW5UZXh0ID0gY2xlYW5UZXh0LnJlcGxhY2UoL1suIT9dL2csICckJiAnKTtcblxuICAgIHJldHVybiBjbGVhblRleHQ7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGJsb2JUb0RhdGFVcmwoYmxvYjogQmxvYik6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENvbnZlcnQgYmxvYiB0byBidWZmZXIgaW4gTm9kZS5qcyBlbnZpcm9ubWVudFxuICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7XG4gICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlcik7XG4gICAgICBjb25zdCBiYXNlNjQgPSBidWZmZXIudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgICAgcmV0dXJuIGBkYXRhOmF1ZGlvL21wZWc7YmFzZTY0LCR7YmFzZTY0fWA7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjb252ZXJ0IGJsb2IgdG8gZGF0YSBVUkw6JywgZXJyb3IpO1xuICAgICAgLy8gUmV0dXJuIGEgcGxhY2Vob2xkZXIgb3IgZW1wdHkgYXVkaW8gVVJMXG4gICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZVNpbGVudEF1ZGlvKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2VuZXJhdGVNdWx0aXBsZU5hcnJhdGlvbnMoXG4gICAgdGV4dHM6IHN0cmluZ1tdLCBcbiAgICB2b2ljZUlkPzogc3RyaW5nXG4gICk6IFByb21pc2U8RWxldmVuTGFic1Jlc3BvbnNlW10+IHtcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKFxuICAgICAgdGV4dHMubWFwKCh0ZXh0LCBpbmRleCkgPT4gXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVOYXJyYXRpb24odGV4dCwgaW5kZXggKyAxLCB2b2ljZUlkKVxuICAgICAgKVxuICAgICk7XG5cbiAgICByZXR1cm4gcmVzdWx0cy5tYXAoKHJlc3VsdCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAnZnVsZmlsbGVkJykge1xuICAgICAgICByZXR1cm4gcmVzdWx0LnZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGdlbmVyYXRlIG5hcnJhdGlvbiBmb3Igc2xpZGUgJHtpbmRleCArIDF9OmAsIHJlc3VsdC5yZWFzb24pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGF1ZGlvVXJsOiB0aGlzLmdlbmVyYXRlU2lsZW50QXVkaW8oKSxcbiAgICAgICAgICBjaGFyYWN0ZXJzVXNlZDogMCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVTaWxlbnRBdWRpbygpOiBzdHJpbmcge1xuICAgIC8vIEdlbmVyYXRlIGEgbG9uZ2VyIHNpbGVudCBhdWRpbyBkYXRhIFVSTCBhcyBmYWxsYmFja1xuICAgIC8vIFRoaXMgaXMgYSBtaW5pbWFsIFdBViBmaWxlIHdpdGggc2lsZW5jZSAtIGxvbmdlciBkdXJhdGlvbiBwcmV2ZW50cyBhdXRvLWFkdmFuY2VcbiAgICBjb25zdCBzYW1wbGVSYXRlID0gMjIwNTA7XG4gICAgY29uc3QgZHVyYXRpb24gPSAzMDsgLy8gMzAgc2Vjb25kcyB0byBnaXZlIHVzZXJzIHRpbWUgdG8gcmVhZFxuICAgIGNvbnN0IG51bVNhbXBsZXMgPSBzYW1wbGVSYXRlICogZHVyYXRpb247XG4gICAgXG4gICAgY29uc3QgYXJyYXlCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNDQgKyBudW1TYW1wbGVzICogMik7XG4gICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlcik7XG4gICAgXG4gICAgLy8gV0FWIGhlYWRlclxuICAgIGNvbnN0IHdyaXRlU3RyaW5nID0gKG9mZnNldDogbnVtYmVyLCBzdHJpbmc6IHN0cmluZykgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmlldy5zZXRVaW50OChvZmZzZXQgKyBpLCBzdHJpbmcuY2hhckNvZGVBdChpKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICB3cml0ZVN0cmluZygwLCAnUklGRicpO1xuICAgIHZpZXcuc2V0VWludDMyKDQsIDM2ICsgbnVtU2FtcGxlcyAqIDIsIHRydWUpO1xuICAgIHdyaXRlU3RyaW5nKDgsICdXQVZFJyk7XG4gICAgd3JpdGVTdHJpbmcoMTIsICdmbXQgJyk7XG4gICAgdmlldy5zZXRVaW50MzIoMTYsIDE2LCB0cnVlKTtcbiAgICB2aWV3LnNldFVpbnQxNigyMCwgMSwgdHJ1ZSk7XG4gICAgdmlldy5zZXRVaW50MTYoMjIsIDEsIHRydWUpO1xuICAgIHZpZXcuc2V0VWludDMyKDI0LCBzYW1wbGVSYXRlLCB0cnVlKTtcbiAgICB2aWV3LnNldFVpbnQzMigyOCwgc2FtcGxlUmF0ZSAqIDIsIHRydWUpO1xuICAgIHZpZXcuc2V0VWludDE2KDMyLCAyLCB0cnVlKTtcbiAgICB2aWV3LnNldFVpbnQxNigzNCwgMTYsIHRydWUpO1xuICAgIHdyaXRlU3RyaW5nKDM2LCAnZGF0YScpO1xuICAgIHZpZXcuc2V0VWludDMyKDQwLCBudW1TYW1wbGVzICogMiwgdHJ1ZSk7XG4gICAgXG4gICAgLy8gRmlsbCB3aXRoIHNpbGVuY2UgKHplcm9zKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtU2FtcGxlczsgaSsrKSB7XG4gICAgICB2aWV3LnNldEludDE2KDQ0ICsgaSAqIDIsIDAsIHRydWUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDb252ZXJ0IHRvIGJhc2U2NCBkYXRhIFVSTCBmb3IgTm9kZS5qcyBlbnZpcm9ubWVudFxuICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyKTtcbiAgICBjb25zdCBiYXNlNjQgPSBidWZmZXIudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgIHJldHVybiBgZGF0YTphdWRpby93YXY7YmFzZTY0LCR7YmFzZTY0fWA7XG4gIH1cblxuICBhc3luYyBnZXRBdmFpbGFibGVWb2ljZXMoKTogUHJvbWlzZTxBcnJheTx7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZzsgY2F0ZWdvcnk6IHN0cmluZyB9Pj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0vdm9pY2VzYCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ3hpLWFwaS1rZXknOiB0aGlzLmFwaUtleSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHZvaWNlczogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBcbiAgICAgIHJldHVybiBkYXRhLnZvaWNlcz8ubWFwKCh2b2ljZTogYW55KSA9PiAoe1xuICAgICAgICBpZDogdm9pY2Uudm9pY2VfaWQsXG4gICAgICAgIG5hbWU6IHZvaWNlLm5hbWUsXG4gICAgICAgIGNhdGVnb3J5OiB2b2ljZS5jYXRlZ29yeSB8fCAnZ2VuZXJhbCcsXG4gICAgICB9KSkgfHwgW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBhdmFpbGFibGUgdm9pY2VzOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gUmV0dXJuIGRlZmF1bHQgdm9pY2VzIGFzIGZhbGxiYWNrXG4gICAgICByZXR1cm4gW1xuICAgICAgICB7IGlkOiB0aGlzLmRlZmF1bHRWb2ljZUlkLCBuYW1lOiAnQWRhbScsIGNhdGVnb3J5OiAncHJlbWFkZScgfSxcbiAgICAgICAgeyBpZDogJzIxbTAwVGNtNFRsdkRxOGlrV0FNJywgbmFtZTogJ1JhY2hlbCcsIGNhdGVnb3J5OiAncHJlbWFkZScgfSxcbiAgICAgICAgeyBpZDogJ0FabnpsazFYdmR2VWVCblhtbGxkJywgbmFtZTogJ0RvbWknLCBjYXRlZ29yeTogJ3ByZW1hZGUnIH0sXG4gICAgICBdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNoZWNrUXVvdGEoKTogUHJvbWlzZTx7IHJlbWFpbmluZzogbnVtYmVyOyB0b3RhbDogbnVtYmVyIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJgLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAneGktYXBpLWtleSc6IHRoaXMuYXBpS2V5LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggdXNlciBpbmZvOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVtYWluaW5nOiBkYXRhLnN1YnNjcmlwdGlvbj8uY2hhcmFjdGVyX2xpbWl0IC0gZGF0YS5zdWJzY3JpcHRpb24/LmNoYXJhY3Rlcl9jb3VudCB8fCAwLFxuICAgICAgICB0b3RhbDogZGF0YS5zdWJzY3JpcHRpb24/LmNoYXJhY3Rlcl9saW1pdCB8fCAxMDAwMCxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjaGVjayBFbGV2ZW5MYWJzIHF1b3RhOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gUmV0dXJuIGRlZmF1bHQgcXVvdGEgYXMgZmFsbGJhY2tcbiAgICAgIGNvbnN0IG1vbnRobHlRdW90YSA9IHBhcnNlSW50KHByb2Nlc3MuZW52LkVMRVZFTkxBQlNfTU9OVEhMWV9RVU9UQSB8fCAnMTAwMDAnKTtcbiAgICAgIHJldHVybiB7IHJlbWFpbmluZzogbW9udGhseVF1b3RhLCB0b3RhbDogbW9udGhseVF1b3RhIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBsb2FkQXVkaW9Ub1N0b3JhZ2UoYXVkaW9CbG9iOiBCbG9iLCBmaWxlTmFtZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAvLyBUaGlzIHdvdWxkIHVwbG9hZCB0aGUgYXVkaW8gdG8gU3VwYWJhc2UgU3RvcmFnZVxuICAgIC8vIEZvciBub3csIHdlJ2xsIHJldHVybiBhIGRhdGEgVVJMXG4gICAgcmV0dXJuIHRoaXMuYmxvYlRvRGF0YVVybChhdWRpb0Jsb2IpO1xuICB9XG59XG4iXSwibmFtZXMiOlsicmV0cnlXaXRoQmFja29mZiIsIkVsZXZlbkxhYnNTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJhcGlLZXkiLCJiYXNlVXJsIiwiZGVmYXVsdFZvaWNlSWQiLCJwcm9jZXNzIiwiZW52IiwiRUxFVkVOTEFCU19BUElfS0VZIiwiRXJyb3IiLCJnZW5lcmF0ZU5hcnJhdGlvbiIsInRleHQiLCJzbGlkZU51bWJlciIsInZvaWNlSWQiLCJjbGVhblRleHQiLCJwcmVwYXJlVGV4dEZvclNwZWVjaCIsInNlbGVjdGVkVm9pY2VJZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2RlbF9pZCIsInZvaWNlX3NldHRpbmdzIiwic3RhYmlsaXR5Iiwic2ltaWxhcml0eV9ib29zdCIsInN0eWxlIiwidXNlX3NwZWFrZXJfYm9vc3QiLCJvayIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJzdGF0dXMiLCJsb2ciLCJhdWRpb1VybCIsImdlbmVyYXRlU2lsZW50QXVkaW8iLCJjaGFyYWN0ZXJzVXNlZCIsImF1ZGlvQmxvYiIsImJsb2IiLCJibG9iVG9EYXRhVXJsIiwibGVuZ3RoIiwidHJpbSIsInJlcGxhY2UiLCJ0ZXN0IiwiYXJyYXlCdWZmZXIiLCJidWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwiYmFzZTY0IiwidG9TdHJpbmciLCJnZW5lcmF0ZU11bHRpcGxlTmFycmF0aW9ucyIsInRleHRzIiwicmVzdWx0cyIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwibWFwIiwiaW5kZXgiLCJyZXN1bHQiLCJ2YWx1ZSIsInJlYXNvbiIsInNhbXBsZVJhdGUiLCJkdXJhdGlvbiIsIm51bVNhbXBsZXMiLCJBcnJheUJ1ZmZlciIsInZpZXciLCJEYXRhVmlldyIsIndyaXRlU3RyaW5nIiwib2Zmc2V0Iiwic3RyaW5nIiwiaSIsInNldFVpbnQ4IiwiY2hhckNvZGVBdCIsInNldFVpbnQzMiIsInNldFVpbnQxNiIsInNldEludDE2IiwiZ2V0QXZhaWxhYmxlVm9pY2VzIiwiZGF0YSIsImpzb24iLCJ2b2ljZXMiLCJ2b2ljZSIsImlkIiwidm9pY2VfaWQiLCJuYW1lIiwiY2F0ZWdvcnkiLCJjaGVja1F1b3RhIiwicmVtYWluaW5nIiwic3Vic2NyaXB0aW9uIiwiY2hhcmFjdGVyX2xpbWl0IiwiY2hhcmFjdGVyX2NvdW50IiwidG90YWwiLCJtb250aGx5UXVvdGEiLCJwYXJzZUludCIsIkVMRVZFTkxBQlNfTU9OVEhMWV9RVU9UQSIsInVwbG9hZEF1ZGlvVG9TdG9yYWdlIiwiZmlsZU5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/services/ai-services/eleven-labs.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/ai-services/gemini.ts":
/*!********************************************!*\
  !*** ./src/services/ai-services/gemini.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GeminiService: () => (/* binding */ GeminiService)\n/* harmony export */ });\n/* harmony import */ var _speakdeck_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @speakdeck/shared */ \"(rsc)/../../packages/shared/src/index.ts\");\n\nclass GeminiService {\n    constructor(apiKey){\n        this.baseUrl = \"https://generativelanguage.googleapis.com/v1beta\";\n        this.apiKey = apiKey || process.env.GEMINI_API_KEY || \"\";\n        if (!this.apiKey) {\n            throw new Error(\"Gemini API key is required\");\n        }\n    }\n    async generatePresentationContent(topic, slideCount = 4) {\n        const prompt = this.createPresentationPrompt(topic, slideCount);\n        return (0,_speakdeck_shared__WEBPACK_IMPORTED_MODULE_0__.retryWithBackoff)(async ()=>{\n            const response = await fetch(`${this.baseUrl}/models/gemini-1.5-flash:generateContent?key=${this.apiKey}`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    contents: [\n                        {\n                            parts: [\n                                {\n                                    text: prompt\n                                }\n                            ]\n                        }\n                    ],\n                    generationConfig: {\n                        temperature: 0.7,\n                        topK: 40,\n                        topP: 0.95,\n                        maxOutputTokens: 2048\n                    },\n                    safetySettings: [\n                        {\n                            category: \"HARM_CATEGORY_HARASSMENT\",\n                            threshold: \"BLOCK_MEDIUM_AND_ABOVE\"\n                        }\n                    ]\n                })\n            });\n            if (!response.ok) {\n                const error = await response.text();\n                throw new Error(`Gemini API error: ${response.status} - ${error}`);\n            }\n            const data = await response.json();\n            if (!data.candidates || !data.candidates[0]?.content?.parts[0]?.text) {\n                throw new Error(\"Invalid response from Gemini API\");\n            }\n            const generatedText = data.candidates[0].content.parts[0].text;\n            return this.parseGeminiResponse(generatedText);\n        });\n    }\n    createPresentationPrompt(topic, slideCount) {\n        return `Create a ${slideCount}-slide presentation about \"${topic}\". \n    \nFormat your response as a JSON object with this exact structure:\n{\n  \"slides\": [\n    {\n      \"title\": \"Slide title here\",\n      \"content\": \"Detailed slide content here (2-3 sentences max)\",\n      \"imagePrompt\": \"Detailed visual description for image generation\"\n    }\n  ]\n}\n\nRequirements:\n- Make it engaging and informative\n- Keep content concise but meaningful\n- Create vivid, specific image prompts that would generate compelling visuals\n- Ensure logical flow between slides\n- First slide should be an introduction, last slide should be a conclusion\n- Make the content suitable for a ${slideCount < 4 ? \"brief\" : \"comprehensive\"} presentation\n\nTopic: ${topic}\nNumber of slides: ${slideCount}\n\nPlease respond with valid JSON only, no additional text.`;\n    }\n    parseGeminiResponse(text) {\n        try {\n            // Try to extract JSON from the response\n            const jsonMatch = text.match(/\\{[\\s\\S]*\\}/);\n            if (!jsonMatch) {\n                throw new Error(\"No JSON found in response\");\n            }\n            const parsed = JSON.parse(jsonMatch[0]);\n            if (!parsed.slides || !Array.isArray(parsed.slides)) {\n                throw new Error(\"Invalid slides structure\");\n            }\n            // Validate slide structure\n            const validatedSlides = parsed.slides.map((slide, index)=>{\n                if (!slide.title || !slide.content) {\n                    throw new Error(`Invalid slide at index ${index}`);\n                }\n                return {\n                    title: slide.title.trim(),\n                    content: slide.content.trim(),\n                    imagePrompt: slide.imagePrompt?.trim() || `Professional image related to: ${slide.title}`\n                };\n            });\n            return {\n                slides: validatedSlides,\n                tokensUsed: this.estimateTokens(text)\n            };\n        } catch (error) {\n            console.error(\"Failed to parse Gemini response:\", error);\n            // Fallback: Create basic slides from the topic\n            return this.createFallbackResponse(text);\n        }\n    }\n    createFallbackResponse(originalText) {\n        // Extract any usable content or create basic structure\n        const lines = originalText.split(\"\\n\").filter((line)=>line.trim());\n        const slideCount = Math.min(Math.max(lines.length, 3), 5);\n        const fallbackSlides = [];\n        for(let i = 0; i < slideCount; i++){\n            fallbackSlides.push({\n                title: i === 0 ? \"Introduction\" : i === slideCount - 1 ? \"Conclusion\" : `Key Point ${i}`,\n                content: lines[i] || \"Content generated from the presentation topic.\",\n                imagePrompt: `Professional illustration representing slide ${i + 1} content`\n            });\n        }\n        return {\n            slides: fallbackSlides,\n            tokensUsed: this.estimateTokens(originalText)\n        };\n    }\n    estimateTokens(text) {\n        // Rough estimation: ~4 characters per token\n        return Math.ceil(text.length / 4);\n    }\n    async checkQuota() {\n        // For MVP, we'll implement simple quota tracking\n        // In production, this would check actual API quota\n        const dailyQuota = parseInt(process.env.GEMINI_DAILY_QUOTA || \"100\");\n        // This would need to be stored in database/cache in real implementation\n        return {\n            remaining: dailyQuota,\n            total: dailyQuota\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM5RTtRQUNGO1FBRUEsT0FBTztZQUNMeEIsUUFBUXVCO1lBQ1JiLFlBQVksSUFBSSxDQUFDQyxjQUFjLENBQUNHO1FBQ2xDO0lBQ0Y7SUFFUUgsZUFBZWpDLElBQVksRUFBVTtRQUMzQyw0Q0FBNEM7UUFDNUMsT0FBT3lDLEtBQUtPLElBQUksQ0FBQ2hELEtBQUs0QyxNQUFNLEdBQUc7SUFDakM7SUFFQSxNQUFNSyxhQUE0RDtRQUNoRSxpREFBaUQ7UUFDakQsbURBQW1EO1FBQ25ELE1BQU1DLGFBQWFDLFNBQVNyRSxRQUFRQyxHQUFHLENBQUNxRSxrQkFBa0IsSUFBSTtRQUM5RCx3RUFBd0U7UUFDeEUsT0FBTztZQUFFQyxXQUFXSDtZQUFZSSxPQUFPSjtRQUFXO0lBQ3BEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac3BlYWtkZWNrL3dlYi8uL3NyYy9zZXJ2aWNlcy9haS1zZXJ2aWNlcy9nZW1pbmkudHM/YzY4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHZW1pbmlSZXNwb25zZSB9IGZyb20gJ0BzcGVha2RlY2svc2hhcmVkJztcbmltcG9ydCB7IHJldHJ5V2l0aEJhY2tvZmYgfSBmcm9tICdAc3BlYWtkZWNrL3NoYXJlZCc7XG5cbmV4cG9ydCBjbGFzcyBHZW1pbmlTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBhcGlLZXk6IHN0cmluZztcbiAgcHJpdmF0ZSBiYXNlVXJsID0gJ2h0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YSc7XG5cbiAgY29uc3RydWN0b3IoYXBpS2V5Pzogc3RyaW5nKSB7XG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXkgfHwgcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkgfHwgJyc7XG4gICAgXG4gICAgaWYgKCF0aGlzLmFwaUtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdHZW1pbmkgQVBJIGtleSBpcyByZXF1aXJlZCcpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlUHJlc2VudGF0aW9uQ29udGVudCh0b3BpYzogc3RyaW5nLCBzbGlkZUNvdW50OiBudW1iZXIgPSA0KTogUHJvbWlzZTxHZW1pbmlSZXNwb25zZT4ge1xuICAgIGNvbnN0IHByb21wdCA9IHRoaXMuY3JlYXRlUHJlc2VudGF0aW9uUHJvbXB0KHRvcGljLCBzbGlkZUNvdW50KTtcbiAgICBcbiAgICByZXR1cm4gcmV0cnlXaXRoQmFja29mZihhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0vbW9kZWxzL2dlbWluaS0xLjUtZmxhc2g6Z2VuZXJhdGVDb250ZW50P2tleT0ke3RoaXMuYXBpS2V5fWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgY29udGVudHM6IFt7XG4gICAgICAgICAgICBwYXJ0czogW3tcbiAgICAgICAgICAgICAgdGV4dDogcHJvbXB0XG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1dLFxuICAgICAgICAgIGdlbmVyYXRpb25Db25maWc6IHtcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICAgICAgICB0b3BLOiA0MCxcbiAgICAgICAgICAgIHRvcFA6IDAuOTUsXG4gICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IDIwNDgsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzYWZldHlTZXR0aW5nczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjYXRlZ29yeTogJ0hBUk1fQ0FURUdPUllfSEFSQVNTTUVOVCcsXG4gICAgICAgICAgICAgIHRocmVzaG9sZDogJ0JMT0NLX01FRElVTV9BTkRfQUJPVkUnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEdlbWluaSBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAtICR7ZXJyb3J9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBcbiAgICAgIGlmICghZGF0YS5jYW5kaWRhdGVzIHx8ICFkYXRhLmNhbmRpZGF0ZXNbMF0/LmNvbnRlbnQ/LnBhcnRzWzBdPy50ZXh0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNwb25zZSBmcm9tIEdlbWluaSBBUEknKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZ2VuZXJhdGVkVGV4dCA9IGRhdGEuY2FuZGlkYXRlc1swXS5jb250ZW50LnBhcnRzWzBdLnRleHQ7XG4gICAgICByZXR1cm4gdGhpcy5wYXJzZUdlbWluaVJlc3BvbnNlKGdlbmVyYXRlZFRleHQpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVQcmVzZW50YXRpb25Qcm9tcHQodG9waWM6IHN0cmluZywgc2xpZGVDb3VudDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYENyZWF0ZSBhICR7c2xpZGVDb3VudH0tc2xpZGUgcHJlc2VudGF0aW9uIGFib3V0IFwiJHt0b3BpY31cIi4gXG4gICAgXG5Gb3JtYXQgeW91ciByZXNwb25zZSBhcyBhIEpTT04gb2JqZWN0IHdpdGggdGhpcyBleGFjdCBzdHJ1Y3R1cmU6XG57XG4gIFwic2xpZGVzXCI6IFtcbiAgICB7XG4gICAgICBcInRpdGxlXCI6IFwiU2xpZGUgdGl0bGUgaGVyZVwiLFxuICAgICAgXCJjb250ZW50XCI6IFwiRGV0YWlsZWQgc2xpZGUgY29udGVudCBoZXJlICgyLTMgc2VudGVuY2VzIG1heClcIixcbiAgICAgIFwiaW1hZ2VQcm9tcHRcIjogXCJEZXRhaWxlZCB2aXN1YWwgZGVzY3JpcHRpb24gZm9yIGltYWdlIGdlbmVyYXRpb25cIlxuICAgIH1cbiAgXVxufVxuXG5SZXF1aXJlbWVudHM6XG4tIE1ha2UgaXQgZW5nYWdpbmcgYW5kIGluZm9ybWF0aXZlXG4tIEtlZXAgY29udGVudCBjb25jaXNlIGJ1dCBtZWFuaW5nZnVsXG4tIENyZWF0ZSB2aXZpZCwgc3BlY2lmaWMgaW1hZ2UgcHJvbXB0cyB0aGF0IHdvdWxkIGdlbmVyYXRlIGNvbXBlbGxpbmcgdmlzdWFsc1xuLSBFbnN1cmUgbG9naWNhbCBmbG93IGJldHdlZW4gc2xpZGVzXG4tIEZpcnN0IHNsaWRlIHNob3VsZCBiZSBhbiBpbnRyb2R1Y3Rpb24sIGxhc3Qgc2xpZGUgc2hvdWxkIGJlIGEgY29uY2x1c2lvblxuLSBNYWtlIHRoZSBjb250ZW50IHN1aXRhYmxlIGZvciBhICR7c2xpZGVDb3VudCA8IDQgPyAnYnJpZWYnIDogJ2NvbXByZWhlbnNpdmUnfSBwcmVzZW50YXRpb25cblxuVG9waWM6ICR7dG9waWN9XG5OdW1iZXIgb2Ygc2xpZGVzOiAke3NsaWRlQ291bnR9XG5cblBsZWFzZSByZXNwb25kIHdpdGggdmFsaWQgSlNPTiBvbmx5LCBubyBhZGRpdGlvbmFsIHRleHQuYDtcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VHZW1pbmlSZXNwb25zZSh0ZXh0OiBzdHJpbmcpOiBHZW1pbmlSZXNwb25zZSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRyeSB0byBleHRyYWN0IEpTT04gZnJvbSB0aGUgcmVzcG9uc2VcbiAgICAgIGNvbnN0IGpzb25NYXRjaCA9IHRleHQubWF0Y2goL1xce1tcXHNcXFNdKlxcfS8pO1xuICAgICAgaWYgKCFqc29uTWF0Y2gpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBKU09OIGZvdW5kIGluIHJlc3BvbnNlJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKTtcbiAgICAgIFxuICAgICAgaWYgKCFwYXJzZWQuc2xpZGVzIHx8ICFBcnJheS5pc0FycmF5KHBhcnNlZC5zbGlkZXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzbGlkZXMgc3RydWN0dXJlJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIHNsaWRlIHN0cnVjdHVyZVxuICAgICAgY29uc3QgdmFsaWRhdGVkU2xpZGVzID0gcGFyc2VkLnNsaWRlcy5tYXAoKHNsaWRlOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgaWYgKCFzbGlkZS50aXRsZSB8fCAhc2xpZGUuY29udGVudCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzbGlkZSBhdCBpbmRleCAke2luZGV4fWApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0aXRsZTogc2xpZGUudGl0bGUudHJpbSgpLFxuICAgICAgICAgIGNvbnRlbnQ6IHNsaWRlLmNvbnRlbnQudHJpbSgpLFxuICAgICAgICAgIGltYWdlUHJvbXB0OiBzbGlkZS5pbWFnZVByb21wdD8udHJpbSgpIHx8IGBQcm9mZXNzaW9uYWwgaW1hZ2UgcmVsYXRlZCB0bzogJHtzbGlkZS50aXRsZX1gLFxuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNsaWRlczogdmFsaWRhdGVkU2xpZGVzLFxuICAgICAgICB0b2tlbnNVc2VkOiB0aGlzLmVzdGltYXRlVG9rZW5zKHRleHQpLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHBhcnNlIEdlbWluaSByZXNwb25zZTonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIC8vIEZhbGxiYWNrOiBDcmVhdGUgYmFzaWMgc2xpZGVzIGZyb20gdGhlIHRvcGljXG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVGYWxsYmFja1Jlc3BvbnNlKHRleHQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRmFsbGJhY2tSZXNwb25zZShvcmlnaW5hbFRleHQ6IHN0cmluZyk6IEdlbWluaVJlc3BvbnNlIHtcbiAgICAvLyBFeHRyYWN0IGFueSB1c2FibGUgY29udGVudCBvciBjcmVhdGUgYmFzaWMgc3RydWN0dXJlXG4gICAgY29uc3QgbGluZXMgPSBvcmlnaW5hbFRleHQuc3BsaXQoJ1xcbicpLmZpbHRlcihsaW5lID0+IGxpbmUudHJpbSgpKTtcbiAgICBjb25zdCBzbGlkZUNvdW50ID0gTWF0aC5taW4oTWF0aC5tYXgobGluZXMubGVuZ3RoLCAzKSwgNSk7XG4gICAgXG4gICAgY29uc3QgZmFsbGJhY2tTbGlkZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlQ291bnQ7IGkrKykge1xuICAgICAgZmFsbGJhY2tTbGlkZXMucHVzaCh7XG4gICAgICAgIHRpdGxlOiBpID09PSAwID8gJ0ludHJvZHVjdGlvbicgOiBpID09PSBzbGlkZUNvdW50IC0gMSA/ICdDb25jbHVzaW9uJyA6IGBLZXkgUG9pbnQgJHtpfWAsXG4gICAgICAgIGNvbnRlbnQ6IGxpbmVzW2ldIHx8ICdDb250ZW50IGdlbmVyYXRlZCBmcm9tIHRoZSBwcmVzZW50YXRpb24gdG9waWMuJyxcbiAgICAgICAgaW1hZ2VQcm9tcHQ6IGBQcm9mZXNzaW9uYWwgaWxsdXN0cmF0aW9uIHJlcHJlc2VudGluZyBzbGlkZSAke2kgKyAxfSBjb250ZW50YCxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzbGlkZXM6IGZhbGxiYWNrU2xpZGVzLFxuICAgICAgdG9rZW5zVXNlZDogdGhpcy5lc3RpbWF0ZVRva2VucyhvcmlnaW5hbFRleHQpLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGVzdGltYXRlVG9rZW5zKHRleHQ6IHN0cmluZyk6IG51bWJlciB7XG4gICAgLy8gUm91Z2ggZXN0aW1hdGlvbjogfjQgY2hhcmFjdGVycyBwZXIgdG9rZW5cbiAgICByZXR1cm4gTWF0aC5jZWlsKHRleHQubGVuZ3RoIC8gNCk7XG4gIH1cblxuICBhc3luYyBjaGVja1F1b3RhKCk6IFByb21pc2U8eyByZW1haW5pbmc6IG51bWJlcjsgdG90YWw6IG51bWJlciB9PiB7XG4gICAgLy8gRm9yIE1WUCwgd2UnbGwgaW1wbGVtZW50IHNpbXBsZSBxdW90YSB0cmFja2luZ1xuICAgIC8vIEluIHByb2R1Y3Rpb24sIHRoaXMgd291bGQgY2hlY2sgYWN0dWFsIEFQSSBxdW90YVxuICAgIGNvbnN0IGRhaWx5UXVvdGEgPSBwYXJzZUludChwcm9jZXNzLmVudi5HRU1JTklfREFJTFlfUVVPVEEgfHwgJzEwMCcpO1xuICAgIC8vIFRoaXMgd291bGQgbmVlZCB0byBiZSBzdG9yZWQgaW4gZGF0YWJhc2UvY2FjaGUgaW4gcmVhbCBpbXBsZW1lbnRhdGlvblxuICAgIHJldHVybiB7IHJlbWFpbmluZzogZGFpbHlRdW90YSwgdG90YWw6IGRhaWx5UXVvdGEgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInJldHJ5V2l0aEJhY2tvZmYiLCJHZW1pbmlTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJhcGlLZXkiLCJiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIkdFTUlOSV9BUElfS0VZIiwiRXJyb3IiLCJnZW5lcmF0ZVByZXNlbnRhdGlvbkNvbnRlbnQiLCJ0b3BpYyIsInNsaWRlQ291bnQiLCJwcm9tcHQiLCJjcmVhdGVQcmVzZW50YXRpb25Qcm9tcHQiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY29udGVudHMiLCJwYXJ0cyIsInRleHQiLCJnZW5lcmF0aW9uQ29uZmlnIiwidGVtcGVyYXR1cmUiLCJ0b3BLIiwidG9wUCIsIm1heE91dHB1dFRva2VucyIsInNhZmV0eVNldHRpbmdzIiwiY2F0ZWdvcnkiLCJ0aHJlc2hvbGQiLCJvayIsImVycm9yIiwic3RhdHVzIiwiZGF0YSIsImpzb24iLCJjYW5kaWRhdGVzIiwiY29udGVudCIsImdlbmVyYXRlZFRleHQiLCJwYXJzZUdlbWluaVJlc3BvbnNlIiwianNvbk1hdGNoIiwibWF0Y2giLCJwYXJzZWQiLCJwYXJzZSIsInNsaWRlcyIsIkFycmF5IiwiaXNBcnJheSIsInZhbGlkYXRlZFNsaWRlcyIsIm1hcCIsInNsaWRlIiwiaW5kZXgiLCJ0aXRsZSIsInRyaW0iLCJpbWFnZVByb21wdCIsInRva2Vuc1VzZWQiLCJlc3RpbWF0ZVRva2VucyIsImNvbnNvbGUiLCJjcmVhdGVGYWxsYmFja1Jlc3BvbnNlIiwib3JpZ2luYWxUZXh0IiwibGluZXMiLCJzcGxpdCIsImZpbHRlciIsImxpbmUiLCJNYXRoIiwibWluIiwibWF4IiwibGVuZ3RoIiwiZmFsbGJhY2tTbGlkZXMiLCJpIiwicHVzaCIsImNlaWwiLCJjaGVja1F1b3RhIiwiZGFpbHlRdW90YSIsInBhcnNlSW50IiwiR0VNSU5JX0RBSUxZX1FVT1RBIiwicmVtYWluaW5nIiwidG90YWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/services/ai-services/gemini.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/ai-services/nano-banana.ts":
/*!*************************************************!*\
  !*** ./src/services/ai-services/nano-banana.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NanoBananaService: () => (/* binding */ NanoBananaService)\n/* harmony export */ });\n/* harmony import */ var _speakdeck_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @speakdeck/shared */ \"(rsc)/../../packages/shared/src/index.ts\");\n/* harmony import */ var _google_genai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @google/genai */ \"(rsc)/../../node_modules/@google/genai/dist/node/index.mjs\");\n\n\nclass NanoBananaService {\n    constructor(apiKey){\n        this.modelName = \"gemini-2.5-flash-image-preview\";\n        this.apiKey = apiKey || process.env.NANO_BANANA_API_KEY || process.env.GOOGLE_AI_API_KEY || \"\";\n        if (!this.apiKey) {\n            throw new Error(\"Nano Banana (Google AI) API key is required\");\n        }\n        this.ai = new _google_genai__WEBPACK_IMPORTED_MODULE_1__.GoogleGenAI({\n            apiKey: this.apiKey\n        });\n    }\n    async generateImage(prompt, slideNumber) {\n        const enhancedPrompt = this.enhancePrompt(prompt, slideNumber);\n        return (0,_speakdeck_shared__WEBPACK_IMPORTED_MODULE_0__.retryWithBackoff)(async ()=>{\n            try {\n                console.log(`Generating image with Gemini ${this.modelName} for slide ${slideNumber}:`, enhancedPrompt);\n                // Use the correct Google GenAI SDK approach\n                const response = await this.ai.models.generateContent({\n                    model: this.modelName,\n                    contents: enhancedPrompt\n                });\n                console.log(\"Gemini API response:\", response);\n                // Check if we have candidates with image data\n                const candidates = response.candidates || [];\n                for (const candidate of candidates){\n                    const parts = candidate.content?.parts || [];\n                    for (const part of parts){\n                        // Check for text response first (in case of error messages)\n                        if (part.text) {\n                            console.log(\"Gemini response text:\", part.text);\n                        }\n                        // Look for inline image data\n                        if (part.inlineData?.data) {\n                            const mimeType = part.inlineData.mimeType || \"image/png\";\n                            const dataUrl = `data:${mimeType};base64,${part.inlineData.data}`;\n                            console.log(`Successfully generated image for slide ${slideNumber} (${mimeType})`);\n                            console.log(\"Image data length:\", part.inlineData.data.length);\n                            return {\n                                imageUrl: dataUrl,\n                                callsUsed: 1\n                            };\n                        }\n                    }\n                }\n                // If we reach here, no image was generated\n                console.warn(\"No image data returned from Gemini API\");\n                console.warn(\"Full response:\", JSON.stringify(response, null, 2));\n                return {\n                    imageUrl: await this.generatePlaceholderImage(prompt, slideNumber),\n                    callsUsed: 0\n                };\n            } catch (error) {\n                console.error(`Failed to generate image for slide ${slideNumber}:`, error);\n                // Fallback to placeholder image\n                return {\n                    imageUrl: await this.generatePlaceholderImage(prompt, slideNumber),\n                    callsUsed: 0\n                };\n            }\n        });\n    }\n    enhancePrompt(originalPrompt, slideNumber) {\n        // Create a more detailed prompt for better image generation\n        const styleModifiers = [\n            \"high-quality digital art\",\n            \"professional presentation style\",\n            \"clean modern design\",\n            \"well-composed\",\n            \"4K resolution\",\n            \"bright and clear\",\n            \"business-appropriate\",\n            \"vector illustration style\",\n            \"minimalist design\"\n        ];\n        const contextModifier = slideNumber === 1 ? \"title slide, introductory visual, eye-catching header image\" : `content slide ${slideNumber}, supporting visual element`;\n        // Build a comprehensive prompt\n        const fullPrompt = `Create a ${contextModifier}: ${originalPrompt}. \nStyle: ${styleModifiers.join(\", \")}. \nRequirements: The image should be suitable for a professional presentation slide, \nwith clear visual hierarchy, appropriate typography space, and engaging visual elements.\nAvoid cluttered designs and ensure high contrast for readability.`;\n        return fullPrompt;\n    }\n    async generatePlaceholderImage(prompt, slideNumber) {\n        console.log(`Generating placeholder image for slide ${slideNumber}`);\n        const seed = this.hashString(prompt);\n        const colors = [\n            \"4F46E5\",\n            \"059669\",\n            \"DC2626\",\n            \"D97706\",\n            \"7C3AED\",\n            \"0EA5E9\",\n            \"EF4444\",\n            \"10B981\"\n        ];\n        const color = colors[seed % colors.length];\n        const width = 1200; // Higher resolution\n        const height = 800;\n        // Using a placeholder service that generates images with text\n        const placeholderText = encodeURIComponent(`Slide ${slideNumber}`);\n        return `https://via.placeholder.com/${width}x${height}/${color}/FFFFFF?text=${placeholderText}`;\n    }\n    hashString(str) {\n        let hash = 0;\n        for(let i = 0; i < str.length; i++){\n            const char = str.charCodeAt(i);\n            hash = (hash << 5) - hash + char;\n            hash = hash & hash; // Convert to 32bit integer\n        }\n        return Math.abs(hash);\n    }\n    async uploadImageToStorage(imageUrl, fileName) {\n        // This would typically download the image and upload to Supabase Storage\n        // For now, we'll return the direct URL\n        return imageUrl;\n    }\n    async checkQuota() {\n        // For MVP, implement simple quota tracking\n        const dailyQuota = parseInt(process.env.NANO_BANANA_DAILY_QUOTA || \"100\");\n        return {\n            remaining: dailyQuota,\n            total: dailyQuota\n        };\n    }\n    // Batch generation for multiple slides\n    async generateMultipleImages(prompts) {\n        const results = await Promise.allSettled(prompts.map((prompt, index)=>this.generateImage(prompt, index + 1)));\n        return results.map((result, index)=>{\n            if (result.status === \"fulfilled\") {\n                return result.value;\n            } else {\n                console.error(`Failed to generate image for slide ${index + 1}:`, result.reason);\n                return {\n                    imageUrl: `https://via.placeholder.com/1200x800/4F46E5/FFFFFF?text=Slide+${index + 1}`,\n                    callsUsed: 0\n                };\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvYWktc2VydmljZXMvbmFuby1iYW5hbmEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ3FEO0FBQ1Q7QUFFckMsTUFBTUU7SUFLWEMsWUFBWUMsTUFBZSxDQUFFO2FBRnJCQyxZQUFZO1FBR2xCLElBQUksQ0FBQ0QsTUFBTSxHQUFHQSxVQUFVRSxRQUFRQyxHQUFHLENBQUNDLG1CQUFtQixJQUFJRixRQUFRQyxHQUFHLENBQUNFLGlCQUFpQixJQUFJO1FBRTVGLElBQUksQ0FBQyxJQUFJLENBQUNMLE1BQU0sRUFBRTtZQUNoQixNQUFNLElBQUlNLE1BQU07UUFDbEI7UUFFQSxJQUFJLENBQUNDLEVBQUUsR0FBRyxJQUFJVixzREFBV0EsQ0FBQztZQUFFRyxRQUFRLElBQUksQ0FBQ0EsTUFBTTtRQUFDO0lBQ2xEO0lBRUEsTUFBTVEsY0FBY0MsTUFBYyxFQUFFQyxXQUFtQixFQUErQjtRQUNwRixNQUFNQyxpQkFBaUIsSUFBSSxDQUFDQyxhQUFhLENBQUNILFFBQVFDO1FBRWxELE9BQU9kLG1FQUFnQkEsQ0FBQztZQUN0QixJQUFJO2dCQUNGaUIsUUFBUUMsR0FBRyxDQUFDLENBQUMsNkJBQTZCLEVBQUUsSUFBSSxDQUFDYixTQUFTLENBQUMsV0FBVyxFQUFFUyxZQUFZLENBQUMsQ0FBQyxFQUFFQztnQkFFeEYsNENBQTRDO2dCQUM1QyxNQUFNSSxXQUFXLE1BQU0sSUFBSSxDQUFDUixFQUFFLENBQUNTLE1BQU0sQ0FBQ0MsZUFBZSxDQUFDO29CQUNwREMsT0FBTyxJQUFJLENBQUNqQixTQUFTO29CQUNyQmtCLFVBQVVSO2dCQUNaO2dCQUVBRSxRQUFRQyxHQUFHLENBQUMsd0JBQXdCQztnQkFFcEMsOENBQThDO2dCQUM5QyxNQUFNSyxhQUFhTCxTQUFTSyxVQUFVLElBQUksRUFBRTtnQkFFNUMsS0FBSyxNQUFNQyxhQUFhRCxXQUFZO29CQUNsQyxNQUFNRSxRQUFRRCxVQUFVRSxPQUFPLEVBQUVELFNBQVMsRUFBRTtvQkFFNUMsS0FBSyxNQUFNRSxRQUFRRixNQUFPO3dCQUN4Qiw0REFBNEQ7d0JBQzVELElBQUlFLEtBQUtDLElBQUksRUFBRTs0QkFDYlosUUFBUUMsR0FBRyxDQUFDLHlCQUF5QlUsS0FBS0MsSUFBSTt3QkFDaEQ7d0JBRUEsNkJBQTZCO3dCQUM3QixJQUFJRCxLQUFLRSxVQUFVLEVBQUVDLE1BQU07NEJBQ3pCLE1BQU1DLFdBQVdKLEtBQUtFLFVBQVUsQ0FBQ0UsUUFBUSxJQUFJOzRCQUM3QyxNQUFNQyxVQUFVLENBQUMsS0FBSyxFQUFFRCxTQUFTLFFBQVEsRUFBRUosS0FBS0UsVUFBVSxDQUFDQyxJQUFJLENBQUMsQ0FBQzs0QkFFakVkLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHVDQUF1QyxFQUFFSixZQUFZLEVBQUUsRUFBRWtCLFNBQVMsQ0FBQyxDQUFDOzRCQUNqRmYsUUFBUUMsR0FBRyxDQUFDLHNCQUFzQlUsS0FBS0UsVUFBVSxDQUFDQyxJQUFJLENBQUNHLE1BQU07NEJBRTdELE9BQU87Z0NBQ0xDLFVBQVVGO2dDQUNWRyxXQUFXOzRCQUNiO3dCQUNGO29CQUNGO2dCQUNGO2dCQUVBLDJDQUEyQztnQkFDM0NuQixRQUFRb0IsSUFBSSxDQUFDO2dCQUNicEIsUUFBUW9CLElBQUksQ0FBQyxrQkFBa0JDLEtBQUtDLFNBQVMsQ0FBQ3BCLFVBQVUsTUFBTTtnQkFFOUQsT0FBTztvQkFDTGdCLFVBQVUsTUFBTSxJQUFJLENBQUNLLHdCQUF3QixDQUFDM0IsUUFBUUM7b0JBQ3REc0IsV0FBVztnQkFDYjtZQUVGLEVBQUUsT0FBT0ssT0FBTztnQkFDZHhCLFFBQVF3QixLQUFLLENBQUMsQ0FBQyxtQ0FBbUMsRUFBRTNCLFlBQVksQ0FBQyxDQUFDLEVBQUUyQjtnQkFFcEUsZ0NBQWdDO2dCQUNoQyxPQUFPO29CQUNMTixVQUFVLE1BQU0sSUFBSSxDQUFDSyx3QkFBd0IsQ0FBQzNCLFFBQVFDO29CQUN0RHNCLFdBQVc7Z0JBQ2I7WUFDRjtRQUNGO0lBQ0Y7SUFFUXBCLGNBQWMwQixjQUFzQixFQUFFNUIsV0FBbUIsRUFBVTtRQUN6RSw0REFBNEQ7UUFDNUQsTUFBTTZCLGlCQUFpQjtZQUNyQjtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7U0FDRDtRQUVELE1BQU1DLGtCQUFrQjlCLGdCQUFnQixJQUNwQyxnRUFDQSxDQUFDLGNBQWMsRUFBRUEsWUFBWSwyQkFBMkIsQ0FBQztRQUU3RCwrQkFBK0I7UUFDL0IsTUFBTStCLGFBQWEsQ0FBQyxTQUFTLEVBQUVELGdCQUFnQixFQUFFLEVBQUVGLGVBQWU7T0FDL0QsRUFBRUMsZUFBZUcsSUFBSSxDQUFDLE1BQU07OztpRUFHOEIsQ0FBQztRQUU5RCxPQUFPRDtJQUNUO0lBRUEsTUFBY0wseUJBQXlCM0IsTUFBYyxFQUFFQyxXQUFtQixFQUFtQjtRQUMzRkcsUUFBUUMsR0FBRyxDQUFDLENBQUMsdUNBQXVDLEVBQUVKLFlBQVksQ0FBQztRQUVuRSxNQUFNaUMsT0FBTyxJQUFJLENBQUNDLFVBQVUsQ0FBQ25DO1FBQzdCLE1BQU1vQyxTQUFTO1lBQ2I7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNEO1FBRUQsTUFBTUMsUUFBUUQsTUFBTSxDQUFDRixPQUFPRSxPQUFPZixNQUFNLENBQUM7UUFDMUMsTUFBTWlCLFFBQVEsTUFBTSxvQkFBb0I7UUFDeEMsTUFBTUMsU0FBUztRQUVmLDhEQUE4RDtRQUM5RCxNQUFNQyxrQkFBa0JDLG1CQUFtQixDQUFDLE1BQU0sRUFBRXhDLFlBQVksQ0FBQztRQUNqRSxPQUFPLENBQUMsNEJBQTRCLEVBQUVxQyxNQUFNLENBQUMsRUFBRUMsT0FBTyxDQUFDLEVBQUVGLE1BQU0sYUFBYSxFQUFFRyxnQkFBZ0IsQ0FBQztJQUNqRztJQUVRTCxXQUFXTyxHQUFXLEVBQVU7UUFDdEMsSUFBSUMsT0FBTztRQUNYLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJRixJQUFJckIsTUFBTSxFQUFFdUIsSUFBSztZQUNuQyxNQUFNQyxPQUFPSCxJQUFJSSxVQUFVLENBQUNGO1lBQzVCRCxPQUFPLENBQUVBLFFBQVEsS0FBS0EsT0FBUUU7WUFDOUJGLE9BQU9BLE9BQU9BLE1BQU0sMkJBQTJCO1FBQ2pEO1FBQ0EsT0FBT0ksS0FBS0MsR0FBRyxDQUFDTDtJQUNsQjtJQUVBLE1BQU1NLHFCQUFxQjNCLFFBQWdCLEVBQUU0QixRQUFnQixFQUFtQjtRQUM5RSx5RUFBeUU7UUFDekUsdUNBQXVDO1FBQ3ZDLE9BQU81QjtJQUNUO0lBRUEsTUFBTTZCLGFBQTREO1FBQ2hFLDJDQUEyQztRQUMzQyxNQUFNQyxhQUFhQyxTQUFTNUQsUUFBUUMsR0FBRyxDQUFDNEQsdUJBQXVCLElBQUk7UUFDbkUsT0FBTztZQUFFQyxXQUFXSDtZQUFZSSxPQUFPSjtRQUFXO0lBQ3BEO0lBRUEsdUNBQXVDO0lBQ3ZDLE1BQU1LLHVCQUF1QkMsT0FBaUIsRUFBaUM7UUFDN0UsTUFBTUMsVUFBVSxNQUFNQyxRQUFRQyxVQUFVLENBQ3RDSCxRQUFRSSxHQUFHLENBQUMsQ0FBQzlELFFBQVErRCxRQUFVLElBQUksQ0FBQ2hFLGFBQWEsQ0FBQ0MsUUFBUStELFFBQVE7UUFHcEUsT0FBT0osUUFBUUcsR0FBRyxDQUFDLENBQUNFLFFBQVFEO1lBQzFCLElBQUlDLE9BQU9DLE1BQU0sS0FBSyxhQUFhO2dCQUNqQyxPQUFPRCxPQUFPRSxLQUFLO1lBQ3JCLE9BQU87Z0JBQ0w5RCxRQUFRd0IsS0FBSyxDQUFDLENBQUMsbUNBQW1DLEVBQUVtQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLEVBQUVDLE9BQU9HLE1BQU07Z0JBQy9FLE9BQU87b0JBQ0w3QyxVQUFVLENBQUMsOERBQThELEVBQUV5QyxRQUFRLEVBQUUsQ0FBQztvQkFDdEZ4QyxXQUFXO2dCQUNiO1lBQ0Y7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac3BlYWtkZWNrL3dlYi8uL3NyYy9zZXJ2aWNlcy9haS1zZXJ2aWNlcy9uYW5vLWJhbmFuYS50cz9kNDY3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5hbm9CYW5hbmFSZXNwb25zZSB9IGZyb20gJ0BzcGVha2RlY2svc2hhcmVkJztcbmltcG9ydCB7IHJldHJ5V2l0aEJhY2tvZmYgfSBmcm9tICdAc3BlYWtkZWNrL3NoYXJlZCc7XG5pbXBvcnQgeyBHb29nbGVHZW5BSSB9IGZyb20gJ0Bnb29nbGUvZ2VuYWknO1xuXG5leHBvcnQgY2xhc3MgTmFub0JhbmFuYVNlcnZpY2Uge1xuICBwcml2YXRlIGFwaUtleTogc3RyaW5nO1xuICBwcml2YXRlIGFpOiBHb29nbGVHZW5BSTtcbiAgcHJpdmF0ZSBtb2RlbE5hbWUgPSAnZ2VtaW5pLTIuNS1mbGFzaC1pbWFnZS1wcmV2aWV3JztcblxuICBjb25zdHJ1Y3RvcihhcGlLZXk/OiBzdHJpbmcpIHtcbiAgICB0aGlzLmFwaUtleSA9IGFwaUtleSB8fCBwcm9jZXNzLmVudi5OQU5PX0JBTkFOQV9BUElfS0VZIHx8IHByb2Nlc3MuZW52LkdPT0dMRV9BSV9BUElfS0VZIHx8ICcnO1xuICAgIFxuICAgIGlmICghdGhpcy5hcGlLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTmFubyBCYW5hbmEgKEdvb2dsZSBBSSkgQVBJIGtleSBpcyByZXF1aXJlZCcpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmFpID0gbmV3IEdvb2dsZUdlbkFJKHsgYXBpS2V5OiB0aGlzLmFwaUtleSB9KTtcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlSW1hZ2UocHJvbXB0OiBzdHJpbmcsIHNsaWRlTnVtYmVyOiBudW1iZXIpOiBQcm9taXNlPE5hbm9CYW5hbmFSZXNwb25zZT4ge1xuICAgIGNvbnN0IGVuaGFuY2VkUHJvbXB0ID0gdGhpcy5lbmhhbmNlUHJvbXB0KHByb21wdCwgc2xpZGVOdW1iZXIpO1xuICAgIFxuICAgIHJldHVybiByZXRyeVdpdGhCYWNrb2ZmKGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBHZW5lcmF0aW5nIGltYWdlIHdpdGggR2VtaW5pICR7dGhpcy5tb2RlbE5hbWV9IGZvciBzbGlkZSAke3NsaWRlTnVtYmVyfTpgLCBlbmhhbmNlZFByb21wdCk7XG4gICAgICAgIFxuICAgICAgICAvLyBVc2UgdGhlIGNvcnJlY3QgR29vZ2xlIEdlbkFJIFNESyBhcHByb2FjaFxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYWkubW9kZWxzLmdlbmVyYXRlQ29udGVudCh7XG4gICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWxOYW1lLFxuICAgICAgICAgIGNvbnRlbnRzOiBlbmhhbmNlZFByb21wdCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0dlbWluaSBBUEkgcmVzcG9uc2U6JywgcmVzcG9uc2UpO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgY2FuZGlkYXRlcyB3aXRoIGltYWdlIGRhdGFcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlcyA9IHJlc3BvbnNlLmNhbmRpZGF0ZXMgfHwgW107XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBjYW5kaWRhdGVzKSB7XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBjYW5kaWRhdGUuY29udGVudD8ucGFydHMgfHwgW107XG4gICAgICAgICAgXG4gICAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdGV4dCByZXNwb25zZSBmaXJzdCAoaW4gY2FzZSBvZiBlcnJvciBtZXNzYWdlcylcbiAgICAgICAgICAgIGlmIChwYXJ0LnRleHQpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dlbWluaSByZXNwb25zZSB0ZXh0OicsIHBhcnQudGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIExvb2sgZm9yIGlubGluZSBpbWFnZSBkYXRhXG4gICAgICAgICAgICBpZiAocGFydC5pbmxpbmVEYXRhPy5kYXRhKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG1pbWVUeXBlID0gcGFydC5pbmxpbmVEYXRhLm1pbWVUeXBlIHx8ICdpbWFnZS9wbmcnO1xuICAgICAgICAgICAgICBjb25zdCBkYXRhVXJsID0gYGRhdGE6JHttaW1lVHlwZX07YmFzZTY0LCR7cGFydC5pbmxpbmVEYXRhLmRhdGF9YDtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTdWNjZXNzZnVsbHkgZ2VuZXJhdGVkIGltYWdlIGZvciBzbGlkZSAke3NsaWRlTnVtYmVyfSAoJHttaW1lVHlwZX0pYCk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbWFnZSBkYXRhIGxlbmd0aDonLCBwYXJ0LmlubGluZURhdGEuZGF0YS5sZW5ndGgpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbWFnZVVybDogZGF0YVVybCxcbiAgICAgICAgICAgICAgICBjYWxsc1VzZWQ6IDEsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgd2UgcmVhY2ggaGVyZSwgbm8gaW1hZ2Ugd2FzIGdlbmVyYXRlZFxuICAgICAgICBjb25zb2xlLndhcm4oJ05vIGltYWdlIGRhdGEgcmV0dXJuZWQgZnJvbSBHZW1pbmkgQVBJJyk7XG4gICAgICAgIGNvbnNvbGUud2FybignRnVsbCByZXNwb25zZTonLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZSwgbnVsbCwgMikpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpbWFnZVVybDogYXdhaXQgdGhpcy5nZW5lcmF0ZVBsYWNlaG9sZGVySW1hZ2UocHJvbXB0LCBzbGlkZU51bWJlciksXG4gICAgICAgICAgY2FsbHNVc2VkOiAwLFxuICAgICAgICB9O1xuXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZ2VuZXJhdGUgaW1hZ2UgZm9yIHNsaWRlICR7c2xpZGVOdW1iZXJ9OmAsIGVycm9yKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIHBsYWNlaG9sZGVyIGltYWdlXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaW1hZ2VVcmw6IGF3YWl0IHRoaXMuZ2VuZXJhdGVQbGFjZWhvbGRlckltYWdlKHByb21wdCwgc2xpZGVOdW1iZXIpLFxuICAgICAgICAgIGNhbGxzVXNlZDogMCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZW5oYW5jZVByb21wdChvcmlnaW5hbFByb21wdDogc3RyaW5nLCBzbGlkZU51bWJlcjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAvLyBDcmVhdGUgYSBtb3JlIGRldGFpbGVkIHByb21wdCBmb3IgYmV0dGVyIGltYWdlIGdlbmVyYXRpb25cbiAgICBjb25zdCBzdHlsZU1vZGlmaWVycyA9IFtcbiAgICAgICdoaWdoLXF1YWxpdHkgZGlnaXRhbCBhcnQnLFxuICAgICAgJ3Byb2Zlc3Npb25hbCBwcmVzZW50YXRpb24gc3R5bGUnLCBcbiAgICAgICdjbGVhbiBtb2Rlcm4gZGVzaWduJyxcbiAgICAgICd3ZWxsLWNvbXBvc2VkJyxcbiAgICAgICc0SyByZXNvbHV0aW9uJyxcbiAgICAgICdicmlnaHQgYW5kIGNsZWFyJyxcbiAgICAgICdidXNpbmVzcy1hcHByb3ByaWF0ZScsXG4gICAgICAndmVjdG9yIGlsbHVzdHJhdGlvbiBzdHlsZScsXG4gICAgICAnbWluaW1hbGlzdCBkZXNpZ24nXG4gICAgXTtcblxuICAgIGNvbnN0IGNvbnRleHRNb2RpZmllciA9IHNsaWRlTnVtYmVyID09PSAxIFxuICAgICAgPyAndGl0bGUgc2xpZGUsIGludHJvZHVjdG9yeSB2aXN1YWwsIGV5ZS1jYXRjaGluZyBoZWFkZXIgaW1hZ2UnXG4gICAgICA6IGBjb250ZW50IHNsaWRlICR7c2xpZGVOdW1iZXJ9LCBzdXBwb3J0aW5nIHZpc3VhbCBlbGVtZW50YDtcblxuICAgIC8vIEJ1aWxkIGEgY29tcHJlaGVuc2l2ZSBwcm9tcHRcbiAgICBjb25zdCBmdWxsUHJvbXB0ID0gYENyZWF0ZSBhICR7Y29udGV4dE1vZGlmaWVyfTogJHtvcmlnaW5hbFByb21wdH0uIFxuU3R5bGU6ICR7c3R5bGVNb2RpZmllcnMuam9pbignLCAnKX0uIFxuUmVxdWlyZW1lbnRzOiBUaGUgaW1hZ2Ugc2hvdWxkIGJlIHN1aXRhYmxlIGZvciBhIHByb2Zlc3Npb25hbCBwcmVzZW50YXRpb24gc2xpZGUsIFxud2l0aCBjbGVhciB2aXN1YWwgaGllcmFyY2h5LCBhcHByb3ByaWF0ZSB0eXBvZ3JhcGh5IHNwYWNlLCBhbmQgZW5nYWdpbmcgdmlzdWFsIGVsZW1lbnRzLlxuQXZvaWQgY2x1dHRlcmVkIGRlc2lnbnMgYW5kIGVuc3VyZSBoaWdoIGNvbnRyYXN0IGZvciByZWFkYWJpbGl0eS5gO1xuXG4gICAgcmV0dXJuIGZ1bGxQcm9tcHQ7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlUGxhY2Vob2xkZXJJbWFnZShwcm9tcHQ6IHN0cmluZywgc2xpZGVOdW1iZXI6IG51bWJlcik6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc29sZS5sb2coYEdlbmVyYXRpbmcgcGxhY2Vob2xkZXIgaW1hZ2UgZm9yIHNsaWRlICR7c2xpZGVOdW1iZXJ9YCk7XG4gICAgXG4gICAgY29uc3Qgc2VlZCA9IHRoaXMuaGFzaFN0cmluZyhwcm9tcHQpO1xuICAgIGNvbnN0IGNvbG9ycyA9IFtcbiAgICAgICc0RjQ2RTUnLCAvLyBJbmRpZ29cbiAgICAgICcwNTk2NjknLCAvLyBFbWVyYWxkICBcbiAgICAgICdEQzI2MjYnLCAvLyBSZWRcbiAgICAgICdEOTc3MDYnLCAvLyBBbWJlclxuICAgICAgJzdDM0FFRCcsIC8vIFZpb2xldFxuICAgICAgJzBFQTVFOScsIC8vIFNreSBCbHVlXG4gICAgICAnRUY0NDQ0JywgLy8gUm9zZVxuICAgICAgJzEwQjk4MScsIC8vIEVtZXJhbGRcbiAgICBdO1xuICAgIFxuICAgIGNvbnN0IGNvbG9yID0gY29sb3JzW3NlZWQgJSBjb2xvcnMubGVuZ3RoXTtcbiAgICBjb25zdCB3aWR0aCA9IDEyMDA7IC8vIEhpZ2hlciByZXNvbHV0aW9uXG4gICAgY29uc3QgaGVpZ2h0ID0gODAwO1xuICAgIFxuICAgIC8vIFVzaW5nIGEgcGxhY2Vob2xkZXIgc2VydmljZSB0aGF0IGdlbmVyYXRlcyBpbWFnZXMgd2l0aCB0ZXh0XG4gICAgY29uc3QgcGxhY2Vob2xkZXJUZXh0ID0gZW5jb2RlVVJJQ29tcG9uZW50KGBTbGlkZSAke3NsaWRlTnVtYmVyfWApO1xuICAgIHJldHVybiBgaHR0cHM6Ly92aWEucGxhY2Vob2xkZXIuY29tLyR7d2lkdGh9eCR7aGVpZ2h0fS8ke2NvbG9yfS9GRkZGRkY/dGV4dD0ke3BsYWNlaG9sZGVyVGV4dH1gO1xuICB9XG5cbiAgcHJpdmF0ZSBoYXNoU3RyaW5nKHN0cjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBsZXQgaGFzaCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoYXIgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIGNoYXI7XG4gICAgICBoYXNoID0gaGFzaCAmIGhhc2g7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuICAgIH1cbiAgICByZXR1cm4gTWF0aC5hYnMoaGFzaCk7XG4gIH1cblxuICBhc3luYyB1cGxvYWRJbWFnZVRvU3RvcmFnZShpbWFnZVVybDogc3RyaW5nLCBmaWxlTmFtZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAvLyBUaGlzIHdvdWxkIHR5cGljYWxseSBkb3dubG9hZCB0aGUgaW1hZ2UgYW5kIHVwbG9hZCB0byBTdXBhYmFzZSBTdG9yYWdlXG4gICAgLy8gRm9yIG5vdywgd2UnbGwgcmV0dXJuIHRoZSBkaXJlY3QgVVJMXG4gICAgcmV0dXJuIGltYWdlVXJsO1xuICB9XG5cbiAgYXN5bmMgY2hlY2tRdW90YSgpOiBQcm9taXNlPHsgcmVtYWluaW5nOiBudW1iZXI7IHRvdGFsOiBudW1iZXIgfT4ge1xuICAgIC8vIEZvciBNVlAsIGltcGxlbWVudCBzaW1wbGUgcXVvdGEgdHJhY2tpbmdcbiAgICBjb25zdCBkYWlseVF1b3RhID0gcGFyc2VJbnQocHJvY2Vzcy5lbnYuTkFOT19CQU5BTkFfREFJTFlfUVVPVEEgfHwgJzEwMCcpO1xuICAgIHJldHVybiB7IHJlbWFpbmluZzogZGFpbHlRdW90YSwgdG90YWw6IGRhaWx5UXVvdGEgfTtcbiAgfVxuXG4gIC8vIEJhdGNoIGdlbmVyYXRpb24gZm9yIG11bHRpcGxlIHNsaWRlc1xuICBhc3luYyBnZW5lcmF0ZU11bHRpcGxlSW1hZ2VzKHByb21wdHM6IHN0cmluZ1tdKTogUHJvbWlzZTxOYW5vQmFuYW5hUmVzcG9uc2VbXT4ge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoXG4gICAgICBwcm9tcHRzLm1hcCgocHJvbXB0LCBpbmRleCkgPT4gdGhpcy5nZW5lcmF0ZUltYWdlKHByb21wdCwgaW5kZXggKyAxKSlcbiAgICApO1xuXG4gICAgcmV0dXJuIHJlc3VsdHMubWFwKChyZXN1bHQsIGluZGV4KSA9PiB7XG4gICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBnZW5lcmF0ZSBpbWFnZSBmb3Igc2xpZGUgJHtpbmRleCArIDF9OmAsIHJlc3VsdC5yZWFzb24pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGltYWdlVXJsOiBgaHR0cHM6Ly92aWEucGxhY2Vob2xkZXIuY29tLzEyMDB4ODAwLzRGNDZFNS9GRkZGRkY/dGV4dD1TbGlkZSske2luZGV4ICsgMX1gLFxuICAgICAgICAgIGNhbGxzVXNlZDogMCwgLy8gTm8gQVBJIGNhbGwgd2FzIHN1Y2Nlc3NmdWxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInJldHJ5V2l0aEJhY2tvZmYiLCJHb29nbGVHZW5BSSIsIk5hbm9CYW5hbmFTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJhcGlLZXkiLCJtb2RlbE5hbWUiLCJwcm9jZXNzIiwiZW52IiwiTkFOT19CQU5BTkFfQVBJX0tFWSIsIkdPT0dMRV9BSV9BUElfS0VZIiwiRXJyb3IiLCJhaSIsImdlbmVyYXRlSW1hZ2UiLCJwcm9tcHQiLCJzbGlkZU51bWJlciIsImVuaGFuY2VkUHJvbXB0IiwiZW5oYW5jZVByb21wdCIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsIm1vZGVscyIsImdlbmVyYXRlQ29udGVudCIsIm1vZGVsIiwiY29udGVudHMiLCJjYW5kaWRhdGVzIiwiY2FuZGlkYXRlIiwicGFydHMiLCJjb250ZW50IiwicGFydCIsInRleHQiLCJpbmxpbmVEYXRhIiwiZGF0YSIsIm1pbWVUeXBlIiwiZGF0YVVybCIsImxlbmd0aCIsImltYWdlVXJsIiwiY2FsbHNVc2VkIiwid2FybiIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZW5lcmF0ZVBsYWNlaG9sZGVySW1hZ2UiLCJlcnJvciIsIm9yaWdpbmFsUHJvbXB0Iiwic3R5bGVNb2RpZmllcnMiLCJjb250ZXh0TW9kaWZpZXIiLCJmdWxsUHJvbXB0Iiwiam9pbiIsInNlZWQiLCJoYXNoU3RyaW5nIiwiY29sb3JzIiwiY29sb3IiLCJ3aWR0aCIsImhlaWdodCIsInBsYWNlaG9sZGVyVGV4dCIsImVuY29kZVVSSUNvbXBvbmVudCIsInN0ciIsImhhc2giLCJpIiwiY2hhciIsImNoYXJDb2RlQXQiLCJNYXRoIiwiYWJzIiwidXBsb2FkSW1hZ2VUb1N0b3JhZ2UiLCJmaWxlTmFtZSIsImNoZWNrUXVvdGEiLCJkYWlseVF1b3RhIiwicGFyc2VJbnQiLCJOQU5PX0JBTkFOQV9EQUlMWV9RVU9UQSIsInJlbWFpbmluZyIsInRvdGFsIiwiZ2VuZXJhdGVNdWx0aXBsZUltYWdlcyIsInByb21wdHMiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJtYXAiLCJpbmRleCIsInJlc3VsdCIsInN0YXR1cyIsInZhbHVlIiwicmVhc29uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/services/ai-services/nano-banana.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/database.ts":
/*!**********************************!*\
  !*** ./src/services/database.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DatabaseService: () => (/* binding */ DatabaseService)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n\nclass DatabaseService {\n    // Presentation operations\n    async createPresentation(title, userId) {\n        console.log(\"DatabaseService.createPresentation called with:\", {\n            title,\n            userId\n        });\n        const presentationId = crypto.randomUUID();\n        console.log(\"Generated presentation ID:\", presentationId);\n        const insertData = {\n            id: presentationId,\n            title: title.trim(),\n            user_id: userId || null,\n            total_slides: 0,\n            status: \"pending\",\n            metadata: {}\n        };\n        console.log(\"Inserting presentation data:\", insertData);\n        if (!_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin) {\n            throw new Error(\"Supabase admin client not configured - missing SUPABASE_SERVICE_ROLE_KEY\");\n        }\n        const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"presentations\").insert(insertData);\n        if (error) {\n            console.error(\"Database insert error:\", error);\n            throw new Error(`Failed to create presentation: ${error.message}`);\n        }\n        console.log(\"Successfully created presentation:\", presentationId);\n        return presentationId;\n    }\n    async updatePresentationStatus(id, status, errorMessage) {\n        if (!_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin) {\n            throw new Error(\"Supabase admin client not configured\");\n        }\n        const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"presentations\").update({\n            status,\n            error_message: errorMessage || null,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", id);\n        if (error) {\n            throw new Error(`Failed to update presentation status: ${error.message}`);\n        }\n    }\n    async updatePresentationMetadata(id, metadata, generationTimeMs) {\n        if (!_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin) {\n            throw new Error(\"Supabase admin client not configured\");\n        }\n        const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"presentations\").update({\n            metadata,\n            generation_time_ms: generationTimeMs,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", id);\n        if (error) {\n            throw new Error(`Failed to update presentation metadata: ${error.message}`);\n        }\n    }\n    async getPresentation(id) {\n        if (!_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin) {\n            throw new Error(\"Supabase admin client not configured\");\n        }\n        const { data: presentationData, error: presentationError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"presentations\").select(\"*\").eq(\"id\", id).single();\n        if (presentationError) {\n            if (presentationError.code === \"PGRST116\") {\n                return null; // Not found\n            }\n            throw new Error(`Failed to get presentation: ${presentationError.message}`);\n        }\n        const { data: slidesData, error: slidesError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"slides\").select(\"*\").eq(\"presentation_id\", id).order(\"slide_number\");\n        if (slidesError) {\n            throw new Error(`Failed to get slides: ${slidesError.message}`);\n        }\n        return this.mapToPresentation(presentationData, slidesData || []);\n    }\n    // Slide operations\n    async createSlide(slideData) {\n        const slideId = crypto.randomUUID();\n        if (!_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin) {\n            throw new Error(\"Supabase admin client not configured\");\n        }\n        const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"slides\").insert({\n            id: slideId,\n            presentation_id: slideData.presentationId,\n            slide_number: slideData.slideNumber,\n            title: slideData.title,\n            content: slideData.content,\n            generation_status: {\n                text: \"completed\",\n                image: \"pending\",\n                audio: \"pending\"\n            },\n            ai_prompts: {\n                imagePrompt: slideData.imagePrompt,\n                audioScript: slideData.content\n            }\n        });\n        if (error) {\n            throw new Error(`Failed to create slide: ${error.message}`);\n        }\n        // Update total slide count\n        await this.updateSlideCount(slideData.presentationId);\n        return slideId;\n    }\n    async updateSlideMedia(slideId, imageUrl, audioUrl) {\n        const updateData = {\n            updated_at: new Date().toISOString()\n        };\n        if (imageUrl) {\n            updateData.image_url = imageUrl;\n        }\n        if (audioUrl) {\n            updateData.audio_url = audioUrl;\n        }\n        if (!_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin) {\n            throw new Error(\"Supabase admin client not configured\");\n        }\n        const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"slides\").update(updateData).eq(\"id\", slideId);\n        if (error) {\n            throw new Error(`Failed to update slide media: ${error.message}`);\n        }\n    }\n    async updateSlideStatus(slideId, statusType, status) {\n        if (!_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin) {\n            throw new Error(\"Supabase admin client not configured\");\n        }\n        // Get current status\n        const { data, error: fetchError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"slides\").select(\"generation_status\").eq(\"id\", slideId).single();\n        if (fetchError) {\n            throw new Error(`Failed to fetch slide status: ${fetchError.message}`);\n        }\n        const currentStatus = data.generation_status || {};\n        currentStatus[statusType] = status;\n        const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"slides\").update({\n            generation_status: currentStatus,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", slideId);\n        if (error) {\n            throw new Error(`Failed to update slide status: ${error.message}`);\n        }\n    }\n    // Fallback deck operations\n    async getFallbackDecks(topic) {\n        if (!_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin) {\n            throw new Error(\"Supabase admin client not configured\");\n        }\n        let query = _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"fallback_decks\").select(\"*\").eq(\"is_active\", true);\n        if (topic) {\n            query = query.ilike(\"topic\", `%${topic}%`);\n        }\n        const { data, error } = await query.order(\"usage_count\").limit(5);\n        if (error) {\n            throw new Error(`Failed to get fallback decks: ${error.message}`);\n        }\n        return data?.map(this.mapToFallbackDeck) || [];\n    }\n    async incrementFallbackUsage(id) {\n        if (!_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin) {\n            throw new Error(\"Supabase admin client not configured\");\n        }\n        // First get current usage count\n        const { data: currentData } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"fallback_decks\").select(\"usage_count\").eq(\"id\", id).single();\n        const currentCount = currentData?.usage_count || 0;\n        const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"fallback_decks\").update({\n            usage_count: currentCount + 1\n        }).eq(\"id\", id);\n        if (error) {\n            throw new Error(`Failed to increment fallback usage: ${error.message}`);\n        }\n    }\n    // Private helper methods\n    async updateSlideCount(presentationId) {\n        if (!_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin) {\n            throw new Error(\"Supabase admin client not configured\");\n        }\n        const { count, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"slides\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        }).eq(\"presentation_id\", presentationId);\n        if (error) {\n            throw new Error(`Failed to count slides: ${error.message}`);\n        }\n        const { error: updateError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"presentations\").update({\n            total_slides: count || 0\n        }).eq(\"id\", presentationId);\n        if (updateError) {\n            throw new Error(`Failed to update slide count: ${updateError.message}`);\n        }\n    }\n    mapToPresentation(presentationData, slidesData) {\n        return {\n            id: presentationData.id,\n            title: presentationData.title,\n            status: presentationData.status,\n            createdAt: new Date(presentationData.created_at),\n            updatedAt: new Date(presentationData.updated_at),\n            userId: presentationData.user_id,\n            totalSlides: presentationData.total_slides,\n            generationTimeMs: presentationData.generation_time_ms,\n            errorMessage: presentationData.error_message,\n            metadata: presentationData.metadata || {},\n            slides: slidesData.map(this.mapToSlide)\n        };\n    }\n    mapToSlide(slideData) {\n        return {\n            id: slideData.id,\n            presentationId: slideData.presentation_id,\n            slideNumber: slideData.slide_number,\n            title: slideData.title,\n            content: slideData.content,\n            imageUrl: slideData.image_url,\n            audioUrl: slideData.audio_url,\n            generationStatus: slideData.generation_status || {\n                text: \"pending\",\n                image: \"pending\",\n                audio: \"pending\"\n            },\n            aiPrompts: slideData.ai_prompts || {},\n            createdAt: new Date(slideData.created_at),\n            updatedAt: new Date(slideData.updated_at)\n        };\n    }\n    mapToFallbackDeck(data) {\n        return {\n            id: data.id,\n            topic: data.topic,\n            title: data.title,\n            slides: data.slides,\n            isActive: data.is_active,\n            usageCount: data.usage_count,\n            createdAt: new Date(data.created_at)\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvZGF0YWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEQ7QUFHbkQsTUFBTUM7SUFDWCwwQkFBMEI7SUFDMUIsTUFBTUMsbUJBQW1CQyxLQUFhLEVBQUVDLE1BQWUsRUFBbUI7UUFDeEVDLFFBQVFDLEdBQUcsQ0FBQyxtREFBbUQ7WUFBRUg7WUFBT0M7UUFBTztRQUMvRSxNQUFNRyxpQkFBaUJDLE9BQU9DLFVBQVU7UUFDeENKLFFBQVFDLEdBQUcsQ0FBQyw4QkFBOEJDO1FBRTFDLE1BQU1HLGFBQWE7WUFDakJDLElBQUlKO1lBQ0pKLE9BQU9BLE1BQU1TLElBQUk7WUFDakJDLFNBQVNULFVBQVU7WUFDbkJVLGNBQWM7WUFDZEMsUUFBUTtZQUNSQyxVQUFVLENBQUM7UUFDYjtRQUNBWCxRQUFRQyxHQUFHLENBQUMsZ0NBQWdDSTtRQUU1QyxJQUFJLENBQUNWLHdEQUFhQSxFQUFFO1lBQ2xCLE1BQU0sSUFBSWlCLE1BQU07UUFDbEI7UUFFQSxNQUFNLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1sQix3REFBYUEsQ0FDbENtQixJQUFJLENBQUMsaUJBQ0xDLE1BQU0sQ0FBQ1Y7UUFFVixJQUFJUSxPQUFPO1lBQ1RiLFFBQVFhLEtBQUssQ0FBQywwQkFBMEJBO1lBQ3hDLE1BQU0sSUFBSUQsTUFBTSxDQUFDLCtCQUErQixFQUFFQyxNQUFNRyxPQUFPLENBQUMsQ0FBQztRQUNuRTtRQUVBaEIsUUFBUUMsR0FBRyxDQUFDLHNDQUFzQ0M7UUFDbEQsT0FBT0E7SUFDVDtJQUVBLE1BQU1lLHlCQUNKWCxFQUFVLEVBQ1ZJLE1BQThCLEVBQzlCUSxZQUFxQixFQUNOO1FBQ2YsSUFBSSxDQUFDdkIsd0RBQWFBLEVBQUU7WUFDbEIsTUFBTSxJQUFJaUIsTUFBTTtRQUNsQjtRQUVBLE1BQU0sRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTWxCLHdEQUFhQSxDQUNsQ21CLElBQUksQ0FBQyxpQkFDTEssTUFBTSxDQUFDO1lBQ05UO1lBQ0FVLGVBQWVGLGdCQUFnQjtZQUMvQkcsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO1FBQ3BDLEdBQ0NDLEVBQUUsQ0FBQyxNQUFNbEI7UUFFWixJQUFJTyxPQUFPO1lBQ1QsTUFBTSxJQUFJRCxNQUFNLENBQUMsc0NBQXNDLEVBQUVDLE1BQU1HLE9BQU8sQ0FBQyxDQUFDO1FBQzFFO0lBQ0Y7SUFFQSxNQUFNUywyQkFDSm5CLEVBQVUsRUFDVkssUUFBMkMsRUFDM0NlLGdCQUF5QixFQUNWO1FBQ2YsSUFBSSxDQUFDL0Isd0RBQWFBLEVBQUU7WUFDbEIsTUFBTSxJQUFJaUIsTUFBTTtRQUNsQjtRQUVBLE1BQU0sRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTWxCLHdEQUFhQSxDQUNsQ21CLElBQUksQ0FBQyxpQkFDTEssTUFBTSxDQUFDO1lBQ05SO1lBQ0FnQixvQkFBb0JEO1lBQ3BCTCxZQUFZLElBQUlDLE9BQU9DLFdBQVc7UUFDcEMsR0FDQ0MsRUFBRSxDQUFDLE1BQU1sQjtRQUVaLElBQUlPLE9BQU87WUFDVCxNQUFNLElBQUlELE1BQU0sQ0FBQyx3Q0FBd0MsRUFBRUMsTUFBTUcsT0FBTyxDQUFDLENBQUM7UUFDNUU7SUFDRjtJQUVBLE1BQU1ZLGdCQUFnQnRCLEVBQVUsRUFBZ0M7UUFDOUQsSUFBSSxDQUFDWCx3REFBYUEsRUFBRTtZQUNsQixNQUFNLElBQUlpQixNQUFNO1FBQ2xCO1FBRUEsTUFBTSxFQUFFaUIsTUFBTUMsZ0JBQWdCLEVBQUVqQixPQUFPa0IsaUJBQWlCLEVBQUUsR0FBRyxNQUFNcEMsd0RBQWFBLENBQzdFbUIsSUFBSSxDQUFDLGlCQUNMa0IsTUFBTSxDQUFDLEtBQ1BSLEVBQUUsQ0FBQyxNQUFNbEIsSUFDVDJCLE1BQU07UUFFVCxJQUFJRixtQkFBbUI7WUFDckIsSUFBSUEsa0JBQWtCRyxJQUFJLEtBQUssWUFBWTtnQkFDekMsT0FBTyxNQUFNLFlBQVk7WUFDM0I7WUFDQSxNQUFNLElBQUl0QixNQUFNLENBQUMsNEJBQTRCLEVBQUVtQixrQkFBa0JmLE9BQU8sQ0FBQyxDQUFDO1FBQzVFO1FBRUEsTUFBTSxFQUFFYSxNQUFNTSxVQUFVLEVBQUV0QixPQUFPdUIsV0FBVyxFQUFFLEdBQUcsTUFBTXpDLHdEQUFhQSxDQUNqRW1CLElBQUksQ0FBQyxVQUNMa0IsTUFBTSxDQUFDLEtBQ1BSLEVBQUUsQ0FBQyxtQkFBbUJsQixJQUN0QitCLEtBQUssQ0FBQztRQUVULElBQUlELGFBQWE7WUFDZixNQUFNLElBQUl4QixNQUFNLENBQUMsc0JBQXNCLEVBQUV3QixZQUFZcEIsT0FBTyxDQUFDLENBQUM7UUFDaEU7UUFFQSxPQUFPLElBQUksQ0FBQ3NCLGlCQUFpQixDQUFDUixrQkFBa0JLLGNBQWMsRUFBRTtJQUNsRTtJQUVBLG1CQUFtQjtJQUNuQixNQUFNSSxZQUFZQyxTQU1qQixFQUFtQjtRQUNsQixNQUFNQyxVQUFVdEMsT0FBT0MsVUFBVTtRQUVqQyxJQUFJLENBQUNULHdEQUFhQSxFQUFFO1lBQ2xCLE1BQU0sSUFBSWlCLE1BQU07UUFDbEI7UUFFQSxNQUFNLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1sQix3REFBYUEsQ0FDbENtQixJQUFJLENBQUMsVUFDTEMsTUFBTSxDQUFDO1lBQ05ULElBQUltQztZQUNKQyxpQkFBaUJGLFVBQVV0QyxjQUFjO1lBQ3pDeUMsY0FBY0gsVUFBVUksV0FBVztZQUNuQzlDLE9BQU8wQyxVQUFVMUMsS0FBSztZQUN0QitDLFNBQVNMLFVBQVVLLE9BQU87WUFDMUJDLG1CQUFtQjtnQkFDakJDLE1BQU07Z0JBQ05DLE9BQU87Z0JBQ1BDLE9BQU87WUFDVDtZQUNBQyxZQUFZO2dCQUNWQyxhQUFhWCxVQUFVVyxXQUFXO2dCQUNsQ0MsYUFBYVosVUFBVUssT0FBTztZQUNoQztRQUNGO1FBRUYsSUFBSWhDLE9BQU87WUFDVCxNQUFNLElBQUlELE1BQU0sQ0FBQyx3QkFBd0IsRUFBRUMsTUFBTUcsT0FBTyxDQUFDLENBQUM7UUFDNUQ7UUFFQSwyQkFBMkI7UUFDM0IsTUFBTSxJQUFJLENBQUNxQyxnQkFBZ0IsQ0FBQ2IsVUFBVXRDLGNBQWM7UUFFcEQsT0FBT3VDO0lBQ1Q7SUFFQSxNQUFNYSxpQkFDSmIsT0FBZSxFQUNmYyxRQUFpQixFQUNqQkMsUUFBaUIsRUFDRjtRQUNmLE1BQU1DLGFBQWtCO1lBQ3RCcEMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO1FBQ3BDO1FBRUEsSUFBSWdDLFVBQVU7WUFDWkUsV0FBV0MsU0FBUyxHQUFHSDtRQUN6QjtRQUNBLElBQUlDLFVBQVU7WUFDWkMsV0FBV0UsU0FBUyxHQUFHSDtRQUN6QjtRQUVBLElBQUksQ0FBQzdELHdEQUFhQSxFQUFFO1lBQ2xCLE1BQU0sSUFBSWlCLE1BQU07UUFDbEI7UUFFQSxNQUFNLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1sQix3REFBYUEsQ0FDbENtQixJQUFJLENBQUMsVUFDTEssTUFBTSxDQUFDc0MsWUFDUGpDLEVBQUUsQ0FBQyxNQUFNaUI7UUFFWixJQUFJNUIsT0FBTztZQUNULE1BQU0sSUFBSUQsTUFBTSxDQUFDLDhCQUE4QixFQUFFQyxNQUFNRyxPQUFPLENBQUMsQ0FBQztRQUNsRTtJQUNGO0lBRUEsTUFBTTRDLGtCQUNKbkIsT0FBZSxFQUNmb0IsVUFBNkIsRUFDN0JuRCxNQUF5RCxFQUMxQztRQUNmLElBQUksQ0FBQ2Ysd0RBQWFBLEVBQUU7WUFDbEIsTUFBTSxJQUFJaUIsTUFBTTtRQUNsQjtRQUVBLHFCQUFxQjtRQUNyQixNQUFNLEVBQUVpQixJQUFJLEVBQUVoQixPQUFPaUQsVUFBVSxFQUFFLEdBQUcsTUFBTW5FLHdEQUFhQSxDQUNwRG1CLElBQUksQ0FBQyxVQUNMa0IsTUFBTSxDQUFDLHFCQUNQUixFQUFFLENBQUMsTUFBTWlCLFNBQ1RSLE1BQU07UUFFVCxJQUFJNkIsWUFBWTtZQUNkLE1BQU0sSUFBSWxELE1BQU0sQ0FBQyw4QkFBOEIsRUFBRWtELFdBQVc5QyxPQUFPLENBQUMsQ0FBQztRQUN2RTtRQUVBLE1BQU0rQyxnQkFBZ0JsQyxLQUFLaUIsaUJBQWlCLElBQUksQ0FBQztRQUNqRGlCLGFBQWEsQ0FBQ0YsV0FBVyxHQUFHbkQ7UUFFNUIsTUFBTSxFQUFFRyxLQUFLLEVBQUUsR0FBRyxNQUFNbEIsd0RBQWFBLENBQ2xDbUIsSUFBSSxDQUFDLFVBQ0xLLE1BQU0sQ0FBQztZQUNOMkIsbUJBQW1CaUI7WUFDbkIxQyxZQUFZLElBQUlDLE9BQU9DLFdBQVc7UUFDcEMsR0FDQ0MsRUFBRSxDQUFDLE1BQU1pQjtRQUVaLElBQUk1QixPQUFPO1lBQ1QsTUFBTSxJQUFJRCxNQUFNLENBQUMsK0JBQStCLEVBQUVDLE1BQU1HLE9BQU8sQ0FBQyxDQUFDO1FBQ25FO0lBQ0Y7SUFFQSwyQkFBMkI7SUFDM0IsTUFBTWdELGlCQUFpQkMsS0FBYyxFQUEyQjtRQUM5RCxJQUFJLENBQUN0RSx3REFBYUEsRUFBRTtZQUNsQixNQUFNLElBQUlpQixNQUFNO1FBQ2xCO1FBRUEsSUFBSXNELFFBQVF2RSx3REFBYUEsQ0FDdEJtQixJQUFJLENBQUMsa0JBQ0xrQixNQUFNLENBQUMsS0FDUFIsRUFBRSxDQUFDLGFBQWE7UUFFbkIsSUFBSXlDLE9BQU87WUFDVEMsUUFBUUEsTUFBTUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUVGLE1BQU0sQ0FBQyxDQUFDO1FBQzNDO1FBRUEsTUFBTSxFQUFFcEMsSUFBSSxFQUFFaEIsS0FBSyxFQUFFLEdBQUcsTUFBTXFELE1BQU03QixLQUFLLENBQUMsZUFBZStCLEtBQUssQ0FBQztRQUUvRCxJQUFJdkQsT0FBTztZQUNULE1BQU0sSUFBSUQsTUFBTSxDQUFDLDhCQUE4QixFQUFFQyxNQUFNRyxPQUFPLENBQUMsQ0FBQztRQUNsRTtRQUVBLE9BQU9hLE1BQU13QyxJQUFJLElBQUksQ0FBQ0MsaUJBQWlCLEtBQUssRUFBRTtJQUNoRDtJQUVBLE1BQU1DLHVCQUF1QmpFLEVBQVUsRUFBaUI7UUFDdEQsSUFBSSxDQUFDWCx3REFBYUEsRUFBRTtZQUNsQixNQUFNLElBQUlpQixNQUFNO1FBQ2xCO1FBRUEsZ0NBQWdDO1FBQ2hDLE1BQU0sRUFBRWlCLE1BQU0yQyxXQUFXLEVBQUUsR0FBRyxNQUFNN0Usd0RBQWFBLENBQzlDbUIsSUFBSSxDQUFDLGtCQUNMa0IsTUFBTSxDQUFDLGVBQ1BSLEVBQUUsQ0FBQyxNQUFNbEIsSUFDVDJCLE1BQU07UUFFVCxNQUFNd0MsZUFBZUQsYUFBYUUsZUFBZTtRQUVqRCxNQUFNLEVBQUU3RCxLQUFLLEVBQUUsR0FBRyxNQUFNbEIsd0RBQWFBLENBQ2xDbUIsSUFBSSxDQUFDLGtCQUNMSyxNQUFNLENBQUM7WUFDTnVELGFBQWFELGVBQWU7UUFDOUIsR0FDQ2pELEVBQUUsQ0FBQyxNQUFNbEI7UUFFWixJQUFJTyxPQUFPO1lBQ1QsTUFBTSxJQUFJRCxNQUFNLENBQUMsb0NBQW9DLEVBQUVDLE1BQU1HLE9BQU8sQ0FBQyxDQUFDO1FBQ3hFO0lBQ0Y7SUFFQSx5QkFBeUI7SUFDekIsTUFBY3FDLGlCQUFpQm5ELGNBQXNCLEVBQWlCO1FBQ3BFLElBQUksQ0FBQ1Asd0RBQWFBLEVBQUU7WUFDbEIsTUFBTSxJQUFJaUIsTUFBTTtRQUNsQjtRQUVBLE1BQU0sRUFBRStELEtBQUssRUFBRTlELEtBQUssRUFBRSxHQUFHLE1BQU1sQix3REFBYUEsQ0FDekNtQixJQUFJLENBQUMsVUFDTGtCLE1BQU0sQ0FBQyxLQUFLO1lBQUUyQyxPQUFPO1lBQVNDLE1BQU07UUFBSyxHQUN6Q3BELEVBQUUsQ0FBQyxtQkFBbUJ0QjtRQUV6QixJQUFJVyxPQUFPO1lBQ1QsTUFBTSxJQUFJRCxNQUFNLENBQUMsd0JBQXdCLEVBQUVDLE1BQU1HLE9BQU8sQ0FBQyxDQUFDO1FBQzVEO1FBRUEsTUFBTSxFQUFFSCxPQUFPZ0UsV0FBVyxFQUFFLEdBQUcsTUFBTWxGLHdEQUFhQSxDQUMvQ21CLElBQUksQ0FBQyxpQkFDTEssTUFBTSxDQUFDO1lBQUVWLGNBQWNrRSxTQUFTO1FBQUUsR0FDbENuRCxFQUFFLENBQUMsTUFBTXRCO1FBRVosSUFBSTJFLGFBQWE7WUFDZixNQUFNLElBQUlqRSxNQUFNLENBQUMsOEJBQThCLEVBQUVpRSxZQUFZN0QsT0FBTyxDQUFDLENBQUM7UUFDeEU7SUFDRjtJQUVRc0Isa0JBQWtCUixnQkFBcUIsRUFBRUssVUFBaUIsRUFBZ0I7UUFDaEYsT0FBTztZQUNMN0IsSUFBSXdCLGlCQUFpQnhCLEVBQUU7WUFDdkJSLE9BQU9nQyxpQkFBaUJoQyxLQUFLO1lBQzdCWSxRQUFRb0IsaUJBQWlCcEIsTUFBTTtZQUMvQm9FLFdBQVcsSUFBSXhELEtBQUtRLGlCQUFpQmlELFVBQVU7WUFDL0NDLFdBQVcsSUFBSTFELEtBQUtRLGlCQUFpQlQsVUFBVTtZQUMvQ3RCLFFBQVErQixpQkFBaUJ0QixPQUFPO1lBQ2hDeUUsYUFBYW5ELGlCQUFpQnJCLFlBQVk7WUFDMUNpQixrQkFBa0JJLGlCQUFpQkgsa0JBQWtCO1lBQ3JEVCxjQUFjWSxpQkFBaUJWLGFBQWE7WUFDNUNULFVBQVVtQixpQkFBaUJuQixRQUFRLElBQUksQ0FBQztZQUN4Q3VFLFFBQVEvQyxXQUFXa0MsR0FBRyxDQUFDLElBQUksQ0FBQ2MsVUFBVTtRQUN4QztJQUNGO0lBRVFBLFdBQVczQyxTQUFjLEVBQVM7UUFDeEMsT0FBTztZQUNMbEMsSUFBSWtDLFVBQVVsQyxFQUFFO1lBQ2hCSixnQkFBZ0JzQyxVQUFVRSxlQUFlO1lBQ3pDRSxhQUFhSixVQUFVRyxZQUFZO1lBQ25DN0MsT0FBTzBDLFVBQVUxQyxLQUFLO1lBQ3RCK0MsU0FBU0wsVUFBVUssT0FBTztZQUMxQlUsVUFBVWYsVUFBVWtCLFNBQVM7WUFDN0JGLFVBQVVoQixVQUFVbUIsU0FBUztZQUM3QnlCLGtCQUFrQjVDLFVBQVVNLGlCQUFpQixJQUFJO2dCQUMvQ0MsTUFBTTtnQkFDTkMsT0FBTztnQkFDUEMsT0FBTztZQUNUO1lBQ0FvQyxXQUFXN0MsVUFBVVUsVUFBVSxJQUFJLENBQUM7WUFDcEM0QixXQUFXLElBQUl4RCxLQUFLa0IsVUFBVXVDLFVBQVU7WUFDeENDLFdBQVcsSUFBSTFELEtBQUtrQixVQUFVbkIsVUFBVTtRQUMxQztJQUNGO0lBRVFpRCxrQkFBa0J6QyxJQUFTLEVBQWdCO1FBQ2pELE9BQU87WUFDTHZCLElBQUl1QixLQUFLdkIsRUFBRTtZQUNYMkQsT0FBT3BDLEtBQUtvQyxLQUFLO1lBQ2pCbkUsT0FBTytCLEtBQUsvQixLQUFLO1lBQ2pCb0YsUUFBUXJELEtBQUtxRCxNQUFNO1lBQ25CSSxVQUFVekQsS0FBSzBELFNBQVM7WUFDeEJDLFlBQVkzRCxLQUFLNkMsV0FBVztZQUM1QkksV0FBVyxJQUFJeEQsS0FBS08sS0FBS2tELFVBQVU7UUFDckM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHNwZWFrZGVjay93ZWIvLi9zcmMvc2VydmljZXMvZGF0YWJhc2UudHM/M2Y2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdXBhYmFzZSwgc3VwYWJhc2VBZG1pbiB9IGZyb20gJy4uL2xpYi9zdXBhYmFzZSc7XG5pbXBvcnQgeyBQcmVzZW50YXRpb24sIFNsaWRlLCBGYWxsYmFja0RlY2sgfSBmcm9tICdAc3BlYWtkZWNrL3NoYXJlZCc7XG5cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZVNlcnZpY2Uge1xuICAvLyBQcmVzZW50YXRpb24gb3BlcmF0aW9uc1xuICBhc3luYyBjcmVhdGVQcmVzZW50YXRpb24odGl0bGU6IHN0cmluZywgdXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2VTZXJ2aWNlLmNyZWF0ZVByZXNlbnRhdGlvbiBjYWxsZWQgd2l0aDonLCB7IHRpdGxlLCB1c2VySWQgfSk7XG4gICAgY29uc3QgcHJlc2VudGF0aW9uSWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgIGNvbnNvbGUubG9nKCdHZW5lcmF0ZWQgcHJlc2VudGF0aW9uIElEOicsIHByZXNlbnRhdGlvbklkKTtcbiAgICBcbiAgICBjb25zdCBpbnNlcnREYXRhID0ge1xuICAgICAgaWQ6IHByZXNlbnRhdGlvbklkLFxuICAgICAgdGl0bGU6IHRpdGxlLnRyaW0oKSxcbiAgICAgIHVzZXJfaWQ6IHVzZXJJZCB8fCBudWxsLFxuICAgICAgdG90YWxfc2xpZGVzOiAwLFxuICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICBtZXRhZGF0YToge30sXG4gICAgfTtcbiAgICBjb25zb2xlLmxvZygnSW5zZXJ0aW5nIHByZXNlbnRhdGlvbiBkYXRhOicsIGluc2VydERhdGEpO1xuICAgIFxuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBhZG1pbiBjbGllbnQgbm90IGNvbmZpZ3VyZWQgLSBtaXNzaW5nIFNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVknKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ3ByZXNlbnRhdGlvbnMnKVxuICAgICAgLmluc2VydChpbnNlcnREYXRhKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgaW5zZXJ0IGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBwcmVzZW50YXRpb246ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGNyZWF0ZWQgcHJlc2VudGF0aW9uOicsIHByZXNlbnRhdGlvbklkKTtcbiAgICByZXR1cm4gcHJlc2VudGF0aW9uSWQ7XG4gIH1cblxuICBhc3luYyB1cGRhdGVQcmVzZW50YXRpb25TdGF0dXMoXG4gICAgaWQ6IHN0cmluZywgXG4gICAgc3RhdHVzOiBQcmVzZW50YXRpb25bJ3N0YXR1cyddLFxuICAgIGVycm9yTWVzc2FnZT86IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgYWRtaW4gY2xpZW50IG5vdCBjb25maWd1cmVkJyk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdwcmVzZW50YXRpb25zJylcbiAgICAgIC51cGRhdGUoeyBcbiAgICAgICAgc3RhdHVzLCBcbiAgICAgICAgZXJyb3JfbWVzc2FnZTogZXJyb3JNZXNzYWdlIHx8IG51bGwsXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIH0pXG4gICAgICAuZXEoJ2lkJywgaWQpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cGRhdGUgcHJlc2VudGF0aW9uIHN0YXR1czogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVByZXNlbnRhdGlvbk1ldGFkYXRhKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgbWV0YWRhdGE6IFBhcnRpYWw8UHJlc2VudGF0aW9uWydtZXRhZGF0YSddPixcbiAgICBnZW5lcmF0aW9uVGltZU1zPzogbnVtYmVyXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBhZG1pbiBjbGllbnQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ3ByZXNlbnRhdGlvbnMnKVxuICAgICAgLnVwZGF0ZSh7IFxuICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgZ2VuZXJhdGlvbl90aW1lX21zOiBnZW5lcmF0aW9uVGltZU1zLFxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9KVxuICAgICAgLmVxKCdpZCcsIGlkKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIHByZXNlbnRhdGlvbiBtZXRhZGF0YTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFByZXNlbnRhdGlvbihpZDogc3RyaW5nKTogUHJvbWlzZTxQcmVzZW50YXRpb24gfCBudWxsPiB7XG4gICAgaWYgKCFzdXBhYmFzZUFkbWluKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1cGFiYXNlIGFkbWluIGNsaWVudCBub3QgY29uZmlndXJlZCcpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB7IGRhdGE6IHByZXNlbnRhdGlvbkRhdGEsIGVycm9yOiBwcmVzZW50YXRpb25FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ3ByZXNlbnRhdGlvbnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAocHJlc2VudGF0aW9uRXJyb3IpIHtcbiAgICAgIGlmIChwcmVzZW50YXRpb25FcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7XG4gICAgICAgIHJldHVybiBudWxsOyAvLyBOb3QgZm91bmRcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBwcmVzZW50YXRpb246ICR7cHJlc2VudGF0aW9uRXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGE6IHNsaWRlc0RhdGEsIGVycm9yOiBzbGlkZXNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ3NsaWRlcycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgncHJlc2VudGF0aW9uX2lkJywgaWQpXG4gICAgICAub3JkZXIoJ3NsaWRlX251bWJlcicpO1xuXG4gICAgaWYgKHNsaWRlc0Vycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgc2xpZGVzOiAke3NsaWRlc0Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubWFwVG9QcmVzZW50YXRpb24ocHJlc2VudGF0aW9uRGF0YSwgc2xpZGVzRGF0YSB8fCBbXSk7XG4gIH1cblxuICAvLyBTbGlkZSBvcGVyYXRpb25zXG4gIGFzeW5jIGNyZWF0ZVNsaWRlKHNsaWRlRGF0YToge1xuICAgIHByZXNlbnRhdGlvbklkOiBzdHJpbmc7XG4gICAgc2xpZGVOdW1iZXI6IG51bWJlcjtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICBpbWFnZVByb21wdD86IHN0cmluZztcbiAgfSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3Qgc2xpZGVJZCA9IGNyeXB0by5yYW5kb21VVUlEKCk7XG5cbiAgICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgYWRtaW4gY2xpZW50IG5vdCBjb25maWd1cmVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ3NsaWRlcycpXG4gICAgICAuaW5zZXJ0KHtcbiAgICAgICAgaWQ6IHNsaWRlSWQsXG4gICAgICAgIHByZXNlbnRhdGlvbl9pZDogc2xpZGVEYXRhLnByZXNlbnRhdGlvbklkLFxuICAgICAgICBzbGlkZV9udW1iZXI6IHNsaWRlRGF0YS5zbGlkZU51bWJlcixcbiAgICAgICAgdGl0bGU6IHNsaWRlRGF0YS50aXRsZSxcbiAgICAgICAgY29udGVudDogc2xpZGVEYXRhLmNvbnRlbnQsXG4gICAgICAgIGdlbmVyYXRpb25fc3RhdHVzOiB7XG4gICAgICAgICAgdGV4dDogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgaW1hZ2U6ICdwZW5kaW5nJyxcbiAgICAgICAgICBhdWRpbzogJ3BlbmRpbmcnLFxuICAgICAgICB9LFxuICAgICAgICBhaV9wcm9tcHRzOiB7XG4gICAgICAgICAgaW1hZ2VQcm9tcHQ6IHNsaWRlRGF0YS5pbWFnZVByb21wdCxcbiAgICAgICAgICBhdWRpb1NjcmlwdDogc2xpZGVEYXRhLmNvbnRlbnQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIHNsaWRlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRvdGFsIHNsaWRlIGNvdW50XG4gICAgYXdhaXQgdGhpcy51cGRhdGVTbGlkZUNvdW50KHNsaWRlRGF0YS5wcmVzZW50YXRpb25JZCk7XG5cbiAgICByZXR1cm4gc2xpZGVJZDtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVNsaWRlTWVkaWEoXG4gICAgc2xpZGVJZDogc3RyaW5nLFxuICAgIGltYWdlVXJsPzogc3RyaW5nLFxuICAgIGF1ZGlvVXJsPzogc3RyaW5nXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHtcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9O1xuXG4gICAgaWYgKGltYWdlVXJsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltYWdlX3VybCA9IGltYWdlVXJsO1xuICAgIH1cbiAgICBpZiAoYXVkaW9VcmwpIHtcbiAgICAgIHVwZGF0ZURhdGEuYXVkaW9fdXJsID0gYXVkaW9Vcmw7XG4gICAgfVxuXG4gICAgaWYgKCFzdXBhYmFzZUFkbWluKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1cGFiYXNlIGFkbWluIGNsaWVudCBub3QgY29uZmlndXJlZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdzbGlkZXMnKVxuICAgICAgLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICAgICAgLmVxKCdpZCcsIHNsaWRlSWQpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cGRhdGUgc2xpZGUgbWVkaWE6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVTbGlkZVN0YXR1cyhcbiAgICBzbGlkZUlkOiBzdHJpbmcsXG4gICAgc3RhdHVzVHlwZTogJ2ltYWdlJyB8ICdhdWRpbycsXG4gICAgc3RhdHVzOiAncGVuZGluZycgfCAncHJvY2Vzc2luZycgfCAnY29tcGxldGVkJyB8ICdmYWlsZWQnXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBhZG1pbiBjbGllbnQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IGN1cnJlbnQgc3RhdHVzXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ3NsaWRlcycpXG4gICAgICAuc2VsZWN0KCdnZW5lcmF0aW9uX3N0YXR1cycpXG4gICAgICAuZXEoJ2lkJywgc2xpZGVJZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChmZXRjaEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBzbGlkZSBzdGF0dXM6ICR7ZmV0Y2hFcnJvci5tZXNzYWdlfWApO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRTdGF0dXMgPSBkYXRhLmdlbmVyYXRpb25fc3RhdHVzIHx8IHt9O1xuICAgIGN1cnJlbnRTdGF0dXNbc3RhdHVzVHlwZV0gPSBzdGF0dXM7XG5cbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnc2xpZGVzJylcbiAgICAgIC51cGRhdGUoeyBcbiAgICAgICAgZ2VuZXJhdGlvbl9zdGF0dXM6IGN1cnJlbnRTdGF0dXMsXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIH0pXG4gICAgICAuZXEoJ2lkJywgc2xpZGVJZCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHVwZGF0ZSBzbGlkZSBzdGF0dXM6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvLyBGYWxsYmFjayBkZWNrIG9wZXJhdGlvbnNcbiAgYXN5bmMgZ2V0RmFsbGJhY2tEZWNrcyh0b3BpYz86IHN0cmluZyk6IFByb21pc2U8RmFsbGJhY2tEZWNrW10+IHtcbiAgICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgYWRtaW4gY2xpZW50IG5vdCBjb25maWd1cmVkJyk7XG4gICAgfVxuICAgIFxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdmYWxsYmFja19kZWNrcycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnaXNfYWN0aXZlJywgdHJ1ZSk7XG5cbiAgICBpZiAodG9waWMpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuaWxpa2UoJ3RvcGljJywgYCUke3RvcGljfSVgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeS5vcmRlcigndXNhZ2VfY291bnQnKS5saW1pdCg1KTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IGZhbGxiYWNrIGRlY2tzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE/Lm1hcCh0aGlzLm1hcFRvRmFsbGJhY2tEZWNrKSB8fCBbXTtcbiAgfVxuXG4gIGFzeW5jIGluY3JlbWVudEZhbGxiYWNrVXNhZ2UoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBhZG1pbiBjbGllbnQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRmlyc3QgZ2V0IGN1cnJlbnQgdXNhZ2UgY291bnRcbiAgICBjb25zdCB7IGRhdGE6IGN1cnJlbnREYXRhIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnZmFsbGJhY2tfZGVja3MnKVxuICAgICAgLnNlbGVjdCgndXNhZ2VfY291bnQnKVxuICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgLnNpbmdsZSgpO1xuICAgICAgXG4gICAgY29uc3QgY3VycmVudENvdW50ID0gY3VycmVudERhdGE/LnVzYWdlX2NvdW50IHx8IDA7XG4gICAgXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ2ZhbGxiYWNrX2RlY2tzJylcbiAgICAgIC51cGRhdGUoeyBcbiAgICAgICAgdXNhZ2VfY291bnQ6IGN1cnJlbnRDb3VudCArIDEsXG4gICAgICB9KVxuICAgICAgLmVxKCdpZCcsIGlkKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gaW5jcmVtZW50IGZhbGxiYWNrIHVzYWdlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLy8gUHJpdmF0ZSBoZWxwZXIgbWV0aG9kc1xuICBwcml2YXRlIGFzeW5jIHVwZGF0ZVNsaWRlQ291bnQocHJlc2VudGF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBhZG1pbiBjbGllbnQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgeyBjb3VudCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdzbGlkZXMnKVxuICAgICAgLnNlbGVjdCgnKicsIHsgY291bnQ6ICdleGFjdCcsIGhlYWQ6IHRydWUgfSlcbiAgICAgIC5lcSgncHJlc2VudGF0aW9uX2lkJywgcHJlc2VudGF0aW9uSWQpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjb3VudCBzbGlkZXM6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ3ByZXNlbnRhdGlvbnMnKVxuICAgICAgLnVwZGF0ZSh7IHRvdGFsX3NsaWRlczogY291bnQgfHwgMCB9KVxuICAgICAgLmVxKCdpZCcsIHByZXNlbnRhdGlvbklkKTtcblxuICAgIGlmICh1cGRhdGVFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIHNsaWRlIGNvdW50OiAke3VwZGF0ZUVycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBtYXBUb1ByZXNlbnRhdGlvbihwcmVzZW50YXRpb25EYXRhOiBhbnksIHNsaWRlc0RhdGE6IGFueVtdKTogUHJlc2VudGF0aW9uIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHByZXNlbnRhdGlvbkRhdGEuaWQsXG4gICAgICB0aXRsZTogcHJlc2VudGF0aW9uRGF0YS50aXRsZSxcbiAgICAgIHN0YXR1czogcHJlc2VudGF0aW9uRGF0YS5zdGF0dXMsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKHByZXNlbnRhdGlvbkRhdGEuY3JlYXRlZF9hdCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKHByZXNlbnRhdGlvbkRhdGEudXBkYXRlZF9hdCksXG4gICAgICB1c2VySWQ6IHByZXNlbnRhdGlvbkRhdGEudXNlcl9pZCxcbiAgICAgIHRvdGFsU2xpZGVzOiBwcmVzZW50YXRpb25EYXRhLnRvdGFsX3NsaWRlcyxcbiAgICAgIGdlbmVyYXRpb25UaW1lTXM6IHByZXNlbnRhdGlvbkRhdGEuZ2VuZXJhdGlvbl90aW1lX21zLFxuICAgICAgZXJyb3JNZXNzYWdlOiBwcmVzZW50YXRpb25EYXRhLmVycm9yX21lc3NhZ2UsXG4gICAgICBtZXRhZGF0YTogcHJlc2VudGF0aW9uRGF0YS5tZXRhZGF0YSB8fCB7fSxcbiAgICAgIHNsaWRlczogc2xpZGVzRGF0YS5tYXAodGhpcy5tYXBUb1NsaWRlKSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBtYXBUb1NsaWRlKHNsaWRlRGF0YTogYW55KTogU2xpZGUge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogc2xpZGVEYXRhLmlkLFxuICAgICAgcHJlc2VudGF0aW9uSWQ6IHNsaWRlRGF0YS5wcmVzZW50YXRpb25faWQsXG4gICAgICBzbGlkZU51bWJlcjogc2xpZGVEYXRhLnNsaWRlX251bWJlcixcbiAgICAgIHRpdGxlOiBzbGlkZURhdGEudGl0bGUsXG4gICAgICBjb250ZW50OiBzbGlkZURhdGEuY29udGVudCxcbiAgICAgIGltYWdlVXJsOiBzbGlkZURhdGEuaW1hZ2VfdXJsLFxuICAgICAgYXVkaW9Vcmw6IHNsaWRlRGF0YS5hdWRpb191cmwsXG4gICAgICBnZW5lcmF0aW9uU3RhdHVzOiBzbGlkZURhdGEuZ2VuZXJhdGlvbl9zdGF0dXMgfHwge1xuICAgICAgICB0ZXh0OiAncGVuZGluZycsXG4gICAgICAgIGltYWdlOiAncGVuZGluZycsXG4gICAgICAgIGF1ZGlvOiAncGVuZGluZycsXG4gICAgICB9LFxuICAgICAgYWlQcm9tcHRzOiBzbGlkZURhdGEuYWlfcHJvbXB0cyB8fCB7fSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoc2xpZGVEYXRhLmNyZWF0ZWRfYXQpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZShzbGlkZURhdGEudXBkYXRlZF9hdCksXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgbWFwVG9GYWxsYmFja0RlY2soZGF0YTogYW55KTogRmFsbGJhY2tEZWNrIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICB0b3BpYzogZGF0YS50b3BpYyxcbiAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgc2xpZGVzOiBkYXRhLnNsaWRlcyxcbiAgICAgIGlzQWN0aXZlOiBkYXRhLmlzX2FjdGl2ZSxcbiAgICAgIHVzYWdlQ291bnQ6IGRhdGEudXNhZ2VfY291bnQsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGRhdGEuY3JlYXRlZF9hdCksXG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInN1cGFiYXNlQWRtaW4iLCJEYXRhYmFzZVNlcnZpY2UiLCJjcmVhdGVQcmVzZW50YXRpb24iLCJ0aXRsZSIsInVzZXJJZCIsImNvbnNvbGUiLCJsb2ciLCJwcmVzZW50YXRpb25JZCIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJpbnNlcnREYXRhIiwiaWQiLCJ0cmltIiwidXNlcl9pZCIsInRvdGFsX3NsaWRlcyIsInN0YXR1cyIsIm1ldGFkYXRhIiwiRXJyb3IiLCJlcnJvciIsImZyb20iLCJpbnNlcnQiLCJtZXNzYWdlIiwidXBkYXRlUHJlc2VudGF0aW9uU3RhdHVzIiwiZXJyb3JNZXNzYWdlIiwidXBkYXRlIiwiZXJyb3JfbWVzc2FnZSIsInVwZGF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcSIsInVwZGF0ZVByZXNlbnRhdGlvbk1ldGFkYXRhIiwiZ2VuZXJhdGlvblRpbWVNcyIsImdlbmVyYXRpb25fdGltZV9tcyIsImdldFByZXNlbnRhdGlvbiIsImRhdGEiLCJwcmVzZW50YXRpb25EYXRhIiwicHJlc2VudGF0aW9uRXJyb3IiLCJzZWxlY3QiLCJzaW5nbGUiLCJjb2RlIiwic2xpZGVzRGF0YSIsInNsaWRlc0Vycm9yIiwib3JkZXIiLCJtYXBUb1ByZXNlbnRhdGlvbiIsImNyZWF0ZVNsaWRlIiwic2xpZGVEYXRhIiwic2xpZGVJZCIsInByZXNlbnRhdGlvbl9pZCIsInNsaWRlX251bWJlciIsInNsaWRlTnVtYmVyIiwiY29udGVudCIsImdlbmVyYXRpb25fc3RhdHVzIiwidGV4dCIsImltYWdlIiwiYXVkaW8iLCJhaV9wcm9tcHRzIiwiaW1hZ2VQcm9tcHQiLCJhdWRpb1NjcmlwdCIsInVwZGF0ZVNsaWRlQ291bnQiLCJ1cGRhdGVTbGlkZU1lZGlhIiwiaW1hZ2VVcmwiLCJhdWRpb1VybCIsInVwZGF0ZURhdGEiLCJpbWFnZV91cmwiLCJhdWRpb191cmwiLCJ1cGRhdGVTbGlkZVN0YXR1cyIsInN0YXR1c1R5cGUiLCJmZXRjaEVycm9yIiwiY3VycmVudFN0YXR1cyIsImdldEZhbGxiYWNrRGVja3MiLCJ0b3BpYyIsInF1ZXJ5IiwiaWxpa2UiLCJsaW1pdCIsIm1hcCIsIm1hcFRvRmFsbGJhY2tEZWNrIiwiaW5jcmVtZW50RmFsbGJhY2tVc2FnZSIsImN1cnJlbnREYXRhIiwiY3VycmVudENvdW50IiwidXNhZ2VfY291bnQiLCJjb3VudCIsImhlYWQiLCJ1cGRhdGVFcnJvciIsImNyZWF0ZWRBdCIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkQXQiLCJ0b3RhbFNsaWRlcyIsInNsaWRlcyIsIm1hcFRvU2xpZGUiLCJnZW5lcmF0aW9uU3RhdHVzIiwiYWlQcm9tcHRzIiwiaXNBY3RpdmUiLCJpc19hY3RpdmUiLCJ1c2FnZUNvdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/services/database.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/fallback-manager.ts":
/*!******************************************!*\
  !*** ./src/services/fallback-manager.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FallbackManager: () => (/* binding */ FallbackManager)\n/* harmony export */ });\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./database */ \"(rsc)/./src/services/database.ts\");\n\nclass FallbackManager {\n    constructor(){\n        this.db = new _database__WEBPACK_IMPORTED_MODULE_0__.DatabaseService();\n    }\n    async getFallbackPresentation(topic) {\n        // Try to find a relevant fallback deck\n        const fallbackDecks = await this.db.getFallbackDecks(topic);\n        let selectedDeck;\n        if (fallbackDecks.length === 0) {\n            // No fallback decks found, create a generic one\n            selectedDeck = this.createGenericFallbackDeck(topic);\n        } else {\n            // Select the least used fallback deck\n            selectedDeck = fallbackDecks[0];\n            // Increment usage count\n            try {\n                await this.db.incrementFallbackUsage(selectedDeck.id);\n            } catch (error) {\n                console.error(\"Failed to increment fallback usage:\", error);\n            }\n        }\n        // Convert fallback deck to presentation format\n        return this.convertFallbackToPresentation(selectedDeck);\n    }\n    createGenericFallbackDeck(topic) {\n        const slides = [\n            {\n                slideNumber: 1,\n                title: `Introduction to ${topic}`,\n                content: `Welcome to this presentation about ${topic}. We'll explore the key concepts and insights in this area.`,\n                imageUrl: \"https://via.placeholder.com/800x600/4F46E5/FFFFFF?text=Introduction\",\n                audioUrl: \"\"\n            },\n            {\n                slideNumber: 2,\n                title: \"Key Concepts\",\n                content: `Let's dive into the fundamental concepts that make ${topic} important and relevant in today's context.`,\n                imageUrl: \"https://via.placeholder.com/800x600/059669/FFFFFF?text=Key+Concepts\",\n                audioUrl: \"\"\n            },\n            {\n                slideNumber: 3,\n                title: \"Applications and Examples\",\n                content: `Here are some practical applications and real-world examples of ${topic} that demonstrate its value.`,\n                imageUrl: \"https://via.placeholder.com/800x600/DC2626/FFFFFF?text=Applications\",\n                audioUrl: \"\"\n            },\n            {\n                slideNumber: 4,\n                title: \"Conclusion\",\n                content: `To conclude, ${topic} represents an important area with significant potential for future development and applications.`,\n                imageUrl: \"https://via.placeholder.com/800x600/D97706/FFFFFF?text=Conclusion\",\n                audioUrl: \"\"\n            }\n        ];\n        return {\n            id: crypto.randomUUID(),\n            topic: this.categorizeTopicGeneric(topic),\n            title: `${topic} - Overview`,\n            slides,\n            isActive: true,\n            usageCount: 0,\n            createdAt: new Date()\n        };\n    }\n    convertFallbackToPresentation(fallbackDeck) {\n        const presentationId = crypto.randomUUID();\n        const now = new Date();\n        const slides = fallbackDeck.slides.map((fallbackSlide)=>({\n                id: crypto.randomUUID(),\n                presentationId: presentationId,\n                slideNumber: fallbackSlide.slideNumber,\n                title: fallbackSlide.title,\n                content: fallbackSlide.content,\n                imageUrl: fallbackSlide.imageUrl,\n                audioUrl: fallbackSlide.audioUrl,\n                generationStatus: {\n                    text: \"completed\",\n                    image: \"completed\",\n                    audio: fallbackSlide.audioUrl ? \"completed\" : \"failed\"\n                },\n                aiPrompts: {\n                    imagePrompt: `Visual representation of: ${fallbackSlide.title}`,\n                    audioScript: fallbackSlide.content\n                },\n                createdAt: now,\n                updatedAt: now\n            }));\n        return {\n            id: presentationId,\n            title: fallbackDeck.title,\n            status: \"completed\",\n            createdAt: now,\n            updatedAt: now,\n            userId: undefined,\n            slides,\n            totalSlides: slides.length,\n            generationTimeMs: 0,\n            errorMessage: undefined,\n            metadata: {\n                // Mark as fallback for transparency\n                isFallback: true,\n                fallbackDeckId: fallbackDeck.id,\n                fallbackReason: \"API quota exceeded\"\n            }\n        };\n    }\n    categorizeTopicGeneric(topic) {\n        const topicLower = topic.toLowerCase();\n        // Simple keyword matching for categorization\n        if (topicLower.includes(\"tech\") || topicLower.includes(\"ai\") || topicLower.includes(\"software\") || topicLower.includes(\"computer\")) {\n            return \"Technology\";\n        }\n        if (topicLower.includes(\"business\") || topicLower.includes(\"market\") || topicLower.includes(\"startup\") || topicLower.includes(\"entrepreneur\")) {\n            return \"Business\";\n        }\n        if (topicLower.includes(\"education\") || topicLower.includes(\"learn\") || topicLower.includes(\"school\") || topicLower.includes(\"university\")) {\n            return \"Education\";\n        }\n        if (topicLower.includes(\"science\") || topicLower.includes(\"research\") || topicLower.includes(\"study\")) {\n            return \"Science\";\n        }\n        if (topicLower.includes(\"health\") || topicLower.includes(\"medical\") || topicLower.includes(\"wellness\")) {\n            return \"Health\";\n        }\n        if (topicLower.includes(\"environment\") || topicLower.includes(\"climate\") || topicLower.includes(\"sustainability\")) {\n            return \"Environment\";\n        }\n        if (topicLower.includes(\"art\") || topicLower.includes(\"design\") || topicLower.includes(\"creative\")) {\n            return \"Arts\";\n        }\n        if (topicLower.includes(\"history\") || topicLower.includes(\"past\") || topicLower.includes(\"historical\")) {\n            return \"History\";\n        }\n        // Default category\n        return \"General\";\n    }\n    async checkApiQuotas() {\n        // For development, always allow AI generation unless explicitly disabled\n        // In production, this would check actual API quotas\n        const forceUseFallback = process.env.FORCE_USE_FALLBACK === \"true\";\n        if (forceUseFallback) {\n            console.log(\"Force fallback is enabled via environment variable\");\n            return {\n                hasQuotaAvailable: false,\n                limitedServices: [\n                    \"gemini\",\n                    \"nanoBanana\"\n                ]\n            };\n        }\n        // For development/testing, assume quotas are available\n        // This allows us to test the actual AI services\n        console.log(\"API quotas check: All services available for development\");\n        return {\n            hasQuotaAvailable: true,\n            limitedServices: []\n        };\n    }\n    async shouldUseFallback(topic) {\n        const quotaStatus = await this.checkApiQuotas();\n        if (!quotaStatus.hasQuotaAvailable) {\n            return {\n                useFallback: true,\n                reason: `API quota exceeded for services: ${quotaStatus.limitedServices.join(\", \")}`\n            };\n        }\n        // Check for other conditions that might trigger fallback\n        // e.g., service availability, response time, etc.\n        return {\n            useFallback: false\n        };\n    }\n    async createDefaultFallbackDecks() {\n        // This method would be used to seed the database with default fallback decks\n        const defaultDecks = [\n            this.createTechnologyFallbackDeck(),\n            this.createBusinessFallbackDeck(),\n            this.createEducationFallbackDeck()\n        ];\n        // In a real implementation, you'd insert these into the database\n        console.log(\"Default fallback decks created:\", defaultDecks.length);\n    }\n    createTechnologyFallbackDeck() {\n        return {\n            id: crypto.randomUUID(),\n            topic: \"Technology\",\n            title: \"Technology Overview\",\n            slides: [\n                {\n                    slideNumber: 1,\n                    title: \"Introduction to Technology\",\n                    content: \"Technology shapes our world in countless ways, from the devices we use daily to the systems that power our economy.\",\n                    imageUrl: \"https://via.placeholder.com/800x600/4F46E5/FFFFFF?text=Technology\",\n                    audioUrl: \"\"\n                },\n                {\n                    slideNumber: 2,\n                    title: \"Digital Transformation\",\n                    content: \"Organizations worldwide are embracing digital transformation to stay competitive and meet evolving customer expectations.\",\n                    imageUrl: \"https://via.placeholder.com/800x600/059669/FFFFFF?text=Digital+Transformation\",\n                    audioUrl: \"\"\n                },\n                {\n                    slideNumber: 3,\n                    title: \"Innovation and Impact\",\n                    content: \"Technological innovation continues to drive progress, creating new opportunities and solving complex challenges.\",\n                    imageUrl: \"https://via.placeholder.com/800x600/DC2626/FFFFFF?text=Innovation\",\n                    audioUrl: \"\"\n                },\n                {\n                    slideNumber: 4,\n                    title: \"Future Outlook\",\n                    content: \"The future of technology holds immense potential, with emerging trends that will reshape how we live and work.\",\n                    imageUrl: \"https://via.placeholder.com/800x600/D97706/FFFFFF?text=Future\",\n                    audioUrl: \"\"\n                }\n            ],\n            isActive: true,\n            usageCount: 0,\n            createdAt: new Date()\n        };\n    }\n    createBusinessFallbackDeck() {\n        return {\n            id: crypto.randomUUID(),\n            topic: \"Business\",\n            title: \"Business Fundamentals\",\n            slides: [\n                {\n                    slideNumber: 1,\n                    title: \"Business Strategy\",\n                    content: \"Successful businesses are built on solid strategies that align resources with market opportunities and customer needs.\",\n                    imageUrl: \"https://via.placeholder.com/800x600/7C3AED/FFFFFF?text=Strategy\",\n                    audioUrl: \"\"\n                },\n                {\n                    slideNumber: 2,\n                    title: \"Market Analysis\",\n                    content: \"Understanding your market is crucial for making informed decisions and identifying growth opportunities.\",\n                    imageUrl: \"https://via.placeholder.com/800x600/059669/FFFFFF?text=Market+Analysis\",\n                    audioUrl: \"\"\n                },\n                {\n                    slideNumber: 3,\n                    title: \"Execution Excellence\",\n                    content: \"Great strategies must be backed by excellent execution to achieve sustainable business success.\",\n                    imageUrl: \"https://via.placeholder.com/800x600/DC2626/FFFFFF?text=Execution\",\n                    audioUrl: \"\"\n                },\n                {\n                    slideNumber: 4,\n                    title: \"Growth and Scale\",\n                    content: \"Scaling a business requires careful planning, resource allocation, and continuous adaptation to market changes.\",\n                    imageUrl: \"https://via.placeholder.com/800x600/D97706/FFFFFF?text=Growth\",\n                    audioUrl: \"\"\n                }\n            ],\n            isActive: true,\n            usageCount: 0,\n            createdAt: new Date()\n        };\n    }\n    createEducationFallbackDeck() {\n        return {\n            id: crypto.randomUUID(),\n            topic: \"Education\",\n            title: \"Education and Learning\",\n            slides: [\n                {\n                    slideNumber: 1,\n                    title: \"The Learning Process\",\n                    content: \"Learning is a continuous journey that involves acquiring knowledge, developing skills, and applying insights.\",\n                    imageUrl: \"https://via.placeholder.com/800x600/4F46E5/FFFFFF?text=Learning\",\n                    audioUrl: \"\"\n                },\n                {\n                    slideNumber: 2,\n                    title: \"Modern Education Methods\",\n                    content: \"Contemporary education embraces diverse teaching methods, technology integration, and personalized learning approaches.\",\n                    imageUrl: \"https://via.placeholder.com/800x600/059669/FFFFFF?text=Modern+Education\",\n                    audioUrl: \"\"\n                },\n                {\n                    slideNumber: 3,\n                    title: \"Skills Development\",\n                    content: \"Focus on developing both hard and soft skills prepares learners for success in an ever-changing world.\",\n                    imageUrl: \"https://via.placeholder.com/800x600/DC2626/FFFFFF?text=Skills\",\n                    audioUrl: \"\"\n                },\n                {\n                    slideNumber: 4,\n                    title: \"Lifelong Learning\",\n                    content: \"In today's rapidly evolving landscape, lifelong learning has become essential for personal and professional growth.\",\n                    imageUrl: \"https://via.placeholder.com/800x600/D97706/FFFFFF?text=Lifelong+Learning\",\n                    audioUrl: \"\"\n                }\n            ],\n            isActive: true,\n            usageCount: 0,\n            createdAt: new Date()\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDWjthQUNEO1lBQ0RJLFVBQVU7WUFDVkMsWUFBWTtZQUNaQyxXQUFXLElBQUlDO1FBQ2pCO0lBQ0Y7SUFFUTRDLDhCQUE0QztRQUNsRCxPQUFPO1lBQ0w1RCxJQUFJVSxPQUFPQyxVQUFVO1lBQ3JCbEIsT0FBTztZQUNQYSxPQUFPO1lBQ1BGLFFBQVE7Z0JBQ047b0JBQ0VDLGFBQWE7b0JBQ2JDLE9BQU87b0JBQ1BDLFNBQVM7b0JBQ1RDLFVBQVU7b0JBQ1ZDLFVBQVU7Z0JBQ1o7Z0JBQ0E7b0JBQ0VKLGFBQWE7b0JBQ2JDLE9BQU87b0JBQ1BDLFNBQVM7b0JBQ1RDLFVBQVU7b0JBQ1ZDLFVBQVU7Z0JBQ1o7Z0JBQ0E7b0JBQ0VKLGFBQWE7b0JBQ2JDLE9BQU87b0JBQ1BDLFNBQVM7b0JBQ1RDLFVBQVU7b0JBQ1ZDLFVBQVU7Z0JBQ1o7Z0JBQ0E7b0JBQ0VKLGFBQWE7b0JBQ2JDLE9BQU87b0JBQ1BDLFNBQVM7b0JBQ1RDLFVBQVU7b0JBQ1ZDLFVBQVU7Z0JBQ1o7YUFDRDtZQUNESSxVQUFVO1lBQ1ZDLFlBQVk7WUFDWkMsV0FBVyxJQUFJQztRQUNqQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac3BlYWtkZWNrL3dlYi8uL3NyYy9zZXJ2aWNlcy9mYWxsYmFjay1tYW5hZ2VyLnRzPzM3NDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGF0YWJhc2VTZXJ2aWNlIH0gZnJvbSAnLi9kYXRhYmFzZSc7XG5pbXBvcnQgeyBGYWxsYmFja0RlY2ssIFByZXNlbnRhdGlvbiB9IGZyb20gJ0BzcGVha2RlY2svc2hhcmVkJztcblxuZXhwb3J0IGNsYXNzIEZhbGxiYWNrTWFuYWdlciB7XG4gIHByaXZhdGUgZGI6IERhdGFiYXNlU2VydmljZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRiID0gbmV3IERhdGFiYXNlU2VydmljZSgpO1xuICB9XG5cbiAgYXN5bmMgZ2V0RmFsbGJhY2tQcmVzZW50YXRpb24odG9waWM6IHN0cmluZyk6IFByb21pc2U8UHJlc2VudGF0aW9uPiB7XG4gICAgLy8gVHJ5IHRvIGZpbmQgYSByZWxldmFudCBmYWxsYmFjayBkZWNrXG4gICAgY29uc3QgZmFsbGJhY2tEZWNrcyA9IGF3YWl0IHRoaXMuZGIuZ2V0RmFsbGJhY2tEZWNrcyh0b3BpYyk7XG4gICAgXG4gICAgbGV0IHNlbGVjdGVkRGVjazogRmFsbGJhY2tEZWNrO1xuICAgIFxuICAgIGlmIChmYWxsYmFja0RlY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gTm8gZmFsbGJhY2sgZGVja3MgZm91bmQsIGNyZWF0ZSBhIGdlbmVyaWMgb25lXG4gICAgICBzZWxlY3RlZERlY2sgPSB0aGlzLmNyZWF0ZUdlbmVyaWNGYWxsYmFja0RlY2sodG9waWMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTZWxlY3QgdGhlIGxlYXN0IHVzZWQgZmFsbGJhY2sgZGVja1xuICAgICAgc2VsZWN0ZWREZWNrID0gZmFsbGJhY2tEZWNrc1swXTtcbiAgICAgIFxuICAgICAgLy8gSW5jcmVtZW50IHVzYWdlIGNvdW50XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLmRiLmluY3JlbWVudEZhbGxiYWNrVXNhZ2Uoc2VsZWN0ZWREZWNrLmlkKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbmNyZW1lbnQgZmFsbGJhY2sgdXNhZ2U6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENvbnZlcnQgZmFsbGJhY2sgZGVjayB0byBwcmVzZW50YXRpb24gZm9ybWF0XG4gICAgcmV0dXJuIHRoaXMuY29udmVydEZhbGxiYWNrVG9QcmVzZW50YXRpb24oc2VsZWN0ZWREZWNrKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlR2VuZXJpY0ZhbGxiYWNrRGVjayh0b3BpYzogc3RyaW5nKTogRmFsbGJhY2tEZWNrIHtcbiAgICBjb25zdCBzbGlkZXMgPSBbXG4gICAgICB7XG4gICAgICAgIHNsaWRlTnVtYmVyOiAxLFxuICAgICAgICB0aXRsZTogYEludHJvZHVjdGlvbiB0byAke3RvcGljfWAsXG4gICAgICAgIGNvbnRlbnQ6IGBXZWxjb21lIHRvIHRoaXMgcHJlc2VudGF0aW9uIGFib3V0ICR7dG9waWN9LiBXZSdsbCBleHBsb3JlIHRoZSBrZXkgY29uY2VwdHMgYW5kIGluc2lnaHRzIGluIHRoaXMgYXJlYS5gLFxuICAgICAgICBpbWFnZVVybDogJ2h0dHBzOi8vdmlhLnBsYWNlaG9sZGVyLmNvbS84MDB4NjAwLzRGNDZFNS9GRkZGRkY/dGV4dD1JbnRyb2R1Y3Rpb24nLFxuICAgICAgICBhdWRpb1VybDogJycsIC8vIFdvdWxkIGJlIGdlbmVyYXRlZCBvciBwcmUtcmVjb3JkZWRcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHNsaWRlTnVtYmVyOiAyLFxuICAgICAgICB0aXRsZTogJ0tleSBDb25jZXB0cycsXG4gICAgICAgIGNvbnRlbnQ6IGBMZXQncyBkaXZlIGludG8gdGhlIGZ1bmRhbWVudGFsIGNvbmNlcHRzIHRoYXQgbWFrZSAke3RvcGljfSBpbXBvcnRhbnQgYW5kIHJlbGV2YW50IGluIHRvZGF5J3MgY29udGV4dC5gLFxuICAgICAgICBpbWFnZVVybDogJ2h0dHBzOi8vdmlhLnBsYWNlaG9sZGVyLmNvbS84MDB4NjAwLzA1OTY2OS9GRkZGRkY/dGV4dD1LZXkrQ29uY2VwdHMnLFxuICAgICAgICBhdWRpb1VybDogJycsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBzbGlkZU51bWJlcjogMyxcbiAgICAgICAgdGl0bGU6ICdBcHBsaWNhdGlvbnMgYW5kIEV4YW1wbGVzJyxcbiAgICAgICAgY29udGVudDogYEhlcmUgYXJlIHNvbWUgcHJhY3RpY2FsIGFwcGxpY2F0aW9ucyBhbmQgcmVhbC13b3JsZCBleGFtcGxlcyBvZiAke3RvcGljfSB0aGF0IGRlbW9uc3RyYXRlIGl0cyB2YWx1ZS5gLFxuICAgICAgICBpbWFnZVVybDogJ2h0dHBzOi8vdmlhLnBsYWNlaG9sZGVyLmNvbS84MDB4NjAwL0RDMjYyNi9GRkZGRkY/dGV4dD1BcHBsaWNhdGlvbnMnLFxuICAgICAgICBhdWRpb1VybDogJycsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBzbGlkZU51bWJlcjogNCxcbiAgICAgICAgdGl0bGU6ICdDb25jbHVzaW9uJyxcbiAgICAgICAgY29udGVudDogYFRvIGNvbmNsdWRlLCAke3RvcGljfSByZXByZXNlbnRzIGFuIGltcG9ydGFudCBhcmVhIHdpdGggc2lnbmlmaWNhbnQgcG90ZW50aWFsIGZvciBmdXR1cmUgZGV2ZWxvcG1lbnQgYW5kIGFwcGxpY2F0aW9ucy5gLFxuICAgICAgICBpbWFnZVVybDogJ2h0dHBzOi8vdmlhLnBsYWNlaG9sZGVyLmNvbS84MDB4NjAwL0Q5NzcwNi9GRkZGRkY/dGV4dD1Db25jbHVzaW9uJyxcbiAgICAgICAgYXVkaW9Vcmw6ICcnLFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgdG9waWM6IHRoaXMuY2F0ZWdvcml6ZVRvcGljR2VuZXJpYyh0b3BpYyksXG4gICAgICB0aXRsZTogYCR7dG9waWN9IC0gT3ZlcnZpZXdgLFxuICAgICAgc2xpZGVzLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICB1c2FnZUNvdW50OiAwLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGNvbnZlcnRGYWxsYmFja1RvUHJlc2VudGF0aW9uKGZhbGxiYWNrRGVjazogRmFsbGJhY2tEZWNrKTogUHJlc2VudGF0aW9uIHtcbiAgICBjb25zdCBwcmVzZW50YXRpb25JZCA9IGNyeXB0by5yYW5kb21VVUlEKCk7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblxuICAgIGNvbnN0IHNsaWRlcyA9IGZhbGxiYWNrRGVjay5zbGlkZXMubWFwKGZhbGxiYWNrU2xpZGUgPT4gKHtcbiAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgcHJlc2VudGF0aW9uSWQ6IHByZXNlbnRhdGlvbklkLFxuICAgICAgc2xpZGVOdW1iZXI6IGZhbGxiYWNrU2xpZGUuc2xpZGVOdW1iZXIsXG4gICAgICB0aXRsZTogZmFsbGJhY2tTbGlkZS50aXRsZSxcbiAgICAgIGNvbnRlbnQ6IGZhbGxiYWNrU2xpZGUuY29udGVudCxcbiAgICAgIGltYWdlVXJsOiBmYWxsYmFja1NsaWRlLmltYWdlVXJsLFxuICAgICAgYXVkaW9Vcmw6IGZhbGxiYWNrU2xpZGUuYXVkaW9VcmwsXG4gICAgICBnZW5lcmF0aW9uU3RhdHVzOiB7XG4gICAgICAgIHRleHQ6ICdjb21wbGV0ZWQnIGFzIGNvbnN0LFxuICAgICAgICBpbWFnZTogJ2NvbXBsZXRlZCcgYXMgY29uc3QsXG4gICAgICAgIGF1ZGlvOiBmYWxsYmFja1NsaWRlLmF1ZGlvVXJsID8gJ2NvbXBsZXRlZCcgYXMgY29uc3QgOiAnZmFpbGVkJyBhcyBjb25zdCxcbiAgICAgIH0sXG4gICAgICBhaVByb21wdHM6IHtcbiAgICAgICAgaW1hZ2VQcm9tcHQ6IGBWaXN1YWwgcmVwcmVzZW50YXRpb24gb2Y6ICR7ZmFsbGJhY2tTbGlkZS50aXRsZX1gLFxuICAgICAgICBhdWRpb1NjcmlwdDogZmFsbGJhY2tTbGlkZS5jb250ZW50LFxuICAgICAgfSxcbiAgICAgIGNyZWF0ZWRBdDogbm93LFxuICAgICAgdXBkYXRlZEF0OiBub3csXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBwcmVzZW50YXRpb25JZCxcbiAgICAgIHRpdGxlOiBmYWxsYmFja0RlY2sudGl0bGUsXG4gICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgICB1cGRhdGVkQXQ6IG5vdyxcbiAgICAgIHVzZXJJZDogdW5kZWZpbmVkLFxuICAgICAgc2xpZGVzLFxuICAgICAgdG90YWxTbGlkZXM6IHNsaWRlcy5sZW5ndGgsXG4gICAgICBnZW5lcmF0aW9uVGltZU1zOiAwLCAvLyBJbnN0YW50IGZvciBmYWxsYmFja1xuICAgICAgZXJyb3JNZXNzYWdlOiB1bmRlZmluZWQsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICAvLyBNYXJrIGFzIGZhbGxiYWNrIGZvciB0cmFuc3BhcmVuY3lcbiAgICAgICAgaXNGYWxsYmFjazogdHJ1ZSxcbiAgICAgICAgZmFsbGJhY2tEZWNrSWQ6IGZhbGxiYWNrRGVjay5pZCxcbiAgICAgICAgZmFsbGJhY2tSZWFzb246ICdBUEkgcXVvdGEgZXhjZWVkZWQnLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBjYXRlZ29yaXplVG9waWNHZW5lcmljKHRvcGljOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRvcGljTG93ZXIgPSB0b3BpYy50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgIC8vIFNpbXBsZSBrZXl3b3JkIG1hdGNoaW5nIGZvciBjYXRlZ29yaXphdGlvblxuICAgIGlmICh0b3BpY0xvd2VyLmluY2x1ZGVzKCd0ZWNoJykgfHwgdG9waWNMb3dlci5pbmNsdWRlcygnYWknKSB8fCB0b3BpY0xvd2VyLmluY2x1ZGVzKCdzb2Z0d2FyZScpIHx8IHRvcGljTG93ZXIuaW5jbHVkZXMoJ2NvbXB1dGVyJykpIHtcbiAgICAgIHJldHVybiAnVGVjaG5vbG9neSc7XG4gICAgfVxuICAgIFxuICAgIGlmICh0b3BpY0xvd2VyLmluY2x1ZGVzKCdidXNpbmVzcycpIHx8IHRvcGljTG93ZXIuaW5jbHVkZXMoJ21hcmtldCcpIHx8IHRvcGljTG93ZXIuaW5jbHVkZXMoJ3N0YXJ0dXAnKSB8fCB0b3BpY0xvd2VyLmluY2x1ZGVzKCdlbnRyZXByZW5ldXInKSkge1xuICAgICAgcmV0dXJuICdCdXNpbmVzcyc7XG4gICAgfVxuICAgIFxuICAgIGlmICh0b3BpY0xvd2VyLmluY2x1ZGVzKCdlZHVjYXRpb24nKSB8fCB0b3BpY0xvd2VyLmluY2x1ZGVzKCdsZWFybicpIHx8IHRvcGljTG93ZXIuaW5jbHVkZXMoJ3NjaG9vbCcpIHx8IHRvcGljTG93ZXIuaW5jbHVkZXMoJ3VuaXZlcnNpdHknKSkge1xuICAgICAgcmV0dXJuICdFZHVjYXRpb24nO1xuICAgIH1cbiAgICBcbiAgICBpZiAodG9waWNMb3dlci5pbmNsdWRlcygnc2NpZW5jZScpIHx8IHRvcGljTG93ZXIuaW5jbHVkZXMoJ3Jlc2VhcmNoJykgfHwgdG9waWNMb3dlci5pbmNsdWRlcygnc3R1ZHknKSkge1xuICAgICAgcmV0dXJuICdTY2llbmNlJztcbiAgICB9XG4gICAgXG4gICAgaWYgKHRvcGljTG93ZXIuaW5jbHVkZXMoJ2hlYWx0aCcpIHx8IHRvcGljTG93ZXIuaW5jbHVkZXMoJ21lZGljYWwnKSB8fCB0b3BpY0xvd2VyLmluY2x1ZGVzKCd3ZWxsbmVzcycpKSB7XG4gICAgICByZXR1cm4gJ0hlYWx0aCc7XG4gICAgfVxuICAgIFxuICAgIGlmICh0b3BpY0xvd2VyLmluY2x1ZGVzKCdlbnZpcm9ubWVudCcpIHx8IHRvcGljTG93ZXIuaW5jbHVkZXMoJ2NsaW1hdGUnKSB8fCB0b3BpY0xvd2VyLmluY2x1ZGVzKCdzdXN0YWluYWJpbGl0eScpKSB7XG4gICAgICByZXR1cm4gJ0Vudmlyb25tZW50JztcbiAgICB9XG4gICAgXG4gICAgaWYgKHRvcGljTG93ZXIuaW5jbHVkZXMoJ2FydCcpIHx8IHRvcGljTG93ZXIuaW5jbHVkZXMoJ2Rlc2lnbicpIHx8IHRvcGljTG93ZXIuaW5jbHVkZXMoJ2NyZWF0aXZlJykpIHtcbiAgICAgIHJldHVybiAnQXJ0cyc7XG4gICAgfVxuICAgIFxuICAgIGlmICh0b3BpY0xvd2VyLmluY2x1ZGVzKCdoaXN0b3J5JykgfHwgdG9waWNMb3dlci5pbmNsdWRlcygncGFzdCcpIHx8IHRvcGljTG93ZXIuaW5jbHVkZXMoJ2hpc3RvcmljYWwnKSkge1xuICAgICAgcmV0dXJuICdIaXN0b3J5JztcbiAgICB9XG4gICAgXG4gICAgLy8gRGVmYXVsdCBjYXRlZ29yeVxuICAgIHJldHVybiAnR2VuZXJhbCc7XG4gIH1cblxuICBhc3luYyBjaGVja0FwaVF1b3RhcygpOiBQcm9taXNlPHsgaGFzUXVvdGFBdmFpbGFibGU6IGJvb2xlYW47IGxpbWl0ZWRTZXJ2aWNlczogc3RyaW5nW10gfT4ge1xuICAgIC8vIEZvciBkZXZlbG9wbWVudCwgYWx3YXlzIGFsbG93IEFJIGdlbmVyYXRpb24gdW5sZXNzIGV4cGxpY2l0bHkgZGlzYWJsZWRcbiAgICAvLyBJbiBwcm9kdWN0aW9uLCB0aGlzIHdvdWxkIGNoZWNrIGFjdHVhbCBBUEkgcXVvdGFzXG4gICAgY29uc3QgZm9yY2VVc2VGYWxsYmFjayA9IHByb2Nlc3MuZW52LkZPUkNFX1VTRV9GQUxMQkFDSyA9PT0gJ3RydWUnO1xuICAgIFxuICAgIGlmIChmb3JjZVVzZUZhbGxiYWNrKSB7XG4gICAgICBjb25zb2xlLmxvZygnRm9yY2UgZmFsbGJhY2sgaXMgZW5hYmxlZCB2aWEgZW52aXJvbm1lbnQgdmFyaWFibGUnKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGhhc1F1b3RhQXZhaWxhYmxlOiBmYWxzZSxcbiAgICAgICAgbGltaXRlZFNlcnZpY2VzOiBbJ2dlbWluaScsICduYW5vQmFuYW5hJ10sXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBGb3IgZGV2ZWxvcG1lbnQvdGVzdGluZywgYXNzdW1lIHF1b3RhcyBhcmUgYXZhaWxhYmxlXG4gICAgLy8gVGhpcyBhbGxvd3MgdXMgdG8gdGVzdCB0aGUgYWN0dWFsIEFJIHNlcnZpY2VzXG4gICAgY29uc29sZS5sb2coJ0FQSSBxdW90YXMgY2hlY2s6IEFsbCBzZXJ2aWNlcyBhdmFpbGFibGUgZm9yIGRldmVsb3BtZW50Jyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhhc1F1b3RhQXZhaWxhYmxlOiB0cnVlLFxuICAgICAgbGltaXRlZFNlcnZpY2VzOiBbXSxcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgc2hvdWxkVXNlRmFsbGJhY2sodG9waWM6IHN0cmluZyk6IFByb21pc2U8eyB1c2VGYWxsYmFjazogYm9vbGVhbjsgcmVhc29uPzogc3RyaW5nIH0+IHtcbiAgICBjb25zdCBxdW90YVN0YXR1cyA9IGF3YWl0IHRoaXMuY2hlY2tBcGlRdW90YXMoKTtcbiAgICBcbiAgICBpZiAoIXF1b3RhU3RhdHVzLmhhc1F1b3RhQXZhaWxhYmxlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VGYWxsYmFjazogdHJ1ZSxcbiAgICAgICAgcmVhc29uOiBgQVBJIHF1b3RhIGV4Y2VlZGVkIGZvciBzZXJ2aWNlczogJHtxdW90YVN0YXR1cy5saW1pdGVkU2VydmljZXMuam9pbignLCAnKX1gLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3Igb3RoZXIgY29uZGl0aW9ucyB0aGF0IG1pZ2h0IHRyaWdnZXIgZmFsbGJhY2tcbiAgICAvLyBlLmcuLCBzZXJ2aWNlIGF2YWlsYWJpbGl0eSwgcmVzcG9uc2UgdGltZSwgZXRjLlxuICAgIFxuICAgIHJldHVybiB7IHVzZUZhbGxiYWNrOiBmYWxzZSB9O1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlRGVmYXVsdEZhbGxiYWNrRGVja3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gVGhpcyBtZXRob2Qgd291bGQgYmUgdXNlZCB0byBzZWVkIHRoZSBkYXRhYmFzZSB3aXRoIGRlZmF1bHQgZmFsbGJhY2sgZGVja3NcbiAgICBjb25zdCBkZWZhdWx0RGVja3MgPSBbXG4gICAgICB0aGlzLmNyZWF0ZVRlY2hub2xvZ3lGYWxsYmFja0RlY2soKSxcbiAgICAgIHRoaXMuY3JlYXRlQnVzaW5lc3NGYWxsYmFja0RlY2soKSxcbiAgICAgIHRoaXMuY3JlYXRlRWR1Y2F0aW9uRmFsbGJhY2tEZWNrKCksXG4gICAgXTtcblxuICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgeW91J2QgaW5zZXJ0IHRoZXNlIGludG8gdGhlIGRhdGFiYXNlXG4gICAgY29uc29sZS5sb2coJ0RlZmF1bHQgZmFsbGJhY2sgZGVja3MgY3JlYXRlZDonLCBkZWZhdWx0RGVja3MubGVuZ3RoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlVGVjaG5vbG9neUZhbGxiYWNrRGVjaygpOiBGYWxsYmFja0RlY2sge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgIHRvcGljOiAnVGVjaG5vbG9neScsXG4gICAgICB0aXRsZTogJ1RlY2hub2xvZ3kgT3ZlcnZpZXcnLFxuICAgICAgc2xpZGVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBzbGlkZU51bWJlcjogMSxcbiAgICAgICAgICB0aXRsZTogJ0ludHJvZHVjdGlvbiB0byBUZWNobm9sb2d5JyxcbiAgICAgICAgICBjb250ZW50OiAnVGVjaG5vbG9neSBzaGFwZXMgb3VyIHdvcmxkIGluIGNvdW50bGVzcyB3YXlzLCBmcm9tIHRoZSBkZXZpY2VzIHdlIHVzZSBkYWlseSB0byB0aGUgc3lzdGVtcyB0aGF0IHBvd2VyIG91ciBlY29ub215LicsXG4gICAgICAgICAgaW1hZ2VVcmw6ICdodHRwczovL3ZpYS5wbGFjZWhvbGRlci5jb20vODAweDYwMC80RjQ2RTUvRkZGRkZGP3RleHQ9VGVjaG5vbG9neScsXG4gICAgICAgICAgYXVkaW9Vcmw6ICcnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgc2xpZGVOdW1iZXI6IDIsXG4gICAgICAgICAgdGl0bGU6ICdEaWdpdGFsIFRyYW5zZm9ybWF0aW9uJyxcbiAgICAgICAgICBjb250ZW50OiAnT3JnYW5pemF0aW9ucyB3b3JsZHdpZGUgYXJlIGVtYnJhY2luZyBkaWdpdGFsIHRyYW5zZm9ybWF0aW9uIHRvIHN0YXkgY29tcGV0aXRpdmUgYW5kIG1lZXQgZXZvbHZpbmcgY3VzdG9tZXIgZXhwZWN0YXRpb25zLicsXG4gICAgICAgICAgaW1hZ2VVcmw6ICdodHRwczovL3ZpYS5wbGFjZWhvbGRlci5jb20vODAweDYwMC8wNTk2NjkvRkZGRkZGP3RleHQ9RGlnaXRhbCtUcmFuc2Zvcm1hdGlvbicsXG4gICAgICAgICAgYXVkaW9Vcmw6ICcnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgc2xpZGVOdW1iZXI6IDMsXG4gICAgICAgICAgdGl0bGU6ICdJbm5vdmF0aW9uIGFuZCBJbXBhY3QnLFxuICAgICAgICAgIGNvbnRlbnQ6ICdUZWNobm9sb2dpY2FsIGlubm92YXRpb24gY29udGludWVzIHRvIGRyaXZlIHByb2dyZXNzLCBjcmVhdGluZyBuZXcgb3Bwb3J0dW5pdGllcyBhbmQgc29sdmluZyBjb21wbGV4IGNoYWxsZW5nZXMuJyxcbiAgICAgICAgICBpbWFnZVVybDogJ2h0dHBzOi8vdmlhLnBsYWNlaG9sZGVyLmNvbS84MDB4NjAwL0RDMjYyNi9GRkZGRkY/dGV4dD1Jbm5vdmF0aW9uJyxcbiAgICAgICAgICBhdWRpb1VybDogJycsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBzbGlkZU51bWJlcjogNCxcbiAgICAgICAgICB0aXRsZTogJ0Z1dHVyZSBPdXRsb29rJyxcbiAgICAgICAgICBjb250ZW50OiAnVGhlIGZ1dHVyZSBvZiB0ZWNobm9sb2d5IGhvbGRzIGltbWVuc2UgcG90ZW50aWFsLCB3aXRoIGVtZXJnaW5nIHRyZW5kcyB0aGF0IHdpbGwgcmVzaGFwZSBob3cgd2UgbGl2ZSBhbmQgd29yay4nLFxuICAgICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly92aWEucGxhY2Vob2xkZXIuY29tLzgwMHg2MDAvRDk3NzA2L0ZGRkZGRj90ZXh0PUZ1dHVyZScsXG4gICAgICAgICAgYXVkaW9Vcmw6ICcnLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgdXNhZ2VDb3VudDogMCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVCdXNpbmVzc0ZhbGxiYWNrRGVjaygpOiBGYWxsYmFja0RlY2sge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgIHRvcGljOiAnQnVzaW5lc3MnLFxuICAgICAgdGl0bGU6ICdCdXNpbmVzcyBGdW5kYW1lbnRhbHMnLFxuICAgICAgc2xpZGVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBzbGlkZU51bWJlcjogMSxcbiAgICAgICAgICB0aXRsZTogJ0J1c2luZXNzIFN0cmF0ZWd5JyxcbiAgICAgICAgICBjb250ZW50OiAnU3VjY2Vzc2Z1bCBidXNpbmVzc2VzIGFyZSBidWlsdCBvbiBzb2xpZCBzdHJhdGVnaWVzIHRoYXQgYWxpZ24gcmVzb3VyY2VzIHdpdGggbWFya2V0IG9wcG9ydHVuaXRpZXMgYW5kIGN1c3RvbWVyIG5lZWRzLicsXG4gICAgICAgICAgaW1hZ2VVcmw6ICdodHRwczovL3ZpYS5wbGFjZWhvbGRlci5jb20vODAweDYwMC83QzNBRUQvRkZGRkZGP3RleHQ9U3RyYXRlZ3knLFxuICAgICAgICAgIGF1ZGlvVXJsOiAnJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHNsaWRlTnVtYmVyOiAyLFxuICAgICAgICAgIHRpdGxlOiAnTWFya2V0IEFuYWx5c2lzJyxcbiAgICAgICAgICBjb250ZW50OiAnVW5kZXJzdGFuZGluZyB5b3VyIG1hcmtldCBpcyBjcnVjaWFsIGZvciBtYWtpbmcgaW5mb3JtZWQgZGVjaXNpb25zIGFuZCBpZGVudGlmeWluZyBncm93dGggb3Bwb3J0dW5pdGllcy4nLFxuICAgICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly92aWEucGxhY2Vob2xkZXIuY29tLzgwMHg2MDAvMDU5NjY5L0ZGRkZGRj90ZXh0PU1hcmtldCtBbmFseXNpcycsXG4gICAgICAgICAgYXVkaW9Vcmw6ICcnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgc2xpZGVOdW1iZXI6IDMsXG4gICAgICAgICAgdGl0bGU6ICdFeGVjdXRpb24gRXhjZWxsZW5jZScsXG4gICAgICAgICAgY29udGVudDogJ0dyZWF0IHN0cmF0ZWdpZXMgbXVzdCBiZSBiYWNrZWQgYnkgZXhjZWxsZW50IGV4ZWN1dGlvbiB0byBhY2hpZXZlIHN1c3RhaW5hYmxlIGJ1c2luZXNzIHN1Y2Nlc3MuJyxcbiAgICAgICAgICBpbWFnZVVybDogJ2h0dHBzOi8vdmlhLnBsYWNlaG9sZGVyLmNvbS84MDB4NjAwL0RDMjYyNi9GRkZGRkY/dGV4dD1FeGVjdXRpb24nLFxuICAgICAgICAgIGF1ZGlvVXJsOiAnJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHNsaWRlTnVtYmVyOiA0LFxuICAgICAgICAgIHRpdGxlOiAnR3Jvd3RoIGFuZCBTY2FsZScsXG4gICAgICAgICAgY29udGVudDogJ1NjYWxpbmcgYSBidXNpbmVzcyByZXF1aXJlcyBjYXJlZnVsIHBsYW5uaW5nLCByZXNvdXJjZSBhbGxvY2F0aW9uLCBhbmQgY29udGludW91cyBhZGFwdGF0aW9uIHRvIG1hcmtldCBjaGFuZ2VzLicsXG4gICAgICAgICAgaW1hZ2VVcmw6ICdodHRwczovL3ZpYS5wbGFjZWhvbGRlci5jb20vODAweDYwMC9EOTc3MDYvRkZGRkZGP3RleHQ9R3Jvd3RoJyxcbiAgICAgICAgICBhdWRpb1VybDogJycsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICB1c2FnZUNvdW50OiAwLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUVkdWNhdGlvbkZhbGxiYWNrRGVjaygpOiBGYWxsYmFja0RlY2sge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgIHRvcGljOiAnRWR1Y2F0aW9uJyxcbiAgICAgIHRpdGxlOiAnRWR1Y2F0aW9uIGFuZCBMZWFybmluZycsXG4gICAgICBzbGlkZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHNsaWRlTnVtYmVyOiAxLFxuICAgICAgICAgIHRpdGxlOiAnVGhlIExlYXJuaW5nIFByb2Nlc3MnLFxuICAgICAgICAgIGNvbnRlbnQ6ICdMZWFybmluZyBpcyBhIGNvbnRpbnVvdXMgam91cm5leSB0aGF0IGludm9sdmVzIGFjcXVpcmluZyBrbm93bGVkZ2UsIGRldmVsb3Bpbmcgc2tpbGxzLCBhbmQgYXBwbHlpbmcgaW5zaWdodHMuJyxcbiAgICAgICAgICBpbWFnZVVybDogJ2h0dHBzOi8vdmlhLnBsYWNlaG9sZGVyLmNvbS84MDB4NjAwLzRGNDZFNS9GRkZGRkY/dGV4dD1MZWFybmluZycsXG4gICAgICAgICAgYXVkaW9Vcmw6ICcnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgc2xpZGVOdW1iZXI6IDIsXG4gICAgICAgICAgdGl0bGU6ICdNb2Rlcm4gRWR1Y2F0aW9uIE1ldGhvZHMnLFxuICAgICAgICAgIGNvbnRlbnQ6ICdDb250ZW1wb3JhcnkgZWR1Y2F0aW9uIGVtYnJhY2VzIGRpdmVyc2UgdGVhY2hpbmcgbWV0aG9kcywgdGVjaG5vbG9neSBpbnRlZ3JhdGlvbiwgYW5kIHBlcnNvbmFsaXplZCBsZWFybmluZyBhcHByb2FjaGVzLicsXG4gICAgICAgICAgaW1hZ2VVcmw6ICdodHRwczovL3ZpYS5wbGFjZWhvbGRlci5jb20vODAweDYwMC8wNTk2NjkvRkZGRkZGP3RleHQ9TW9kZXJuK0VkdWNhdGlvbicsXG4gICAgICAgICAgYXVkaW9Vcmw6ICcnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgc2xpZGVOdW1iZXI6IDMsXG4gICAgICAgICAgdGl0bGU6ICdTa2lsbHMgRGV2ZWxvcG1lbnQnLFxuICAgICAgICAgIGNvbnRlbnQ6ICdGb2N1cyBvbiBkZXZlbG9waW5nIGJvdGggaGFyZCBhbmQgc29mdCBza2lsbHMgcHJlcGFyZXMgbGVhcm5lcnMgZm9yIHN1Y2Nlc3MgaW4gYW4gZXZlci1jaGFuZ2luZyB3b3JsZC4nLFxuICAgICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly92aWEucGxhY2Vob2xkZXIuY29tLzgwMHg2MDAvREMyNjI2L0ZGRkZGRj90ZXh0PVNraWxscycsXG4gICAgICAgICAgYXVkaW9Vcmw6ICcnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgc2xpZGVOdW1iZXI6IDQsXG4gICAgICAgICAgdGl0bGU6ICdMaWZlbG9uZyBMZWFybmluZycsXG4gICAgICAgICAgY29udGVudDogJ0luIHRvZGF5XFwncyByYXBpZGx5IGV2b2x2aW5nIGxhbmRzY2FwZSwgbGlmZWxvbmcgbGVhcm5pbmcgaGFzIGJlY29tZSBlc3NlbnRpYWwgZm9yIHBlcnNvbmFsIGFuZCBwcm9mZXNzaW9uYWwgZ3Jvd3RoLicsXG4gICAgICAgICAgaW1hZ2VVcmw6ICdodHRwczovL3ZpYS5wbGFjZWhvbGRlci5jb20vODAweDYwMC9EOTc3MDYvRkZGRkZGP3RleHQ9TGlmZWxvbmcrTGVhcm5pbmcnLFxuICAgICAgICAgIGF1ZGlvVXJsOiAnJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIHVzYWdlQ291bnQ6IDAsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkRhdGFiYXNlU2VydmljZSIsIkZhbGxiYWNrTWFuYWdlciIsImNvbnN0cnVjdG9yIiwiZGIiLCJnZXRGYWxsYmFja1ByZXNlbnRhdGlvbiIsInRvcGljIiwiZmFsbGJhY2tEZWNrcyIsImdldEZhbGxiYWNrRGVja3MiLCJzZWxlY3RlZERlY2siLCJsZW5ndGgiLCJjcmVhdGVHZW5lcmljRmFsbGJhY2tEZWNrIiwiaW5jcmVtZW50RmFsbGJhY2tVc2FnZSIsImlkIiwiZXJyb3IiLCJjb25zb2xlIiwiY29udmVydEZhbGxiYWNrVG9QcmVzZW50YXRpb24iLCJzbGlkZXMiLCJzbGlkZU51bWJlciIsInRpdGxlIiwiY29udGVudCIsImltYWdlVXJsIiwiYXVkaW9VcmwiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwiY2F0ZWdvcml6ZVRvcGljR2VuZXJpYyIsImlzQWN0aXZlIiwidXNhZ2VDb3VudCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJmYWxsYmFja0RlY2siLCJwcmVzZW50YXRpb25JZCIsIm5vdyIsIm1hcCIsImZhbGxiYWNrU2xpZGUiLCJnZW5lcmF0aW9uU3RhdHVzIiwidGV4dCIsImltYWdlIiwiYXVkaW8iLCJhaVByb21wdHMiLCJpbWFnZVByb21wdCIsImF1ZGlvU2NyaXB0IiwidXBkYXRlZEF0Iiwic3RhdHVzIiwidXNlcklkIiwidW5kZWZpbmVkIiwidG90YWxTbGlkZXMiLCJnZW5lcmF0aW9uVGltZU1zIiwiZXJyb3JNZXNzYWdlIiwibWV0YWRhdGEiLCJpc0ZhbGxiYWNrIiwiZmFsbGJhY2tEZWNrSWQiLCJmYWxsYmFja1JlYXNvbiIsInRvcGljTG93ZXIiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiY2hlY2tBcGlRdW90YXMiLCJmb3JjZVVzZUZhbGxiYWNrIiwicHJvY2VzcyIsImVudiIsIkZPUkNFX1VTRV9GQUxMQkFDSyIsImxvZyIsImhhc1F1b3RhQXZhaWxhYmxlIiwibGltaXRlZFNlcnZpY2VzIiwic2hvdWxkVXNlRmFsbGJhY2siLCJxdW90YVN0YXR1cyIsInVzZUZhbGxiYWNrIiwicmVhc29uIiwiam9pbiIsImNyZWF0ZURlZmF1bHRGYWxsYmFja0RlY2tzIiwiZGVmYXVsdERlY2tzIiwiY3JlYXRlVGVjaG5vbG9neUZhbGxiYWNrRGVjayIsImNyZWF0ZUJ1c2luZXNzRmFsbGJhY2tEZWNrIiwiY3JlYXRlRWR1Y2F0aW9uRmFsbGJhY2tEZWNrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/services/fallback-manager.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/shared/src/constants/app.ts":
/*!**************************************************!*\
  !*** ../../packages/shared/src/constants/app.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AI_SERVICES: () => (/* binding */ AI_SERVICES),\n/* harmony export */   APP_CONFIG: () => (/* binding */ APP_CONFIG),\n/* harmony export */   FALLBACK_TOPICS: () => (/* binding */ FALLBACK_TOPICS),\n/* harmony export */   PRESENTATION_STATUS: () => (/* binding */ PRESENTATION_STATUS)\n/* harmony export */ });\nconst APP_CONFIG = {\n    PRESENTATION: {\n        MIN_SLIDES: 3,\n        MAX_SLIDES: 5,\n        MAX_TITLE_LENGTH: 100,\n        MAX_CONTENT_LENGTH: 500\n    },\n    GENERATION: {\n        TIMEOUT_MS: 60000,\n        PROGRESS_UPDATE_INTERVAL_MS: 1000\n    },\n    API: {\n        RATE_LIMIT_PER_MINUTE: 10,\n        MAX_RETRIES: 3,\n        RETRY_DELAY_MS: 1000\n    },\n    STORAGE: {\n        MAX_IMAGE_SIZE_MB: 10,\n        MAX_AUDIO_SIZE_MB: 50,\n        ALLOWED_IMAGE_TYPES: [\n            \"image/jpeg\",\n            \"image/png\",\n            \"image/webp\"\n        ],\n        ALLOWED_AUDIO_TYPES: [\n            \"audio/mpeg\",\n            \"audio/wav\",\n            \"audio/m4a\"\n        ]\n    }\n};\nconst FALLBACK_TOPICS = [\n    \"Technology\",\n    \"Business\",\n    \"Education\",\n    \"Science\",\n    \"Health\",\n    \"Environment\",\n    \"Arts\",\n    \"History\"\n];\nconst AI_SERVICES = {\n    GEMINI: \"gemini\",\n    NANO_BANANA: \"nano_banana\",\n    ELEVEN_LABS: \"eleven_labs\"\n};\nconst PRESENTATION_STATUS = {\n    PENDING: \"pending\",\n    PROCESSING: \"processing\",\n    GENERATING_TEXT: \"generating_text\",\n    GENERATING_VISUALS: \"generating_visuals\",\n    GENERATING_AUDIO: \"generating_audio\",\n    COMPLETED: \"completed\",\n    FAILED: \"failed\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy9jb25zdGFudHMvYXBwLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBTyxNQUFNQSxhQUFhO0lBQ3hCQyxjQUFjO1FBQ1pDLFlBQVk7UUFDWkMsWUFBWTtRQUNaQyxrQkFBa0I7UUFDbEJDLG9CQUFvQjtJQUN0QjtJQUNBQyxZQUFZO1FBQ1ZDLFlBQVk7UUFDWkMsNkJBQTZCO0lBQy9CO0lBQ0FDLEtBQUs7UUFDSEMsdUJBQXVCO1FBQ3ZCQyxhQUFhO1FBQ2JDLGdCQUFnQjtJQUNsQjtJQUNBQyxTQUFTO1FBQ1BDLG1CQUFtQjtRQUNuQkMsbUJBQW1CO1FBQ25CQyxxQkFBcUI7WUFBQztZQUFjO1lBQWE7U0FBYTtRQUM5REMscUJBQXFCO1lBQUM7WUFBYztZQUFhO1NBQVk7SUFDL0Q7QUFDRixFQUFXO0FBRUosTUFBTUMsa0JBQWtCO0lBQzdCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDRCxDQUFVO0FBRUosTUFBTUMsY0FBYztJQUN6QkMsUUFBUTtJQUNSQyxhQUFhO0lBQ2JDLGFBQWE7QUFDZixFQUFXO0FBRUosTUFBTUMsc0JBQXNCO0lBQ2pDQyxTQUFTO0lBQ1RDLFlBQVk7SUFDWkMsaUJBQWlCO0lBQ2pCQyxvQkFBb0I7SUFDcEJDLGtCQUFrQjtJQUNsQkMsV0FBVztJQUNYQyxRQUFRO0FBQ1YsRUFBVyIsInNvdXJjZXMiOlsid2VicGFjazovL0BzcGVha2RlY2svd2ViLy4uLy4uL3BhY2thZ2VzL3NoYXJlZC9zcmMvY29uc3RhbnRzL2FwcC50cz80ZTAxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBBUFBfQ09ORklHID0ge1xuICBQUkVTRU5UQVRJT046IHtcbiAgICBNSU5fU0xJREVTOiAzLFxuICAgIE1BWF9TTElERVM6IDUsXG4gICAgTUFYX1RJVExFX0xFTkdUSDogMTAwLFxuICAgIE1BWF9DT05URU5UX0xFTkdUSDogNTAwLFxuICB9LFxuICBHRU5FUkFUSU9OOiB7XG4gICAgVElNRU9VVF9NUzogNjAwMDAsIC8vIDYwIHNlY29uZHNcbiAgICBQUk9HUkVTU19VUERBVEVfSU5URVJWQUxfTVM6IDEwMDAsXG4gIH0sXG4gIEFQSToge1xuICAgIFJBVEVfTElNSVRfUEVSX01JTlVURTogMTAsXG4gICAgTUFYX1JFVFJJRVM6IDMsXG4gICAgUkVUUllfREVMQVlfTVM6IDEwMDAsXG4gIH0sXG4gIFNUT1JBR0U6IHtcbiAgICBNQVhfSU1BR0VfU0laRV9NQjogMTAsXG4gICAgTUFYX0FVRElPX1NJWkVfTUI6IDUwLFxuICAgIEFMTE9XRURfSU1BR0VfVFlQRVM6IFsnaW1hZ2UvanBlZycsICdpbWFnZS9wbmcnLCAnaW1hZ2Uvd2VicCddLFxuICAgIEFMTE9XRURfQVVESU9fVFlQRVM6IFsnYXVkaW8vbXBlZycsICdhdWRpby93YXYnLCAnYXVkaW8vbTRhJ10sXG4gIH0sXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgRkFMTEJBQ0tfVE9QSUNTID0gW1xuICAnVGVjaG5vbG9neScsXG4gICdCdXNpbmVzcycsXG4gICdFZHVjYXRpb24nLFxuICAnU2NpZW5jZScsXG4gICdIZWFsdGgnLFxuICAnRW52aXJvbm1lbnQnLFxuICAnQXJ0cycsXG4gICdIaXN0b3J5Jyxcbl0gYXMgY29uc3Q7XG5cbmV4cG9ydCBjb25zdCBBSV9TRVJWSUNFUyA9IHtcbiAgR0VNSU5JOiAnZ2VtaW5pJyxcbiAgTkFOT19CQU5BTkE6ICduYW5vX2JhbmFuYScsXG4gIEVMRVZFTl9MQUJTOiAnZWxldmVuX2xhYnMnLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IFBSRVNFTlRBVElPTl9TVEFUVVMgPSB7XG4gIFBFTkRJTkc6ICdwZW5kaW5nJyxcbiAgUFJPQ0VTU0lORzogJ3Byb2Nlc3NpbmcnLFxuICBHRU5FUkFUSU5HX1RFWFQ6ICdnZW5lcmF0aW5nX3RleHQnLFxuICBHRU5FUkFUSU5HX1ZJU1VBTFM6ICdnZW5lcmF0aW5nX3Zpc3VhbHMnLFxuICBHRU5FUkFUSU5HX0FVRElPOiAnZ2VuZXJhdGluZ19hdWRpbycsXG4gIENPTVBMRVRFRDogJ2NvbXBsZXRlZCcsXG4gIEZBSUxFRDogJ2ZhaWxlZCcsXG59IGFzIGNvbnN0O1xuIl0sIm5hbWVzIjpbIkFQUF9DT05GSUciLCJQUkVTRU5UQVRJT04iLCJNSU5fU0xJREVTIiwiTUFYX1NMSURFUyIsIk1BWF9USVRMRV9MRU5HVEgiLCJNQVhfQ09OVEVOVF9MRU5HVEgiLCJHRU5FUkFUSU9OIiwiVElNRU9VVF9NUyIsIlBST0dSRVNTX1VQREFURV9JTlRFUlZBTF9NUyIsIkFQSSIsIlJBVEVfTElNSVRfUEVSX01JTlVURSIsIk1BWF9SRVRSSUVTIiwiUkVUUllfREVMQVlfTVMiLCJTVE9SQUdFIiwiTUFYX0lNQUdFX1NJWkVfTUIiLCJNQVhfQVVESU9fU0laRV9NQiIsIkFMTE9XRURfSU1BR0VfVFlQRVMiLCJBTExPV0VEX0FVRElPX1RZUEVTIiwiRkFMTEJBQ0tfVE9QSUNTIiwiQUlfU0VSVklDRVMiLCJHRU1JTkkiLCJOQU5PX0JBTkFOQSIsIkVMRVZFTl9MQUJTIiwiUFJFU0VOVEFUSU9OX1NUQVRVUyIsIlBFTkRJTkciLCJQUk9DRVNTSU5HIiwiR0VORVJBVElOR19URVhUIiwiR0VORVJBVElOR19WSVNVQUxTIiwiR0VORVJBVElOR19BVURJTyIsIkNPTVBMRVRFRCIsIkZBSUxFRCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/shared/src/constants/app.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/shared/src/index.ts":
/*!******************************************!*\
  !*** ../../packages/shared/src/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AI_SERVICES: () => (/* reexport safe */ _constants_app__WEBPACK_IMPORTED_MODULE_4__.AI_SERVICES),\n/* harmony export */   APP_CONFIG: () => (/* reexport safe */ _constants_app__WEBPACK_IMPORTED_MODULE_4__.APP_CONFIG),\n/* harmony export */   FALLBACK_TOPICS: () => (/* reexport safe */ _constants_app__WEBPACK_IMPORTED_MODULE_4__.FALLBACK_TOPICS),\n/* harmony export */   PRESENTATION_STATUS: () => (/* reexport safe */ _constants_app__WEBPACK_IMPORTED_MODULE_4__.PRESENTATION_STATUS),\n/* harmony export */   createErrorResponse: () => (/* reexport safe */ _utils_api__WEBPACK_IMPORTED_MODULE_6__.createErrorResponse),\n/* harmony export */   createSuccessResponse: () => (/* reexport safe */ _utils_api__WEBPACK_IMPORTED_MODULE_6__.createSuccessResponse),\n/* harmony export */   formatApiError: () => (/* reexport safe */ _utils_api__WEBPACK_IMPORTED_MODULE_6__.formatApiError),\n/* harmony export */   generateRequestId: () => (/* reexport safe */ _utils_api__WEBPACK_IMPORTED_MODULE_6__.generateRequestId),\n/* harmony export */   isApiError: () => (/* reexport safe */ _utils_api__WEBPACK_IMPORTED_MODULE_6__.isApiError),\n/* harmony export */   isValidAudioType: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_5__.isValidAudioType),\n/* harmony export */   isValidImageType: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_5__.isValidImageType),\n/* harmony export */   isValidUrl: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_5__.isValidUrl),\n/* harmony export */   retryWithBackoff: () => (/* reexport safe */ _utils_api__WEBPACK_IMPORTED_MODULE_6__.retryWithBackoff),\n/* harmony export */   sleep: () => (/* reexport safe */ _utils_api__WEBPACK_IMPORTED_MODULE_6__.sleep),\n/* harmony export */   validatePresentationTitle: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_5__.validatePresentationTitle),\n/* harmony export */   validateSlideContent: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_5__.validateSlideContent)\n/* harmony export */ });\n/* harmony import */ var _types_presentation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types/presentation */ \"(rsc)/../../packages/shared/src/types/presentation.ts\");\n/* harmony import */ var _types_slide__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types/slide */ \"(rsc)/../../packages/shared/src/types/slide.ts\");\n/* harmony import */ var _types_fallback__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types/fallback */ \"(rsc)/../../packages/shared/src/types/fallback.ts\");\n/* harmony import */ var _types_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types/api */ \"(rsc)/../../packages/shared/src/types/api.ts\");\n/* harmony import */ var _constants_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants/app */ \"(rsc)/../../packages/shared/src/constants/app.ts\");\n/* harmony import */ var _utils_validation__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/validation */ \"(rsc)/../../packages/shared/src/utils/validation.ts\");\n/* harmony import */ var _utils_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/api */ \"(rsc)/../../packages/shared/src/utils/api.ts\");\n// Types\n\n\n\n\n// Constants\n\n// Utils\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLFFBQVE7QUFDNkI7QUFDUDtBQUNHO0FBQ0w7QUFFNUIsWUFBWTtBQUNvQjtBQUVoQyxRQUFRO0FBQzJCO0FBQ1AiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac3BlYWtkZWNrL3dlYi8uLi8uLi9wYWNrYWdlcy9zaGFyZWQvc3JjL2luZGV4LnRzPzg2NmEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVHlwZXNcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMvcHJlc2VudGF0aW9uJztcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMvc2xpZGUnO1xuZXhwb3J0ICogZnJvbSAnLi90eXBlcy9mYWxsYmFjayc7XG5leHBvcnQgKiBmcm9tICcuL3R5cGVzL2FwaSc7XG5cbi8vIENvbnN0YW50c1xuZXhwb3J0ICogZnJvbSAnLi9jb25zdGFudHMvYXBwJztcblxuLy8gVXRpbHNcbmV4cG9ydCAqIGZyb20gJy4vdXRpbHMvdmFsaWRhdGlvbic7XG5leHBvcnQgKiBmcm9tICcuL3V0aWxzL2FwaSc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/shared/src/index.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/shared/src/types/api.ts":
/*!**********************************************!*\
  !*** ../../packages/shared/src/types/api.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// Quota Management\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy90eXBlcy9hcGkudHMiLCJtYXBwaW5ncyI6IjtBQTJDQSxtQkFBbUI7QUFNbEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac3BlYWtkZWNrL3dlYi8uLi8uLi9wYWNrYWdlcy9zaGFyZWQvc3JjL3R5cGVzL2FwaS50cz9hNGY2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgQXBpRXJyb3Ige1xuICBlcnJvcjoge1xuICAgIGNvZGU6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgZGV0YWlscz86IFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgdGltZXN0YW1wOiBzdHJpbmc7XG4gICAgcmVxdWVzdElkOiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBpU3VjY2Vzc1Jlc3BvbnNlPFQ+IHtcbiAgZGF0YTogVDtcbiAgc3VjY2VzczogdHJ1ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcGlFcnJvclJlc3BvbnNlIHtcbiAgZGF0YTogbnVsbDtcbiAgc3VjY2VzczogZmFsc2U7XG4gIGVycm9yOiBBcGlFcnJvclsnZXJyb3InXTtcbn1cblxuZXhwb3J0IHR5cGUgQXBpUmVzcG9uc2U8VD4gPSBBcGlTdWNjZXNzUmVzcG9uc2U8VD4gfCBBcGlFcnJvclJlc3BvbnNlO1xuXG4vLyBBSSBTZXJ2aWNlIEludGVyZmFjZXNcbmV4cG9ydCBpbnRlcmZhY2UgR2VtaW5pUmVzcG9uc2Uge1xuICBzbGlkZXM6IEFycmF5PHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICBpbWFnZVByb21wdDogc3RyaW5nO1xuICB9PjtcbiAgdG9rZW5zVXNlZDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5hbm9CYW5hbmFSZXNwb25zZSB7XG4gIGltYWdlVXJsOiBzdHJpbmc7XG4gIGNhbGxzVXNlZDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVsZXZlbkxhYnNSZXNwb25zZSB7XG4gIGF1ZGlvVXJsOiBzdHJpbmc7XG4gIGNoYXJhY3RlcnNVc2VkOiBudW1iZXI7XG59XG5cbi8vIFF1b3RhIE1hbmFnZW1lbnRcbmV4cG9ydCBpbnRlcmZhY2UgQXBpUXVvdGFTdGF0dXMge1xuICBzZXJ2aWNlOiAnZ2VtaW5pJyB8ICduYW5vX2JhbmFuYScgfCAnZWxldmVuX2xhYnMnO1xuICByZW1haW5pbmc6IG51bWJlcjtcbiAgdG90YWw6IG51bWJlcjtcbiAgcmVzZXREYXRlPzogRGF0ZTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../packages/shared/src/types/api.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/shared/src/types/fallback.ts":
/*!***************************************************!*\
  !*** ../../packages/shared/src/types/fallback.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy90eXBlcy9mYWxsYmFjay50cyIsIm1hcHBpbmdzIjoiO0FBZ0JDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHNwZWFrZGVjay93ZWIvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy90eXBlcy9mYWxsYmFjay50cz9jN2EzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgRmFsbGJhY2tEZWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgdG9waWM6IHN0cmluZzsgLy8gZS5nLiwgXCJUZWNobm9sb2d5XCIsIFwiQnVzaW5lc3NcIiwgXCJFZHVjYXRpb25cIlxuICB0aXRsZTogc3RyaW5nO1xuICBzbGlkZXM6IEZhbGxiYWNrU2xpZGVbXTtcbiAgaXNBY3RpdmU6IGJvb2xlYW47XG4gIHVzYWdlQ291bnQ6IG51bWJlcjtcbiAgY3JlYXRlZEF0OiBEYXRlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZhbGxiYWNrU2xpZGUge1xuICBzbGlkZU51bWJlcjogbnVtYmVyO1xuICB0aXRsZTogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIGltYWdlVXJsOiBzdHJpbmc7IC8vIFByZS1zdG9yZWQgaW4gU3VwYWJhc2UgU3RvcmFnZVxuICBhdWRpb1VybDogc3RyaW5nOyAvLyBQcmUtc3RvcmVkIGluIFN1cGFiYXNlIFN0b3JhZ2Vcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../packages/shared/src/types/fallback.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/shared/src/types/presentation.ts":
/*!*******************************************************!*\
  !*** ../../packages/shared/src/types/presentation.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy90eXBlcy9wcmVzZW50YXRpb24udHMiLCJtYXBwaW5ncyI6IjtBQWtDQyIsInNvdXJjZXMiOlsid2VicGFjazovL0BzcGVha2RlY2svd2ViLy4uLy4uL3BhY2thZ2VzL3NoYXJlZC9zcmMvdHlwZXMvcHJlc2VudGF0aW9uLnRzPzlkODAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2xpZGUgfSBmcm9tICcuL3NsaWRlJztcblxuZXhwb3J0IGludGVyZmFjZSBQcmVzZW50YXRpb24ge1xuICBpZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBzdGF0dXM6ICdwZW5kaW5nJyB8ICdwcm9jZXNzaW5nJyB8ICdnZW5lcmF0aW5nX3RleHQnIHwgJ2dlbmVyYXRpbmdfdmlzdWFscycgfCAnZ2VuZXJhdGluZ19hdWRpbycgfCAnY29tcGxldGVkJyB8ICdmYWlsZWQnO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbiAgdXNlcklkPzogc3RyaW5nOyAvLyBPcHRpb25hbCBmb3IgTVZQXG4gIHNsaWRlczogU2xpZGVbXTtcbiAgdG90YWxTbGlkZXM6IG51bWJlcjtcbiAgZ2VuZXJhdGlvblRpbWVNcz86IG51bWJlcjtcbiAgZXJyb3JNZXNzYWdlPzogc3RyaW5nO1xuICBtZXRhZGF0YToge1xuICAgIGdlbWluaVRva2Vuc1VzZWQ/OiBudW1iZXI7XG4gICAgbmFub0JhbmFuYUNhbGxzVXNlZD86IG51bWJlcjtcbiAgICBlbGV2ZW5MYWJzQ2hhcmFjdGVyc1VzZWQ/OiBudW1iZXI7XG4gICAgaXNGYWxsYmFjaz86IGJvb2xlYW47XG4gICAgZmFsbGJhY2tEZWNrSWQ/OiBzdHJpbmc7XG4gICAgZmFsbGJhY2tSZWFzb24/OiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJlc2VudGF0aW9uSW5wdXQge1xuICB0aXRsZTogc3RyaW5nO1xuICB1c2VySWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJlc2VudGF0aW9uUHJvZ3Jlc3Mge1xuICBwcmVzZW50YXRpb25JZDogc3RyaW5nO1xuICBzdGF0dXM6IFByZXNlbnRhdGlvblsnc3RhdHVzJ107XG4gIHByb2dyZXNzOiBudW1iZXI7IC8vIDAtMTAwXG4gIGN1cnJlbnRTdGVwOiBzdHJpbmc7XG4gIGVzdGltYXRlZFRpbWVSZW1haW5pbmc/OiBudW1iZXI7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/shared/src/types/presentation.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/shared/src/types/slide.ts":
/*!************************************************!*\
  !*** ../../packages/shared/src/types/slide.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy90eXBlcy9zbGlkZS50cyIsIm1hcHBpbmdzIjoiO0FBMEJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHNwZWFrZGVjay93ZWIvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy90eXBlcy9zbGlkZS50cz9kMzY4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgU2xpZGUge1xuICBpZDogc3RyaW5nO1xuICBwcmVzZW50YXRpb25JZDogc3RyaW5nO1xuICBzbGlkZU51bWJlcjogbnVtYmVyO1xuICB0aXRsZTogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIGltYWdlVXJsPzogc3RyaW5nO1xuICBhdWRpb1VybD86IHN0cmluZztcbiAgZ2VuZXJhdGlvblN0YXR1czoge1xuICAgIHRleHQ6ICdwZW5kaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2ZhaWxlZCc7XG4gICAgaW1hZ2U6ICdwZW5kaW5nJyB8ICdwcm9jZXNzaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2ZhaWxlZCc7XG4gICAgYXVkaW86ICdwZW5kaW5nJyB8ICdwcm9jZXNzaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2ZhaWxlZCc7XG4gIH07XG4gIGFpUHJvbXB0czoge1xuICAgIGltYWdlUHJvbXB0Pzogc3RyaW5nO1xuICAgIGF1ZGlvU2NyaXB0Pzogc3RyaW5nO1xuICB9O1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTbGlkZUlucHV0IHtcbiAgcHJlc2VudGF0aW9uSWQ6IHN0cmluZztcbiAgc2xpZGVOdW1iZXI6IG51bWJlcjtcbiAgdGl0bGU6IHN0cmluZztcbiAgY29udGVudDogc3RyaW5nO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/shared/src/types/slide.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/shared/src/utils/api.ts":
/*!**********************************************!*\
  !*** ../../packages/shared/src/utils/api.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createErrorResponse: () => (/* binding */ createErrorResponse),\n/* harmony export */   createSuccessResponse: () => (/* binding */ createSuccessResponse),\n/* harmony export */   formatApiError: () => (/* binding */ formatApiError),\n/* harmony export */   generateRequestId: () => (/* binding */ generateRequestId),\n/* harmony export */   isApiError: () => (/* binding */ isApiError),\n/* harmony export */   retryWithBackoff: () => (/* binding */ retryWithBackoff),\n/* harmony export */   sleep: () => (/* binding */ sleep)\n/* harmony export */ });\n/* harmony import */ var _constants_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants/app */ \"(rsc)/../../packages/shared/src/constants/app.ts\");\n\nconst createSuccessResponse = (data)=>({\n        data,\n        success: true\n    });\nconst createErrorResponse = (code, message, details)=>({\n        data: null,\n        success: false,\n        error: {\n            code,\n            message,\n            details,\n            timestamp: new Date().toISOString(),\n            requestId: generateRequestId()\n        }\n    });\nconst generateRequestId = ()=>{\n    return `req_${Date.now()}_${Math.random().toString(36).substring(2)}`;\n};\nconst sleep = (ms)=>{\n    return new Promise((resolve)=>setTimeout(resolve, ms));\n};\nconst retryWithBackoff = async (fn, maxRetries = _constants_app__WEBPACK_IMPORTED_MODULE_0__.APP_CONFIG.API.MAX_RETRIES, baseDelay = _constants_app__WEBPACK_IMPORTED_MODULE_0__.APP_CONFIG.API.RETRY_DELAY_MS)=>{\n    let lastError = null;\n    for(let attempt = 0; attempt <= maxRetries; attempt++){\n        try {\n            return await fn();\n        } catch (error) {\n            lastError = error instanceof Error ? error : new Error(\"Unknown error\");\n            if (attempt === maxRetries) {\n                throw lastError;\n            }\n            // Exponential backoff with jitter\n            const delay = baseDelay * Math.pow(2, attempt) + Math.random() * 1000;\n            await sleep(delay);\n        }\n    }\n    throw lastError;\n};\nconst isApiError = (error)=>{\n    return error && typeof error.error === \"object\" && \"code\" in error.error;\n};\nconst formatApiError = (error)=>{\n    if (isApiError(error)) {\n        return error.error.message;\n    }\n    if (error instanceof Error) {\n        return error.message;\n    }\n    return \"An unknown error occurred\";\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy91dGlscy9hcGkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFDOEM7QUFFdkMsTUFBTUMsd0JBQXdCLENBQUlDLE9BQW9DO1FBQzNFQTtRQUNBQyxTQUFTO0lBQ1gsR0FBRztBQUVJLE1BQU1DLHNCQUFzQixDQUNqQ0MsTUFDQUMsU0FDQUMsVUFDc0I7UUFDdEJMLE1BQU07UUFDTkMsU0FBUztRQUNUSyxPQUFPO1lBQ0xIO1lBQ0FDO1lBQ0FDO1lBQ0FFLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztZQUNqQ0MsV0FBV0M7UUFDYjtJQUNGLEdBQUc7QUFFSSxNQUFNQSxvQkFBb0I7SUFDL0IsT0FBTyxDQUFDLElBQUksRUFBRUgsS0FBS0ksR0FBRyxHQUFHLENBQUMsRUFBRUMsS0FBS0MsTUFBTSxHQUFHQyxRQUFRLENBQUMsSUFBSUMsU0FBUyxDQUFDLEdBQUcsQ0FBQztBQUN2RSxFQUFFO0FBRUssTUFBTUMsUUFBUSxDQUFDQztJQUNwQixPQUFPLElBQUlDLFFBQVFDLENBQUFBLFVBQVdDLFdBQVdELFNBQVNGO0FBQ3BELEVBQUU7QUFFSyxNQUFNSSxtQkFBbUIsT0FDOUJDLElBQ0FDLGFBQXFCMUIsc0RBQVVBLENBQUMyQixHQUFHLENBQUNDLFdBQVcsRUFDL0NDLFlBQW9CN0Isc0RBQVVBLENBQUMyQixHQUFHLENBQUNHLGNBQWM7SUFFakQsSUFBSUMsWUFBMEI7SUFFOUIsSUFBSyxJQUFJQyxVQUFVLEdBQUdBLFdBQVdOLFlBQVlNLFVBQVc7UUFDdEQsSUFBSTtZQUNGLE9BQU8sTUFBTVA7UUFDZixFQUFFLE9BQU9qQixPQUFPO1lBQ2R1QixZQUFZdkIsaUJBQWlCeUIsUUFBUXpCLFFBQVEsSUFBSXlCLE1BQU07WUFFdkQsSUFBSUQsWUFBWU4sWUFBWTtnQkFDMUIsTUFBTUs7WUFDUjtZQUVBLGtDQUFrQztZQUNsQyxNQUFNRyxRQUFRTCxZQUFZZCxLQUFLb0IsR0FBRyxDQUFDLEdBQUdILFdBQVdqQixLQUFLQyxNQUFNLEtBQUs7WUFDakUsTUFBTUcsTUFBTWU7UUFDZDtJQUNGO0lBRUEsTUFBTUg7QUFDUixFQUFFO0FBRUssTUFBTUssYUFBYSxDQUFDNUI7SUFDekIsT0FBT0EsU0FBUyxPQUFPQSxNQUFNQSxLQUFLLEtBQUssWUFBWSxVQUFVQSxNQUFNQSxLQUFLO0FBQzFFLEVBQUU7QUFFSyxNQUFNNkIsaUJBQWlCLENBQUM3QjtJQUM3QixJQUFJNEIsV0FBVzVCLFFBQVE7UUFDckIsT0FBT0EsTUFBTUEsS0FBSyxDQUFDRixPQUFPO0lBQzVCO0lBRUEsSUFBSUUsaUJBQWlCeUIsT0FBTztRQUMxQixPQUFPekIsTUFBTUYsT0FBTztJQUN0QjtJQUVBLE9BQU87QUFDVCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHNwZWFrZGVjay93ZWIvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy91dGlscy9hcGkudHM/YWZlYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcGlFcnJvciwgQXBpUmVzcG9uc2UsIEFwaUVycm9yUmVzcG9uc2UsIEFwaVN1Y2Nlc3NSZXNwb25zZSB9IGZyb20gJy4uL3R5cGVzL2FwaSc7XG5pbXBvcnQgeyBBUFBfQ09ORklHIH0gZnJvbSAnLi4vY29uc3RhbnRzL2FwcCc7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVTdWNjZXNzUmVzcG9uc2UgPSA8VD4oZGF0YTogVCk6IEFwaVN1Y2Nlc3NSZXNwb25zZTxUPiA9PiAoe1xuICBkYXRhLFxuICBzdWNjZXNzOiB0cnVlLFxufSk7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVFcnJvclJlc3BvbnNlID0gKFxuICBjb2RlOiBzdHJpbmcsXG4gIG1lc3NhZ2U6IHN0cmluZyxcbiAgZGV0YWlscz86IFJlY29yZDxzdHJpbmcsIGFueT5cbik6IEFwaUVycm9yUmVzcG9uc2UgPT4gKHtcbiAgZGF0YTogbnVsbCxcbiAgc3VjY2VzczogZmFsc2UsXG4gIGVycm9yOiB7XG4gICAgY29kZSxcbiAgICBtZXNzYWdlLFxuICAgIGRldGFpbHMsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgcmVxdWVzdElkOiBnZW5lcmF0ZVJlcXVlc3RJZCgpLFxuICB9LFxufSk7XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVJlcXVlc3RJZCA9ICgpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gYHJlcV8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIpfWA7XG59O1xuXG5leHBvcnQgY29uc3Qgc2xlZXAgPSAobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4gPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG59O1xuXG5leHBvcnQgY29uc3QgcmV0cnlXaXRoQmFja29mZiA9IGFzeW5jIDxUPihcbiAgZm46ICgpID0+IFByb21pc2U8VD4sXG4gIG1heFJldHJpZXM6IG51bWJlciA9IEFQUF9DT05GSUcuQVBJLk1BWF9SRVRSSUVTLFxuICBiYXNlRGVsYXk6IG51bWJlciA9IEFQUF9DT05GSUcuQVBJLlJFVFJZX0RFTEFZX01TXG4pOiBQcm9taXNlPFQ+ID0+IHtcbiAgbGV0IGxhc3RFcnJvcjogRXJyb3IgfCBudWxsID0gbnVsbDtcbiAgXG4gIGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDw9IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgZm4oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbGFzdEVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKCdVbmtub3duIGVycm9yJyk7XG4gICAgICBcbiAgICAgIGlmIChhdHRlbXB0ID09PSBtYXhSZXRyaWVzKSB7XG4gICAgICAgIHRocm93IGxhc3RFcnJvcjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRXhwb25lbnRpYWwgYmFja29mZiB3aXRoIGppdHRlclxuICAgICAgY29uc3QgZGVsYXkgPSBiYXNlRGVsYXkgKiBNYXRoLnBvdygyLCBhdHRlbXB0KSArIE1hdGgucmFuZG9tKCkgKiAxMDAwO1xuICAgICAgYXdhaXQgc2xlZXAoZGVsYXkpO1xuICAgIH1cbiAgfVxuICBcbiAgdGhyb3cgbGFzdEVycm9yO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzQXBpRXJyb3IgPSAoZXJyb3I6IGFueSk6IGVycm9yIGlzIEFwaUVycm9yID0+IHtcbiAgcmV0dXJuIGVycm9yICYmIHR5cGVvZiBlcnJvci5lcnJvciA9PT0gJ29iamVjdCcgJiYgJ2NvZGUnIGluIGVycm9yLmVycm9yO1xufTtcblxuZXhwb3J0IGNvbnN0IGZvcm1hdEFwaUVycm9yID0gKGVycm9yOiB1bmtub3duKTogc3RyaW5nID0+IHtcbiAgaWYgKGlzQXBpRXJyb3IoZXJyb3IpKSB7XG4gICAgcmV0dXJuIGVycm9yLmVycm9yLm1lc3NhZ2U7XG4gIH1cbiAgXG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgcmV0dXJuIGVycm9yLm1lc3NhZ2U7XG4gIH1cbiAgXG4gIHJldHVybiAnQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCc7XG59O1xuIl0sIm5hbWVzIjpbIkFQUF9DT05GSUciLCJjcmVhdGVTdWNjZXNzUmVzcG9uc2UiLCJkYXRhIiwic3VjY2VzcyIsImNyZWF0ZUVycm9yUmVzcG9uc2UiLCJjb2RlIiwibWVzc2FnZSIsImRldGFpbHMiLCJlcnJvciIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInJlcXVlc3RJZCIsImdlbmVyYXRlUmVxdWVzdElkIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwic2xlZXAiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInJldHJ5V2l0aEJhY2tvZmYiLCJmbiIsIm1heFJldHJpZXMiLCJBUEkiLCJNQVhfUkVUUklFUyIsImJhc2VEZWxheSIsIlJFVFJZX0RFTEFZX01TIiwibGFzdEVycm9yIiwiYXR0ZW1wdCIsIkVycm9yIiwiZGVsYXkiLCJwb3ciLCJpc0FwaUVycm9yIiwiZm9ybWF0QXBpRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/shared/src/utils/api.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/shared/src/utils/validation.ts":
/*!*****************************************************!*\
  !*** ../../packages/shared/src/utils/validation.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isValidAudioType: () => (/* binding */ isValidAudioType),\n/* harmony export */   isValidImageType: () => (/* binding */ isValidImageType),\n/* harmony export */   isValidUrl: () => (/* binding */ isValidUrl),\n/* harmony export */   validatePresentationTitle: () => (/* binding */ validatePresentationTitle),\n/* harmony export */   validateSlideContent: () => (/* binding */ validateSlideContent)\n/* harmony export */ });\n/* harmony import */ var _constants_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants/app */ \"(rsc)/../../packages/shared/src/constants/app.ts\");\n\nconst validatePresentationTitle = (title)=>{\n    if (!title || typeof title !== \"string\") {\n        return {\n            isValid: false,\n            error: \"Title is required and must be a string\"\n        };\n    }\n    if (title.trim().length === 0) {\n        return {\n            isValid: false,\n            error: \"Title cannot be empty\"\n        };\n    }\n    if (title.length > _constants_app__WEBPACK_IMPORTED_MODULE_0__.APP_CONFIG.PRESENTATION.MAX_TITLE_LENGTH) {\n        return {\n            isValid: false,\n            error: `Title cannot exceed ${_constants_app__WEBPACK_IMPORTED_MODULE_0__.APP_CONFIG.PRESENTATION.MAX_TITLE_LENGTH} characters`\n        };\n    }\n    return {\n        isValid: true\n    };\n};\nconst validateSlideContent = (content)=>{\n    if (!content || typeof content !== \"string\") {\n        return {\n            isValid: false,\n            error: \"Content is required and must be a string\"\n        };\n    }\n    if (content.trim().length === 0) {\n        return {\n            isValid: false,\n            error: \"Content cannot be empty\"\n        };\n    }\n    if (content.length > _constants_app__WEBPACK_IMPORTED_MODULE_0__.APP_CONFIG.PRESENTATION.MAX_CONTENT_LENGTH) {\n        return {\n            isValid: false,\n            error: `Content cannot exceed ${_constants_app__WEBPACK_IMPORTED_MODULE_0__.APP_CONFIG.PRESENTATION.MAX_CONTENT_LENGTH} characters`\n        };\n    }\n    return {\n        isValid: true\n    };\n};\nconst isValidUrl = (url)=>{\n    try {\n        new URL(url);\n        return true;\n    } catch  {\n        return false;\n    }\n};\nconst isValidImageType = (mimeType)=>{\n    return _constants_app__WEBPACK_IMPORTED_MODULE_0__.APP_CONFIG.STORAGE.ALLOWED_IMAGE_TYPES.includes(mimeType);\n};\nconst isValidAudioType = (mimeType)=>{\n    return _constants_app__WEBPACK_IMPORTED_MODULE_0__.APP_CONFIG.STORAGE.ALLOWED_AUDIO_TYPES.includes(mimeType);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy91dGlscy92YWxpZGF0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE4QztBQUV2QyxNQUFNQyw0QkFBNEIsQ0FBQ0M7SUFDeEMsSUFBSSxDQUFDQSxTQUFTLE9BQU9BLFVBQVUsVUFBVTtRQUN2QyxPQUFPO1lBQUVDLFNBQVM7WUFBT0MsT0FBTztRQUF5QztJQUMzRTtJQUVBLElBQUlGLE1BQU1HLElBQUksR0FBR0MsTUFBTSxLQUFLLEdBQUc7UUFDN0IsT0FBTztZQUFFSCxTQUFTO1lBQU9DLE9BQU87UUFBd0I7SUFDMUQ7SUFFQSxJQUFJRixNQUFNSSxNQUFNLEdBQUdOLHNEQUFVQSxDQUFDTyxZQUFZLENBQUNDLGdCQUFnQixFQUFFO1FBQzNELE9BQU87WUFDTEwsU0FBUztZQUNUQyxPQUFPLENBQUMsb0JBQW9CLEVBQUVKLHNEQUFVQSxDQUFDTyxZQUFZLENBQUNDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQztRQUNyRjtJQUNGO0lBRUEsT0FBTztRQUFFTCxTQUFTO0lBQUs7QUFDekIsRUFBRTtBQUVLLE1BQU1NLHVCQUF1QixDQUFDQztJQUNuQyxJQUFJLENBQUNBLFdBQVcsT0FBT0EsWUFBWSxVQUFVO1FBQzNDLE9BQU87WUFBRVAsU0FBUztZQUFPQyxPQUFPO1FBQTJDO0lBQzdFO0lBRUEsSUFBSU0sUUFBUUwsSUFBSSxHQUFHQyxNQUFNLEtBQUssR0FBRztRQUMvQixPQUFPO1lBQUVILFNBQVM7WUFBT0MsT0FBTztRQUEwQjtJQUM1RDtJQUVBLElBQUlNLFFBQVFKLE1BQU0sR0FBR04sc0RBQVVBLENBQUNPLFlBQVksQ0FBQ0ksa0JBQWtCLEVBQUU7UUFDL0QsT0FBTztZQUNMUixTQUFTO1lBQ1RDLE9BQU8sQ0FBQyxzQkFBc0IsRUFBRUosc0RBQVVBLENBQUNPLFlBQVksQ0FBQ0ksa0JBQWtCLENBQUMsV0FBVyxDQUFDO1FBQ3pGO0lBQ0Y7SUFFQSxPQUFPO1FBQUVSLFNBQVM7SUFBSztBQUN6QixFQUFFO0FBRUssTUFBTVMsYUFBYSxDQUFDQztJQUN6QixJQUFJO1FBQ0YsSUFBSUMsSUFBSUQ7UUFDUixPQUFPO0lBQ1QsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0YsRUFBRTtBQUVLLE1BQU1FLG1CQUFtQixDQUFDQztJQUMvQixPQUFPaEIsc0RBQVVBLENBQUNpQixPQUFPLENBQUNDLG1CQUFtQixDQUFDQyxRQUFRLENBQUNIO0FBQ3pELEVBQUU7QUFFSyxNQUFNSSxtQkFBbUIsQ0FBQ0o7SUFDL0IsT0FBT2hCLHNEQUFVQSxDQUFDaUIsT0FBTyxDQUFDSSxtQkFBbUIsQ0FBQ0YsUUFBUSxDQUFDSDtBQUN6RCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHNwZWFrZGVjay93ZWIvLi4vLi4vcGFja2FnZXMvc2hhcmVkL3NyYy91dGlscy92YWxpZGF0aW9uLnRzPzEyNTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBQX0NPTkZJRyB9IGZyb20gJy4uL2NvbnN0YW50cy9hcHAnO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGVQcmVzZW50YXRpb25UaXRsZSA9ICh0aXRsZTogc3RyaW5nKTogeyBpc1ZhbGlkOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9ID0+IHtcbiAgaWYgKCF0aXRsZSB8fCB0eXBlb2YgdGl0bGUgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiAnVGl0bGUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBzdHJpbmcnIH07XG4gIH1cbiAgXG4gIGlmICh0aXRsZS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiAnVGl0bGUgY2Fubm90IGJlIGVtcHR5JyB9O1xuICB9XG4gIFxuICBpZiAodGl0bGUubGVuZ3RoID4gQVBQX0NPTkZJRy5QUkVTRU5UQVRJT04uTUFYX1RJVExFX0xFTkdUSCkge1xuICAgIHJldHVybiB7IFxuICAgICAgaXNWYWxpZDogZmFsc2UsIFxuICAgICAgZXJyb3I6IGBUaXRsZSBjYW5ub3QgZXhjZWVkICR7QVBQX0NPTkZJRy5QUkVTRU5UQVRJT04uTUFYX1RJVExFX0xFTkdUSH0gY2hhcmFjdGVyc2AgXG4gICAgfTtcbiAgfVxuICBcbiAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSB9O1xufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlU2xpZGVDb250ZW50ID0gKGNvbnRlbnQ6IHN0cmluZyk6IHsgaXNWYWxpZDogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfSA9PiB7XG4gIGlmICghY29udGVudCB8fCB0eXBlb2YgY29udGVudCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6ICdDb250ZW50IGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgc3RyaW5nJyB9O1xuICB9XG4gIFxuICBpZiAoY29udGVudC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yOiAnQ29udGVudCBjYW5ub3QgYmUgZW1wdHknIH07XG4gIH1cbiAgXG4gIGlmIChjb250ZW50Lmxlbmd0aCA+IEFQUF9DT05GSUcuUFJFU0VOVEFUSU9OLk1BWF9DT05URU5UX0xFTkdUSCkge1xuICAgIHJldHVybiB7IFxuICAgICAgaXNWYWxpZDogZmFsc2UsIFxuICAgICAgZXJyb3I6IGBDb250ZW50IGNhbm5vdCBleGNlZWQgJHtBUFBfQ09ORklHLlBSRVNFTlRBVElPTi5NQVhfQ09OVEVOVF9MRU5HVEh9IGNoYXJhY3RlcnNgIFxuICAgIH07XG4gIH1cbiAgXG4gIHJldHVybiB7IGlzVmFsaWQ6IHRydWUgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBpc1ZhbGlkVXJsID0gKHVybDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gIHRyeSB7XG4gICAgbmV3IFVSTCh1cmwpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBpc1ZhbGlkSW1hZ2VUeXBlID0gKG1pbWVUeXBlOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIEFQUF9DT05GSUcuU1RPUkFHRS5BTExPV0VEX0lNQUdFX1RZUEVTLmluY2x1ZGVzKG1pbWVUeXBlIGFzIGFueSk7XG59O1xuXG5leHBvcnQgY29uc3QgaXNWYWxpZEF1ZGlvVHlwZSA9IChtaW1lVHlwZTogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBBUFBfQ09ORklHLlNUT1JBR0UuQUxMT1dFRF9BVURJT19UWVBFUy5pbmNsdWRlcyhtaW1lVHlwZSBhcyBhbnkpO1xufTtcbiJdLCJuYW1lcyI6WyJBUFBfQ09ORklHIiwidmFsaWRhdGVQcmVzZW50YXRpb25UaXRsZSIsInRpdGxlIiwiaXNWYWxpZCIsImVycm9yIiwidHJpbSIsImxlbmd0aCIsIlBSRVNFTlRBVElPTiIsIk1BWF9USVRMRV9MRU5HVEgiLCJ2YWxpZGF0ZVNsaWRlQ29udGVudCIsImNvbnRlbnQiLCJNQVhfQ09OVEVOVF9MRU5HVEgiLCJpc1ZhbGlkVXJsIiwidXJsIiwiVVJMIiwiaXNWYWxpZEltYWdlVHlwZSIsIm1pbWVUeXBlIiwiU1RPUkFHRSIsIkFMTE9XRURfSU1BR0VfVFlQRVMiLCJpbmNsdWRlcyIsImlzVmFsaWRBdWRpb1R5cGUiLCJBTExPV0VEX0FVRElPX1RZUEVTIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../packages/shared/src/utils/validation.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/google-auth-library","vendor-chunks/uuid","vendor-chunks/ws","vendor-chunks/gaxios","vendor-chunks/jws","vendor-chunks/debug","vendor-chunks/json-bigint","vendor-chunks/google-logging-utils","vendor-chunks/https-proxy-agent","vendor-chunks/gcp-metadata","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/agent-base","vendor-chunks/node-fetch","vendor-chunks/@google","vendor-chunks/supports-color","vendor-chunks/safe-buffer","vendor-chunks/ms","vendor-chunks/jwa","vendor-chunks/has-flag","vendor-chunks/gtoken","vendor-chunks/extend","vendor-chunks/buffer-equal-constant-time","vendor-chunks/bignumber.js","vendor-chunks/base64-js"], () => (__webpack_exec__("(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpresentations%2Froute&page=%2Fapi%2Fpresentations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpresentations%2Froute.ts&appDir=C%3A%5CUsers%5Cazeta%5CDocuments%5CProjects%5Cspeakdeck-build%5Capps%5Cweb%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cazeta%5CDocuments%5CProjects%5Cspeakdeck-build%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();